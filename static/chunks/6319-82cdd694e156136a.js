(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6319,2353],{76968:function(t,e,r){"use strict";var a=r(59494);function s(){return document.location.href.indexOf("localhost")>=0}class i{static init(t){s()||a.ZP.initialize(t)}static pageview(t){s()||a.ZP.send({hitType:"pageview",page:t})}static event(t,e,r){s()||a.ZP.event({category:t,action:e,label:r})}}e.Z=i},76142:function(t,e){"use strict";class r{static #t=this.PLAYER_STATE_STOP="stop";static #e=this.PLAYER_STATE_START="start";static #r=this.PLAYER_STATE_PAUSE="pause";static isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static isIphone(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}static isFirefox(){return/Firefox/i.test(navigator.userAgent)}static sanitizeUrl(t){let e=t.indexOf("?");return e>=0&&(t=t.slice(0,e)),"/"!==t[t.length-1]&&(t+="/"),t}static isYoutubeUrl(t){var e=t.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return e&&11===e[2].length}static isInstagramUrl(t){var e=this.sanitizeUrl(t).match(/(?:(?:http|https):\/\/)?(?:www.)?(?:instagram.com|instagr.am|instagr.com)(?:\/(?:.?)*)*\/(?:reel|p|tv)\/(.*)*(?:\/)*/);return e&&e[1]}static getTiktokVideoId(t){var e=this.sanitizeUrl(t).match(/(?:(?:http|https):\/\/)?(?:www.)?tiktok.com\/@(.*)\/video\/(.*)*/);return e&&e[1]&&e[2]?e[2]:null}static isTiktokUrl(t){var e=this.sanitizeUrl(t).match(/(?:(?:http|https):\/\/)?(?:www.)?tiktok.com\/@(.*)\/video\/(.*)*/);return e&&e[1]&&e[2]}static isFacebookUrl(t){var e=this.sanitizeUrl(t).match(/(?:https?:\/\/)?(?:www\.)?(mbasic.facebook|m\.facebook|facebook|fb)\.(com|me)\/(?:(?:\w\.)*#!\/)?(?:pages\/)?(?:[\w\-.]*\/)*([\w\-.]*)/);return e&&e[1]&&e[2]}static tokenToTexts(t,e){return e.map(e=>t(e))}static getUidsFromUsers(t){let e=[];return t.forEach(t=>{t.uid&&e.push(t.uid)}),e}static millisToTime(t){let e=Math.floor(t/1e3),r=Math.floor(e/60),a=Math.floor(r/60);return{h:a%=24,m:r%=60,s:e%=60,mm:t%1e3}}static timeToMillis(t,e,r){let a=new Date,s=new Date;return s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),a.setMinutes(t),a.setSeconds(e),a.setMilliseconds(r),a.getTime()-s.getTime()}static printTime(t){return`${String(t.m).padStart(2,"0")}:${String(t.s).padStart(2,"0")}:${String(t.mm).padStart(3,"0")}`}static randomizeArray(t){let e=t.length,r;for(;0!==e;)r=Math.floor(Math.random()*e),e--,[t[e],t[r]]=[t[r],t[e]];return t}static getWinnerByPoints(t){let e=[...t];return e.sort(function(t,e){let r=t.points-e.points;return 0===r?t.id-e.id:r}),e}static getWinnerByPointsAndTime(t){let e=[...t];return e.sort(function(t,e){let r=t.points-e.points;return 0===r?t.time-e.time:r}),e}static getOrderedGameResult(t){return(t=this.calulateFinalGameResult(t)).players=t.players.sort((t,e)=>{let r=t.totalPoints-e.totalPoints;if(0===r){let r=t.totalTime-e.totalTime;return 0===r?e.totalGateProgression-t.totalGateProgression:r}return r}),t}static calulateFinalGameResult(t){let e={...t};return e.players.forEach(t=>{let e=0,r=0,a=0;t.zones.forEach(t=>{e+=t.totalPoints,r+=t.time,a+=t.gateProgression}),t.totalPoints=e,t.totalTime=r,t.totalGateProgression=a}),e}static getMapsURL(t,e){return`https://www.google.com/maps/search/?api=1&query=${t}%2C${e}`}}e.Z=r},20662:function(t,e,r){"use strict";r.d(e,{o:function(){return u},default:function(){return w}});var a=r(57437),s=r(2265),i=r(76968),n=r(16463);r(74590);var o=r(58064),c=(0,o.$)("d2f620e3631f52cef7b42ad173226d12d541cf60"),l=(0,o.$)("860c31201d181792f7c79c3169cb861ee2cfc0f2");async function d(){await c()}function u(t,e,r){(window.crawlear?.fbBase).getFullFirebase(async()=>{await l(window.crawlear.user.uid),r(h),e&&e.length>0?t.push(e):void 0===e&&t.push("/game")})}let h=1;var w=function(t){let{onLoginDestiny:e}=t,r=s.useRef(0),o=(0,n.useRouter)();return s.useEffect(()=>{if((!window.crawlear||!window.crawlear.user)&&0===r.current){var t;r.current=2,t=t=>{r.current=t},(window.crawlear?.fbBase).checkIfLogged(()=>{u(o,e,t)},()=>{d(),t(0)}),i.Z.init("G-J1NH6FT6E3"),i.Z.event("App","init",`${navigator.userAgent}`)}},[]),(0,a.jsx)(a.Fragment,{})}},22788:function(t,e,r){"use strict";r.d(e,{default:function(){return f}});var a=r(57437),s=r(2265),i=r(76968);let n=()=>document.location.href.indexOf("localhost")>=0;var o=function(){if("serviceWorker"in navigator){let t=(n(),"/sw.js");navigator.serviceWorker.register(t).then(function(t){i.Z.event("App","pwa","registered")},function(t){i.Z.event("App","pwa","registration error"),console.log("ServiceWorker registration failed: ",t)}).catch(function(t){console.log(t)})}else i.Z.event("App","pwa","service worker not supported"),console.log("service worker is not supported")},c=r(24495);r(76735),r(67059);var l=r(76142),d=r(15236),u=r(60516),h=r(69842),w=r(5186);let p={apiKey:"AIzaSyATlKKGw99gurKNwHL7BU1-_Llj0hwJy60",authDomain:"crawlear-com.firebaseapp.com",databaseURL:"https://crawlear-com-default-rtdb.europe-west1.firebasedatabase.app",projectId:"crawlear-com",storageBucket:"crawlear-com.appspot.com",messagingSenderId:"879856500816",appId:"1:879856500816:web:4287599cc229d5f4c3d155",measurementId:"G-YD7VLXPTM2"};class g{constructor(){this.app=(0,d.ZF)(p),this.provider=new w.hJ,this.auth=(0,w.v0)(),this.db=(0,h.ad)(),this.rdb=(0,u.N8)(),this.initAppCheck()}getFullFirebase(t){Promise.all([r.e(1118),r.e(5274),r.e(2759),r.e(2797)]).then(r.bind(r,17518)).then(e=>{let r=new e.default(this);window.crawlear=window.crawlear||{},window.crawlear.fb=r,t&&t()})}initAppCheck(){(0,c.yu)(this.app,{provider:new c.z9("6LfMPSIiAAAAABUfGLi_j7mnUr1snw9RriT8eBqP"),isTokenAutoRefreshEnabled:!0})}checkIfLogged(t,e){this.checkIfRedirect(t),this.auth.onAuthStateChanged(r=>{r?this.getUser(r.uid,e=>{this.setUserInContext(e,r.uid),t()},()=>{this.setUser(r,e=>{this.setUserInContext(e,r.uid),t()},()=>{})}):e&&e()})}checkIfRedirect(t){(0,w.cx)(this.auth).then(e=>{this.getUser(e.user.uid,r=>{this.setUserInContext(r,e.user.uid),t&&t(r)},()=>{this.setUser(e.user,t,t=>{this.setUserInContext(t,e.user.uid)})})}).catch(t=>{})}signOutWithGoogle(t){(0,w.w7)(this.auth).then(()=>{t&&t()})}signInWithGoogle(t){(0,w.Fb)(this.auth,w.a$).then(()=>{!l.Z.isMobile()||l.Z.isIphone()||l.Z.isFirefox()?(0,w.rh)(this.auth,this.provider).then(e=>{this.getUser(e.user.uid,r=>{this.setUserInContext(r,e.user.uid),t&&t(r)},()=>{this.setUser(e.user,t,t=>{this.setUserInContext(t,e.user.uid)})})}).catch(t=>{}):(0,w.F6)(this.auth,this.provider)}).catch(t=>{})}async getUser(t,e,r){let a=(0,h.JU)(this.db,"users",t),s=await (0,h.QT)(a);if(s.exists()){let t=s.data();t.uid=a.id,e&&e(t)}else r&&r()}async getUserExtraData(t,e,r){try{let r={},a=(0,h.IO)((0,h.hJ)(this.db,"games"),(0,h.ar)("uids","array-contains",t)),s=await (0,h.PL)(a);r.pilotGames=s.docs.length,a=(0,h.IO)((0,h.hJ)(this.db,"games"),(0,h.ar)("jids","array-contains",t)),s=await (0,h.PL)(a),r.judgeGames=s.docs.length,a=(0,h.IO)((0,h.hJ)(this.db,"routes"),(0,h.ar)("uids","array-contains",t)),s=await (0,h.PL)(a),r.routes=s.docs.length,e&&e(r)}catch(t){r&&r()}}async getFidFromFollow(t,e,r,a){try{let a=(0,h.IO)((0,h.hJ)(this.db,"follows"),(0,h.ar)("fromUid","==",t),(0,h.ar)("toUid","==",e),(0,h.b9)(1)),s=await (0,h.PL)(a),i=1===s.docs.length?s.docs[0].id:-1;r&&r(i)}catch(t){a&&a()}}isUserLogged(){return null!=this.auth.currentUser}async setUser(t,e,r){let{uid:a,displayName:s,photoURL:i,description:n,instagram:o}=t,c={displayName:s,photoURL:i,registrationDate:new Date().toString(),description:n||"",instagram:o||""};try{await (0,h.pl)((0,h.JU)(this.db,"users",a),c),e&&e(c)}catch(t){r&&r()}}setUserInContext(t,e){t.instagram=t.instagram||"",window.crawlear={...window.crawlear,user:t},window.crawlear.user.uid=e}async routeSearchByLatLon(t,e,r,a){try{let a=(0,h.hJ)(this.db,"routes"),s=(0,h.IO)(a,(0,h.ar)("point.lat",">",t.lat-e.lat),(0,h.ar)("point.lat","<",t.lat+e.lat)),i=await (0,h.PL)(s),n=[];i.forEach(r=>{let a=r.data();a.point.lon>t.lng-e.lon&&a.point.lon<t.lng+e.lon&&(a.rid=r.id,n.push(a))}),r&&r(n)}catch(t){a&&a(t)}}async getGpx(t,e,r){let a=(0,h.JU)(this.db,"gpx",t),s=await (0,h.QT)(a);if(s.exists()){let t=s.data();t.gid=a.id,e(t)}else r()}async getRoute(t,e,r,a){let s=(0,h.JU)(this.db,"routes",t),i=await (0,h.QT)(s);if(i.exists()){let t=i.data();t.rid=s.id,e&&t.gpx?this.getGpx(t.gpx,e=>{t.gpx=e,t.gpx.gid=e.gid,r(t)},a):r(t)}else a()}async getGame(t,e,r){let a=(0,h.JU)(this.db,"games",t),s=await (0,h.QT)(a);if(s.exists()){let t=s.data();t.gid=a.id,e&&e(t)}else r&&r()}}var f=function(){return s.useEffect(()=>{if(!window.crawlear||!window.crawlear.fbBase){let t=window.crawlear&&window.crawlear.fbBase||new g;window.crawlear=window.crawlear||{},window.crawlear.fbBase=window.crawlear.fbBase||t}o()},[]),(0,a.jsx)(a.Fragment,{})}},12353:function(t,e,r){"use strict";r.d(e,{Z:function(){return u}});var a=r(57437),s=r(2265),i=(t,e,r)=>{(0,s.useEffect)(()=>{let a=document.getElementById(e),s=document.createElement("script");return a||(s.id=e,s.src=t,s.async=!0,r&&(s.onload=r),document.body.appendChild(s)),()=>{s.parentElement&&document.body.removeChild(s)}},[t])};r(54207);var n=function(t){let{url:e,text:r}=t;return s.useEffect(()=>{document.getElementById("fb-root")?window.FB&&window.FB.XFBML&&window.FB.XFBML.parse():document.createElement("div").id="fb-root"},[]),i("https://connect.facebook.net/es_ES/sdk.js#xfbml=1&version=v14.0","fb-root-script"),(0,a.jsx)("div",{className:"fb-share-button","data-href":e,"data-layout":"button","data-size":"small",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(e)}&amp;src=sdkpreparse`,className:"fb-xfbml-parse-ignore",children:r})})};r(91193);var o=function(t){let{url:e,text:r}=t;return s.useEffect(()=>{var t,e,r,a,s,i;window.twttr=(e="script",r="twitter-wjs",s=(t=document).getElementsByTagName(e)[0],i=window.twttr||{},t.getElementById(r)?window.twttr&&window.twttr.widgets&&window.twttr.widgets.load():((a=t.createElement(e)).id=r,a.src="https://platform.twitter.com/widgets.js",s.parentNode.insertBefore(a,s),i._e=[],i.ready=function(t){i._e.push(t)}),i)},[]),(0,a.jsx)("a",{className:"twitter-share-button",href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(e)}&text=${encodeURI(r)}`,"data-size":"large",children:"Tweet"})},c=r(76968);r(23128);var l=function(t){let{url:e,text:r}=t,s=`https://telegram.me/share/url?url=${encodeURIComponent(e)}&text=${encodeURI(r)}`;return(0,a.jsx)("a",{onClick:function(){c.Z.event("share","telegram",s)},href:s,target:"_blank",rel:"noreferrer",children:(0,a.jsx)("img",{className:"telegramLogo",src:"/_next/static/media/telegramLogo.d10373b4.png",alt:"Telegram logo"})})};r(49287);var d=function(t){let{url:e,text:r}=t,s=`https://api.whatsapp.com/send?text=${encodeURI(r)} ${encodeURIComponent(e)}`;return(0,a.jsx)("a",{rel:"noreferrer",onClick:function(){c.Z.event("share","whatsapp",s)},href:s,target:"_blank","data-action":"share/whatsapp/share",children:(0,a.jsx)("img",{className:"whatsappLogo",src:"/_next/static/media/whatsappLogo.9aa0280f.svg",alt:"whatsapp logo"})})},u=function(t){let{url:e,text:r,headerText:s}=t;return(0,a.jsxs)("div",{className:"sharerContainer",children:[(0,a.jsx)("div",{className:"bold shareProfileText",children:s}),(0,a.jsxs)("div",{className:"sharers",children:[(0,a.jsx)(n,{url:`https://crawlear.com/${e}`,text:r}),(0,a.jsx)(o,{url:`https://crawlear.com/${e}`,text:r}),(0,a.jsx)(d,{url:`https://crawlear.com/${e}`,text:r}),(0,a.jsx)(l,{url:`https://crawlear.com/${e}`,text:r})]})]})}},54207:function(){},23128:function(){},91193:function(){},49287:function(){}}]);