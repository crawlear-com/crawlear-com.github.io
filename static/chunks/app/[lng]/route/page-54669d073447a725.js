(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2189],{71729:function(e,n,t){Promise.resolve().then(t.bind(t,20662)),Promise.resolve().then(t.bind(t,22788)),Promise.resolve().then(t.bind(t,7936))},57818:function(e,n,t){"use strict";t.d(n,{default:function(){return r.a}});var i=t(50551),r=t.n(i)},50551:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return o}});let i=t(99920);t(57437),t(2265);let r=i._(t(40148));function o(e,n){var t;let i={loading:e=>{let{error:n,isLoading:t,pastDelay:i}=e;return null}};"function"==typeof e&&(i.loader=e);let o={...i,...n};return(0,r.default)({...o,modules:null==(t=o.loadableGenerated)?void 0:t.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},10912:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let i=t(55592);function r(e){let{reason:n,children:t}=e;if("undefined"==typeof window)throw new i.BailoutToCSRError(n);return t}},40148:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return c}});let i=t(57437),r=t(2265),o=t(10912),s=t(61481);function a(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(a(()=>null)),loading:null,ssr:!0},c=function(e){let n={...l,...e},t=(0,r.lazy)(()=>n.loader().then(a)),c=n.loading;function u(e){let a=c?(0,i.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=n.ssr?(0,i.jsxs)(i.Fragment,{children:["undefined"==typeof window?(0,i.jsx)(s.PreloadCss,{moduleIds:n.modules}):null,(0,i.jsx)(t,{...e})]}):(0,i.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(t,{...e})});return(0,i.jsx)(r.Suspense,{fallback:a,children:l})}return u.displayName="LoadableComponent",u}},61481:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PreloadCss",{enumerable:!0,get:function(){return o}});let i=t(57437),r=t(58512);function o(e){let{moduleIds:n}=e;if("undefined"!=typeof window)return null;let t=(0,r.getExpectedRequestStore)("next/dynamic css"),o=[];if(t.reactLoadableManifest&&n){let e=t.reactLoadableManifest;for(let t of n){if(!e[t])continue;let n=e[t].files.filter(e=>e.endsWith(".css"));o.push(...n)}}return 0===o.length?null:(0,i.jsx)(i.Fragment,{children:o.map(e=>(0,i.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:t.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},11517:function(e,n,t){"use strict";var i=t(57437);t(2265),t(38033),n.Z=function(e){let{message:n}=e;return!n||n.length<=0?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)("div",{className:"errorBoxContainer",children:n})}},93632:function(e,n){"use strict";class t{constructor(e,n,t,i,r,o,s,a,l,c,u,d,f){this.name=e,this.description=n,this.isPublic=t,this.locationMapUrl=i,this.gpx=r,this.point=o,this.quadrant=s,this.uids=a,this.scale=l,this.dificulty=c,this.likes=u,this.youtubeVideo=d||"",f&&(this.rid=f)}setRid(e){this.rid=e}transformIntoData(e){return{...this,gpx:e}}}n.Z=t},78710:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(57437),r=t(2265),o=t(50362),s=function(e){let{url:n}=e,{t}=(0,o.$G)("main");return(0,i.jsx)("a",{href:n,rel:"noreferrer",target:"_blank",children:t("description.vergooglemaps")})},a=t(12353),l=function(e,n){let[t,i]=r.useState(null),[o,s]=r.useState(!1),a=window.crawlear&&window.crawlear.user&&window.crawlear.user.uid;return r.useEffect(()=>{let n=window.crawlear.fb;a&&n.getRouteLove(window.crawlear.user.uid,e,(e,n)=>{s(e),i(n)},()=>{})},[]),[o,function(r){let l=window.crawlear.fb;a&&(n&&n(!o),o?l.unloveRoute(t,()=>{i(null)},()=>{}):l.loveRoute(window.crawlear.user.uid,e,e=>{i(e)},()=>{}),s(!o))}]};t(22637);var c=function(e){let{rid:n,onLove:t}=e,[r,o]=l(n,t);return(0,i.jsx)("span",{onClick:o,className:"routeLoveContainer",children:(0,i.jsx)("span",{title:"love",className:r?"loveIcon loved":"loveIcon noloved"})})};t(58865);var u=function(e){var n;let{url:t}=e,r=(n=t.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/))&&11===n[2].length?n[2]:void 0;return r?(0,i.jsx)("div",{className:"youtube video-responsive",children:(0,i.jsx)("iframe",{src:`https://www.youtube.com/embed/${r}`,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",frameBorder:"0",allowFullScreen:!0})}):(0,i.jsx)(i.Fragment,{})},d=t(76968),f=t(57818);t(8188),t(35019),t(64767);let p=(0,f.default)(()=>Promise.all([t.e(2733),t.e(4212),t.e(6027),t.e(6645),t.e(7418)]).then(t.bind(t,67418)),{loadableGenerated:{webpack:()=>[67418]},loading:()=>(0,i.jsx)("p",{children:"Loading Route Map..."}),ssr:!1});var m=function(e){let{route:n,onBackClick:t,onEditClick:l}=e,{t:f}=(0,o.$G)("main"),m=window.crawlear&&window.crawlear.user&&window.crawlear.user.uid,h=n.uids.find(e=>window.crawlear&&window.crawlear.user&&e===window.crawlear.user.uid);return(r.useEffect(()=>{d.Z.pageview(`/routeviewer/${n.rid}`)},[]),h||n.isPublic)?(0,i.jsxs)("div",{className:"routesManagement rounded rounded2",children:[(0,i.jsxs)("div",{className:"routesSection rounded rounded1",children:[!h&&m?(0,i.jsx)(c,{rid:n.rid||""}):(0,i.jsx)(i.Fragment,{}),h&&l?(0,i.jsxs)("div",{className:"editButton",onClick:l,children:["[ ",f("description.editar")," ]"]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)("div",{className:"value name",children:[n.name," "]}),(0,i.jsxs)("div",{className:"value ispublic",children:[n.isPublic?f("description.publico"):""," "]})]}),(0,i.jsx)(p,{gpx:n.gpx.data}),n.youtubeVideo?(0,i.jsx)("div",{className:"routesSection",children:(0,i.jsx)("div",{className:"value",children:(0,i.jsx)(u,{url:n.youtubeVideo})})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(a.Z,{url:`routeViewer?rid=${n.rid}`,text:f("content.shareruta"),headerText:""}),(0,i.jsx)("div",{className:"routesSection",children:(0,i.jsxs)("div",{className:"value description",children:[n.description," "]})}),(0,i.jsxs)("div",{className:"routesSection",children:[(0,i.jsx)("div",{className:"bold",children:f("description.escala")}),(0,i.jsxs)("div",{className:"value",children:[n.scale," "]})]}),(0,i.jsxs)("div",{className:"routesSection",children:[(0,i.jsx)("div",{className:"bold",children:f("description.dificultad")}),(0,i.jsxs)("div",{className:"value",children:[n.dificulty," "]})]}),(0,i.jsxs)("div",{className:"routesSection",children:[(0,i.jsx)("div",{className:"bold",children:f("description.puntoencuentro")}),(0,i.jsx)(s,{url:n.locationMapUrl})]}),(0,i.jsx)("div",{className:"routesSection backButton",children:t?(0,i.jsx)("button",{onClick:t,children:f("description.atras")}):(0,i.jsx)(i.Fragment,{})})]}):(0,i.jsx)(i.Fragment,{children:f("description.nopublico")})}},7936:function(e,n,t){"use strict";t.d(n,{default:function(){return h}});var i=t(57437),r=t(2265),o=t(78710),s=t(11517),a=t(93632),l=t(50362),c=function(e,n){let{t}=(0,l.$G)(["main"]),[i,o]=r.useState(e),[s,c]=r.useState(""),u=window.crawlear.fb;return[i,s,function(){window.scrollTo(0,0),i.name.length<=0?c(t("error.nonombre")):i.description.length<=0?c(t("error.nodescripcion")):i.scale.length<=0?c(t("error.noescala")):i.locationMapUrl.length<=0?c(t("error.nolocalizacion")):i.gpx.data.length<=0?c(t("error.noruta")):(c(""),u.setRoute(i,e=>{},()=>{}),n())},function(e){let n=e.target.selectedIndex+1;o(new a.Z(i.name,i.description,i.isPublic,i.locationMapUrl,i.gpx,i.point,i.quadrant,i.uids,i.scale,n,i.likes,i.youtubeVideo,i.rid))},function(e,n){let t="checkbox"===n.target.type?n.target.checked:n.target.value,r=new a.Z(i.name,i.description,i.isPublic,i.locationMapUrl,i.gpx,i.point,i.quadrant,i.uids,i.scale,i.dificulty,i.likes,i.youtubeVideo,i.rid);r[e]=t,o(r)},function(e,n){let t={lat:Math.trunc(n.lat/36),lon:Math.trunc(n.lon/72)};o(i=>new a.Z(i.name,i.description,i.isPublic,i.locationMapUrl,{gid:i.gpx.gid,data:e||""},n||{lat:0,lon:0},t,i.uids,i.scale,i.dificulty,i.likes,i.youtubeVideo,i.rid))}]},u=t(56645);t(65743);var d=function(e){let{inRoute:n,onRouteCreated:t,onBackClick:r}=e,[o,a,d,f,p,m]=c(n,t),{t:h}=(0,l.$G)(["main"]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"headerText bold sectionTitle",children:h("description.seccionderutas")}),(0,i.jsxs)("div",{className:"routesManagement routesManagementCreation rounded rounded2",children:[(0,i.jsx)(s.Z,{message:a}),(0,i.jsxs)("div",{className:"routeName center",children:[h("description.nombrederuta")," ",(0,i.jsx)("input",{name:"name",value:o.name,onChange:e=>{p("name",e)}})]}),(0,i.jsxs)("div",{className:"routeMap center",children:[h("description.mapaderuta"),(0,i.jsx)(u.X,{gpx:o.gpx,onFileResolved:m})]}),(0,i.jsxs)("div",{className:"routeDescription center",children:[h("description.descripcion")," ",(0,i.jsx)("textarea",{name:"description",value:o.description,onChange:e=>{p("description",e)}})]}),(0,i.jsxs)("div",{className:"routeIsPublic center",children:[h("description.publico")," ",(0,i.jsx)("input",{type:"checkbox",defaultChecked:o.isPublic,name:"isPublic",onChange:e=>{p("isPublic",e)}})]}),(0,i.jsxs)("div",{className:"routeScale center",children:[h("description.escala")," ",(0,i.jsx)("input",{name:"scale",value:o.scale,onChange:e=>{p("scale",e)}})]}),(0,i.jsxs)("div",{className:"routeDifficulty center",children:[h("description.dificultad")," ",(0,i.jsxs)("select",{onChange:f,value:o.dificulty,children:[(0,i.jsx)("option",{value:"1",children:"1"}),(0,i.jsx)("option",{value:"2",children:"2"}),(0,i.jsx)("option",{value:"3",children:"3"}),(0,i.jsx)("option",{value:"4",children:"4"}),(0,i.jsx)("option",{value:"5",children:"5"})]})]}),(0,i.jsxs)("div",{className:"youtubeVideo center",children:[h("description.video"),(0,i.jsx)("input",{name:"youtubeVideo",value:o.youtubeVideo,onChange:e=>{p("youtubeVideo",e)}})]}),(0,i.jsxs)("div",{className:"routePoint center",children:[h("description.puntoencuentro"),(0,i.jsx)("input",{name:"locationMapUrl",value:o.locationMapUrl,onChange:e=>{p("locationMapUrl",e)}})]}),(0,i.jsxs)("div",{className:"endButtons",children:[(0,i.jsx)("button",{className:"importantNote",onClick:d,children:h(o.rid?"description.modificar":"description.crear")}),(0,i.jsx)("button",{onClick:r,children:h("description.atras")})]})]})]})},f=t(76968),p=function(){let[e,n]=r.useState(0),[t,i]=r.useState(new a.Z("","",!0,"",{data:""},{lat:0,lon:0},{lat:0,lon:0},[""],"",0,0));return r.useEffect(()=>(f.Z.pageview("/routesmanagement/"),window.document.body.classList.add("route"),()=>{window.document.body.classList.remove("route")}),[]),[e,t,function(e){i(e),n(2)},function(e){e?i(e):i(new a.Z("","",!0,"",{data:""},{lat:0,lon:0},{lat:0,lon:0},[window.crawlear.user.uid],"",0,0)),n(1)},function(e){n(0)},function(e){n(1)}]};let m=(0,t(57818).default)(()=>Promise.all([t.e(4938),t.e(1277),t.e(2875),t.e(3402),t.e(6900)]).then(t.bind(t,96900)),{loadableGenerated:{webpack:()=>[96900]},loading:()=>(0,i.jsx)("p",{children:"Loading Routes Management..."}),ssr:!1});var h=function(){let[e,n,t,r,s,a]=p();return(0,i.jsx)(i.Fragment,{children:0===e?(0,i.jsx)(m,{onCreateRoute:r,onViewRoute:t}):1===e?(0,i.jsx)(d,{inRoute:n,onRouteCreated:s,onBackClick:s}):(0,i.jsx)(o.Z,{route:n,onBackClick:s,onEditClick:a})})}},22637:function(){},64767:function(){},65743:function(){},58865:function(){},38033:function(){},8188:function(){},35019:function(){}},function(e){e.O(0,[7007,6334,935,2733,5559,5315,4358,7481,4212,9494,362,9144,5615,6027,6645,6319,2971,7023,1744],function(){return e(e.s=71729)}),_N_E=e.O()}]);