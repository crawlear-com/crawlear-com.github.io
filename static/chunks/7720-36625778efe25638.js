(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7720],{60818:function(e,t,s){var n={"./en/landing.json":[86033,6033],"./en/main.json":[84899,4899],"./es/landing.json":[99245,9245],"./es/main.json":[24084,4084]};function a(e){if(!s.o(n,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],a=t[0];return s.e(t[1]).then(function(){return s.t(a,19)})}a.keys=function(){return Object.keys(n)},a.id=60818,e.exports=a},38566:function(e,t,s){"use strict";s.d(t,{$:function(){return l}});var n=s(46027),a=s(64312),i=s(42386);let r=["es","en"],o="landing",c=async(e,t)=>{let c=(0,n.Fs)();return await c.use(i.D).use((0,a.Z)((e,t)=>s(60818)(`./${e}/${t}.json`))).init(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"es",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return{supportedLngs:r,fallbackLng:"es",lng:e,fallbackNS:o,defaultNS:o,ns:t}}(e,t)),c};async function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=await c(e,t);return{t:n.getFixedT(e,Array.isArray(t)?t[0]:t,s.keyPrefix),i18n:n}}},48641:function(e,t,s){"use strict";var n=s(57437);s(2265),s(97421),t.Z=function(e){let{controlTextValues:t,texts:s}=e,a=0,i=[];return t&&t.forEach(e=>{0!==e&&i.push((0,n.jsxs)("div",{className:"controlTextValues",children:[s[a],": ",e]},a)),a++}),i}},66709:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var n=s(57437);s(2265);var a=function(e){let{location:t}=e;return(0,n.jsx)("div",{className:"mapouter",children:(0,n.jsxs)("div",{className:"gmap_canvas",children:[(0,n.jsx)("iframe",{"data-testid":"gmap_canvas",title:"googleMapsLocation",id:"gmap_canvas",src:`https://maps.google.com/maps?q=${t.latitude},${t.longitude}&t=&z=13&ie=UTF8&iwloc=&output=embed`,frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0"}),(0,n.jsx)("style",{children:".mapouter{position:relative;text-align:right;}"}),(0,n.jsx)("style",{children:".gmap_canvas {overflow:hidden;background:none!important;}"})]})})},i=s(76142),r=s(52759),o=s(38566);s(51217);var c=async function(e){let{game:t}=e,{t:s}=await (0,o.$)("es","main");return(0,n.jsxs)("div",{className:"gameHeaderInfo rounded",children:[(0,n.jsxs)("div",{className:"gameGameType",children:[s("gametype.modojuego"),": ",(0,n.jsx)("span",{className:"bold",children:s(r.zo.resolveGameTypeName(t.gameType))})]}),(0,n.jsxs)("div",{className:"gamePointsType",children:[s("description.zonas"),": ",(0,n.jsx)("span",{className:"bold",children:t.zones})]}),(0,n.jsx)("div",{className:"gameIsPublic",children:(0,n.jsx)("span",{className:"bold",children:t.isPublic?s("description.esPublica"):""})}),t.location&&t.location.longitude&&t.location.longitude?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"gameName",children:[s("description.localizacion")," :"]}),(0,n.jsx)(a,{location:t.location})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("div",{className:"gamePointsType",children:t.maxPoints>0?`${s("description.puntosmaximo")}: ${t.maxPoints}`:""}),(0,n.jsx)("div",{className:"gamePointsType",children:t.maxTime>0?`${s("description.tiempomaximo")}: ${i.Z.printTime(i.Z.millisToTime(t.maxTime))}`:""})]})}},97914:function(e,t,s){"use strict";var n=s(57437),a=s(50362);s(2265);var i=s(48641),r=s(76142),o=s(24025),c=s(1219),l=s(5163),d=s(65780),m=s(31959),u=s(18492),g=s(52759);t.Z=function(e){let{gameType:t,gameProgression:s}=e,{t:p}=(0,a.$G)(["main"]);if(s.data){let e=s.data.points,a=s.data.totalPoints,x=s.data.time,h=s.data.gatesWithFail,j=s.data.gateProgression,f=s.data.simpathyPoints,T=s.data.handicap,v=s.data.gatesWithBonification,b=r.Z.tokenToTexts(p,o.zR.texts),y=r.Z.tokenToTexts(p,o.zR.fiascoTexts);return t===g.UZ&&(b=r.Z.tokenToTexts(p,d.nz.texts),y=r.Z.tokenToTexts(p,d.nz.fiascoTexts)),t===g.HF&&(b=r.Z.tokenToTexts(p,l.$z.texts),y=r.Z.tokenToTexts(p,l.$z.fiascoTexts)),t===g.uG&&(b=r.Z.tokenToTexts(p,c.UC.texts),y=r.Z.tokenToTexts(p,c.UC.fiascoTexts)),t===g.Jo&&(b=r.Z.tokenToTexts(p,m.Kp.texts),y=r.Z.tokenToTexts(p,m.Kp.fiascoTexts)),t===g.Oh&&(b=r.Z.tokenToTexts(p,u.GQ.texts),y=r.Z.tokenToTexts(p,u.GQ.fiascoTexts)),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[p("description.puntos"),": ",(0,n.jsx)("span",{className:"bold",children:e})]}),j?(0,n.jsxs)("li",{children:[p("description.avancepuerta"),": ",(0,n.jsx)("span",{className:"bold",children:j})]}):(0,n.jsx)(n.Fragment,{}),void 0!==h&&void 0!==v?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("li",{children:[p("description.fallospuerta"),": ",(0,n.jsx)("span",{className:"bold",children:h})]}),(0,n.jsxs)("li",{children:[p("description.bonificacion"),": ",(0,n.jsx)("span",{className:"bold",children:-2*v})]})]}):(0,n.jsx)(n.Fragment,{}),void 0!==f?(0,n.jsxs)("li",{children:[p("description.portiempo"),": ",(0,n.jsx)("span",{className:"bold",children:f})]}):(0,n.jsx)(n.Fragment,{}),void 0!==T?(0,n.jsxs)("li",{children:[p("description.handicap"),": ",(0,n.jsx)("span",{className:"bold",children:T})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsxs)("li",{children:[p("description.total"),": ",(0,n.jsx)("span",{className:"bold",children:a})]}),(0,n.jsxs)("li",{children:[p("description.tiempo"),": ",(0,n.jsx)("span",{className:"bold",children:r.Z.printTime(r.Z.millisToTime(x))})]})]}),(0,n.jsx)(i.Z,{controlTextValues:s.data.gateProgressionData?g.zo.sumControlTextValues(s.data.gateProgressionData):s.data.controlTextValues,texts:b}),s.data.fiascoControlTextValues&&s.data.fiascoControlTextValues.filter(e=>e>0).length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"fiascosText left bold",children:[p("points.fiascos"),":"]}),(0,n.jsx)(i.Z,{controlTextValues:s.data.fiascoControlTextValues,texts:y})]}):(0,n.jsx)(n.Fragment,{})]})}return(0,n.jsx)(n.Fragment,{})}},69945:function(e,t,s){"use strict";s.d(t,{Z:function(){return N}});var n=s(57437);s(2265);var a=s(38566),i=s(76142),r=s(48641),o=s(65780),c=s(24025),l=s(1219),d=s(5163),m=s(31959),u=s(18492),g=s(52759),p=s(56257),x={src:"/_next/static/media/iconWinner.ab3194f6.png",height:19,width:19,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAvUlEQVR42l2NywqCUBCGR4sIgi67HqBVq9a5aBk+QdTWJ3DfOno/RV2c40kRFFEUb6CrfoNT0Ac/wwwz31DTNCqBsix3bdse67o+CSE+syzLFBpJkmTbdZ05DMO97/tHVVU653xOElzrMBkEUGdYeIZhuCFJmqZanuc3AkVRrKE2GWM/g+/7C7w5x3FsjImi6GBb1lTqFQIvIS7Q6sgV2RMIgkD9GnzOdc91l5wxjSEEMFPoH9txJp7nrWT/BtDNef5t3HscAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},h={src:"/_next/static/media/iconBattery.be8f0f3d.png",height:20,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAzUlEQVR42oVPsQqCUBR9GW8PGtxb+oKKhmhu6ouiL3BqbCki+wIXDZyfhDmkIojo0HsqKqLgpq/r0lgH7nAP555zD+pRVZXQti0OwxAbhoEty8KmaeK6rgeIcy6gfyjLctF13S1N06Pv+2dwOgVBcAF+glzXnRZF8W6ahlNK72C9dxxHAv4AESsE6jVjjMdxzJMkkUA8z7JsA7OFfYl62La9i6KIG4R4iqI8NE17qqr68jxv9v2DEDKCiHGe5yJci5Qx8SrLQ6Tr+uBXgQ8Lc4cbeab7lwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},j=s(46865);async function f(e){let{game:t,isDraw:s}=e,{t:f}=await (0,a.$)("es","main"),T=[],v=i.Z.tokenToTexts(f,c.zR.texts),b=0,y=0;switch(t.gameType){case g.UZ:v=i.Z.tokenToTexts(f,o.nz.texts);break;case g.HF:v=i.Z.tokenToTexts(f,d.$z.texts);break;case g.uG:v=i.Z.tokenToTexts(f,l.UC.texts);break;case g.Jo:v=i.Z.tokenToTexts(f,m.Kp.texts);break;case g.Oh:v=i.Z.tokenToTexts(f,u.GQ.texts);break;default:v=i.Z.tokenToTexts(f,c.zR.texts)}function P(e){let t=e.target;(t="IMG"===t.tagName?t.parentElement:t).parentElement.nextElementSibling.classList.toggle("closed")}return T.push((0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{}),(0,n.jsx)("td",{className:""}),(0,n.jsx)("td",{children:f("description.puntos")}),(0,n.jsx)("td",{children:f("description.puertas")}),(0,n.jsx)("td",{children:f("description.bonificacion")}),(0,n.jsxs)("td",{children:[f("description.puntos")," ",f("description.portiempo")]}),(0,n.jsx)("td",{})]},`game${new Date().getMilliseconds()}`)),t.players.forEach(e=>{T.push((0,n.jsxs)("tr",{children:[s?(0,n.jsx)("td",{}):(0,n.jsx)("td",{className:"bold gameListPosition",children:0===b?(0,n.jsx)("img",{src:x,alt:"winner"}):b+1}),1===t.gameType?(0,n.jsx)("td",{className:"bold gameListPlayerName gameListPoints bold textOverflow",children:e.name}):(0,n.jsx)("td",{className:"bold gameListPlayerName gameListPoints bold withTime textOverflow",children:e.name}),(0,n.jsx)("td",{className:"bold gameListPoints",children:e.totalPoints}),(0,n.jsx)("td",{className:"gameListPoints",children:"."}),(0,n.jsx)("td",{className:"gameListPoints",children:"."}),(0,n.jsx)("td",{className:"gameListPoints",children:"."}),1!==t.gameType?(0,n.jsx)("td",{className:"bold gameListPoints gameListTime",children:e.totalTime?i.Z.printTime(i.Z.millisToTime(e.totalTime)):(0,n.jsx)(n.Fragment,{children:"00:00:000"})}):(0,n.jsx)(n.Fragment,{})]},`header${y+b}`)),e.zones.forEach(s=>{let a;a=s.fiascoControlTextValues?s.fiascoControlTextValues[4]?(0,n.jsx)("img",{src:h,alt:"battery"}):t.maxTime&&s.time===t.maxTime+t.courtesyTime||t.maxPoints&&s.totalPoints===t.maxPoints||s.fiascoControlTextValues.filter(e=>e>0).length>0?(0,n.jsx)("img",{src:p.Z,alt:"fiasco"}):(0,n.jsx)(n.Fragment,{}):s.battery?(0,n.jsx)("img",{src:h,alt:"fiasco"}):t.maxTime&&s.time===t.maxTime+t.courtesyTime||t.maxPoints&&s.totalPoints===t.maxPoints?(0,n.jsx)("img",{src:p.Z,alt:"battery"}):(0,n.jsx)(n.Fragment,{}),T.push((0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:a}),(0,n.jsxs)("td",{onClick:P,children:[`${f("description.zona")} ${y%e.zones.length+1}`,(0,n.jsx)("img",{className:"iconArrowDown",src:j.Z,alt:"click open"})]}),(0,n.jsx)("td",{className:"gameListPoints",children:s.totalPoints}),(0,n.jsx)("td",{className:"gameListPoints",children:s.gateProgression}),(0,n.jsx)("td",{className:"gameListPoints",children:s.gatesWithBonification?-2*s.gatesWithBonification:"0"}),(0,n.jsx)("td",{className:"gameListPoints",children:s.simpathyPoints?s.simpathyPoints:"0"}),1!==t.gameType?(0,n.jsx)("td",{className:"gameListTime",children:i.Z.printTime(i.Z.millisToTime(s.time))}):(0,n.jsx)(n.Fragment,{})]},`row0${y+b+1}`)),T.push((0,n.jsx)("tr",{className:"closed",children:(0,n.jsxs)("td",{colSpan:7,children:[0!==s.handicap?(0,n.jsxs)("div",{className:"controlTextValues",children:[f("description.bonificacionaccesorios"),": ",s.handicap]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(r.Z,{controlTextValues:g.zo.sumControlTextValues(s.gateProgressionData),texts:v}),s.fiascoControlTextValues&&s.fiascoControlTextValues.filter(e=>e>0).length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"left bold",children:[f("points.fiascos"),":"]}),(0,n.jsx)(r.Z,{controlTextValues:s.fiascoControlTextValues,texts:i.Z.tokenToTexts(f,o.nz.fiascoTexts)})]}):(0,n.jsx)(n.Fragment,{})]})},`row1${y+b+2}`)),y++}),b++}),(0,n.jsx)("div",{"data-testid":"gameParticipants",className:"gameParticipants",children:(0,n.jsx)("table",{children:(0,n.jsx)("tbody",{children:T})})})}var T=s(66709),v=s(12353),b=s(2635);async function y(e){let{game:t}=e,{t:s}=await (0,a.$)("es","main");return P(t)?(0,n.jsx)("div",{className:"",children:s("description.empate")}):(0,n.jsxs)(n.Fragment,{children:[s("description.ganador"),": ",(0,n.jsx)("b",{children:t.players[0].name})]})}function P(e){return e.players.length>1&&e.players[0].totalPoints===e.players[1].totalPoints&&e.players[0].totalTime===e.players[1].totalTime&&(!e.players[0].totalGateProgression||e.players[0].totalGateProgression===e.players[1].totalGateProgression)}s(32495);var N=async function(e){let{game:t}=e,{t:s}=await (0,a.$)("es","main");return t.players?(0,n.jsxs)("div",{className:"gameContainer",children:[(0,n.jsx)("div",{className:"winnerBox importantNote rounded",children:(0,n.jsx)(y,{game:t})}),(0,n.jsxs)("div",{className:"gameList rounded rounded2",children:[(0,n.jsx)(T.Z,{game:t}),(0,n.jsx)(f,{game:t,isDraw:P(t)}),t.isPublic&&(0,n.jsx)(v.Z,{url:`gameviewer?gid=${t.gid}`,text:`${s("description.resolverjuego")} ${t.name}`,headerText:s("description.compartir")})]})]}):(0,n.jsx)(b.Z,{className:"centerText"})}},67720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return X}});var n=s(57437),a=s(2265),i=s(50362),r=s(83492),o=s(52759),c=function(e){let{game:t,playerName:s,fromName:r,zone:c}=e,{t:l}=(0,i.$G)(["main"]),d=window.crawlear.fb,m=[],u=t.gid,g=[],[p,x]=a.useState({});function h(e,t){if("pending"===e.status){let s={...p};s[t]=e,x(s)}else if("accepted"===e.status){let e={...p};delete e[t],x(e)}}return u&&s&&r&&c>=0&&!o.zo.isCurrentUserIsOwner(t.owner)&&0===Object.entries(p).length&&m.push((0,n.jsx)("button",{onClick:function(){window.confirm(l("content.quieresenviarpeticiondepresencia"))&&d.setDirectorPresenceRequest(u,c,s,r,h)},children:l("description.reclamarpresencia")})),Object.keys(p).forEach((e,t)=>{g.push((0,n.jsx)("div",{children:p[e].status}))}),(0,n.jsxs)("div",{className:"presenceButtonContainer",children:[m,g]})},l=s(76968),d=s(76142),m=(e,t,s)=>{e.addEventListener(t,s)},u=(e,t,s)=>{e.dispatchEvent(new CustomEvent(t,{detail:s}))};class g{constructor(){this.container=document.querySelector(".AppMainContainer")}listenMessages(e,t){m(this.container,e,t)}sendMessage(e,t){u(this.container,e,t)}}let p="BT_GATES",x="BT_POINTS",h="BT_START",j="BT_STOP",f="BT_TIME";class T{constructor(){this.device={},this.timeCharacteristic={},this.timeValueCharacteristic={},this.pointsCharacteristic={},this.gatesCharacteristic={}}discoverDevice(e){navigator.bluetooth.requestDevice({filters:[{name:"CrawlearBluetoothDevice"},{services:["3feb1e8a-3981-4045-ad39-b225135013a0"]}]}).then(t=>(this.device=t,e&&e(t),t.gatt&&t.gatt.connect())).then(e=>e&&e.getPrimaryService("3feb1e8a-3981-4045-ad39-b225135013a0")).then(e=>{let t=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8");return Promise.all([t,e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b1"),e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b2"),e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b3")])}).then(e=>{let[t,s,n,a]=e;this.timeCharacteristic=t,this.timeValueCharacteristic=s,this.pointsCharacteristic=n,this.gatesCharacteristic=a}).catch(e=>{console.error(e)})}sendTime(e){this.timeValueCharacteristic&&this.timeValueCharacteristic.writeValue(new TextEncoder().encode(e))}sendPoints(e){this.pointsCharacteristic&&this.pointsCharacteristic.writeValue(new TextEncoder().encode(e))}sendGates(e){this.gatesCharacteristic&&this.gatesCharacteristic.writeValue(new TextEncoder().encode(e))}sendStart(){if(this.timeCharacteristic){let e=Uint8Array.of(1);this.timeCharacteristic.writeValue(e)}}sendStop(){if(this.timeCharacteristic){let e=Uint8Array.of(0);this.timeCharacteristic.writeValue(e)}}}s(79309);let v="play",b="pause",y="stop";var P=function(e){let{startTime:t,forceAction:s,label:r,onTimerChange:o,courtesyTime:c,maxTime:m,onPointBecauseLastMinute:u,onTimeFiasco:p}=e,{t:x}=(0,i.$G)(["main"]),T=a.useRef(null),P=a.useRef(t||0),N=new g,[C,A]=a.useState(()=>({millis:t||0,timer:null,maxTime:m,state:b,timeStart:Date.now()})),w=d.Z.millisToTime(C.millis);function G(){P.current=0,C.timer&&clearInterval(C.timer),T.current.classList.remove("blink"),A({maxTime:C.maxTime,millis:0,timer:null,state:y}),o&&o(P.current),T.current.classList.contains("play")&&T.current.classList.toggle("play")}function z(){T.current.classList.toggle("play"),C.state===b||C.state===y?(C.state=v,l.Z.event("play","timePlay",""),T.current.classList.remove("blink")):(C.state=b,l.Z.event("play","timePause","")),A(e=>({...e,state:C.state}))}return a.useEffect(()=>{s===y&&G(),s===b&&C.state===v&&z()},[s]),a.useEffect(()=>{let e={...C};e.state===v?(e.timer&&clearInterval(e.timer),e.millis=P.current,e.timer=setInterval(()=>{P.current<e.maxTime?(P.current=Date.now()-e.timeStart+e.millis,o&&o(P.current),A(e=>({...e,millis:P.current})),Date.now()%2==0&&N.sendMessage(f,d.Z.printTime(d.Z.millisToTime(P.current)))):u&&e.maxTime>0&&P.current>=e.maxTime&&P.current<e.maxTime+c||0===e.maxTime?(P.current=Date.now()-e.timeStart,o&&o(P.current),A(e=>({...e,millis:P.current})),e.maxTime>0&&!T.current.classList.contains("blink")&&T.current.classList.add("blink"),e.maxTime>0&&(e.maxTime+P.current)%1e4==0&&u()):(T.current.classList.toggle("blink"),T.current.classList.toggle("foreColorRed"),z(),p&&p())},10),e.timeStart=Date.now(),N.sendMessage(h,{}),A(t=>({...t,...e}))):e.state===b?(e.timer&&clearInterval(C.timer),e.timer=null,N.sendMessage(j,{}),A(t=>({...t,...e}))):(e.millis=0,P.current=0,e.timer&&clearInterval(C.timer),e.timer=null,N.sendMessage(j,{}),A(t=>({...t,...e}))),N.sendMessage(f,d.Z.printTime(d.Z.millisToTime(P.current)))},[C.state]),(0,n.jsxs)("div",{ref:T,className:"timerContainer",children:[(0,n.jsxs)("div",{className:"timerLabel",children:[(r||x("description.tiempo")).toUpperCase(),":"]}),(0,n.jsx)("div",{role:"timer",className:"timer",children:d.Z.printTime(w)}),(0,n.jsx)("button",{className:"timerPlayButton",onClick:z}),(0,n.jsx)("button",{onClick:G,className:"resetButton"})]})};s(8450);var N=function(e){let{onTimeFiasco:t,onRepairTimerChange:s}=e,{t:a}=(0,i.$G)(["main"]);return(0,n.jsx)("div",{className:"repairTimeContainer",children:(0,n.jsx)(P,{courtesyTime:0,label:a("points.reparacion"),onTimeFiasco:t,onTimerChange:s,maxTime:18e5})})};s(61025);var C=function(e){let{gameProgression:t,game:s,onRepairEnd:a}=e,{t:r}=(0,i.$G)(["main"]),o=[];return t&&Object.entries(t).forEach((e,t)=>{Object.entries(e[1]).forEach((i,c)=>{Object.entries(i[1]).forEach((c,l)=>{if("repair"===c[1].status){let d=new Date(c[1].repairData.setTime).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});o.push((0,n.jsxs)("div",{className:"repairProgressionItem rounded rounded2",children:[(0,n.jsxs)("div",{className:"repairProgressionItemHead",children:[(0,n.jsx)("img",{src:s.players[i[0]].avatar,alt:"player avatar"}),(0,n.jsxs)("span",{className:"repairProgressionItemZone",children:[r("description.zona"),": ",l+1]}),(0,n.jsxs)("span",{className:"gameProgressionItemHour",children:[r("description.enreparaciondesde")," ",d]})]}),(0,n.jsx)(N,{}),(0,n.jsx)("button",{onClick:()=>{var t,n,o,d;t=s.gid,n=s.players[[i[0]]].id,o=e[0],d=c[1],window.confirm(r("content.finalizarreparacion"))&&a&&a(t,n,o,l,d)},className:"importantNote",children:r("description.fin")})]},l+t))}})})}),(0,n.jsx)("div",{className:"repairProgressionContainer",children:o.length?o:r("description.nohayreparaciones")})};s(22242);var A=function(e){let{game:t,gameProgression:s}=e,{t:r}=(0,i.$G)(["main"]),o=window.crawlear.fb,c=a.useRef(),[l,d]=a.useState({}),m=[];function u(e,t){if("pending"===t.status){let s={};s[e]=t,c.current={...c.current,...s},d(c.current)}}function g(e,t){if("pending"===t.status){let s={};s[e]=t,c.current={...c.current,...s},d(c.current)}}m.push((0,n.jsx)("div",{className:"",children:r("content.zonascompletadas")},"zC")),a.useEffect(()=>{o.getDirectorPresenceRequest(t.gid,u,g)},[]);for(let e=0;e<t.zones;e++){let t=[];Object.entries(s).forEach((s,a)=>{let i=0;Object.entries(s[1]).forEach((t,s)=>{t[1]&&t[1][e]&&"done"===t[1][e].status&&t[1][e].data&&i++}),i===Object.entries(s[1]).length&&t.push((0,n.jsxs)("span",{className:"directorGroup",children:[r("description.grupo")," ",a+1]},`dG${e}`))}),m.push((0,n.jsxs)("div",{className:"directorZone horizontalScrolling",children:[r("description.zona")," ",e+1,": ",t]},`dZ${e}`))}return m.push((0,n.jsxs)("p",{className:"bold",children:[r("description.peticionesdepresencia"),":"]},"pdp")),c.current||m.push((0,n.jsx)("p",{className:"",children:r("description.nopeticionespresencia")},"npsp")),c.current&&Object.keys(c.current).forEach((e,s)=>{let a=c.current[e];m.push((0,n.jsxs)("div",{className:"directorRequestContainer blink",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[r("description.de")," ",a.fromName]}),(0,n.jsxs)("div",{children:[r("description.zona"),": ",a.zone+1]}),(0,n.jsxs)("div",{children:[r("description.jugador"),": ",a.playerName]}),(0,n.jsxs)("div",{children:[r("description.estado"),": ",a.status]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:()=>{!function(e){if(window.confirm(r("content.aceptarpresencia"))){let s={...c.current};delete s[e],d(s),c.current=s,o.acceptDirectorPresenceRequest(t.gid,e)}}(e)},children:r("description.aceptar")})})]},`dR${s}`))}),(0,n.jsx)(n.Fragment,{children:[m]})},w=s(97914);let G=a.createContext(),z="waiting",Z="playing",k="done";var E=function(e){let{game:t,jidGroup:s,onZoneClick:r}=e,{t:c}=(0,i.$G)(["main"]),[l,d]=a.useState(-1),[m,u]=a.useState(-1),g=a.useRef(),[p]=a.useContext(G),x=[],h=0;function j(){r(-1,-1),u(-1),d(-1)}return x.push((0,n.jsx)("div",{className:"",children:c("content.estadozona")},"eZ")),x.push((0,n.jsx)("div",{children:function(){let e=Array(t.zones).fill(!1);return p&&Object.entries(p).forEach((t,s)=>{Object.entries(t[1]).forEach((t,s)=>{Object.entries(t[1]).forEach((t,s)=>{"playing"===t[1].status&&(e[s]||(e[s]=!0))})})}),function(e){let t=[];return e.forEach((e,s)=>{let a=[];a.push((0,n.jsxs)("span",{children:[c("description.zona")," ",s+1,": "]},s)),e?a.push((0,n.jsx)("span",{className:"directorGroup colorRed",children:c("description.ocupado")},`dG${s}`)):a.push((0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"directorGroup",children:c("description.libre")}),(0,n.jsx)("br",{})]},`div${s}`)),t.push((0,n.jsx)("div",{className:"directorZone",children:a},`dZ${s}`))}),(0,n.jsx)("div",{className:"",children:t})}(e)}()},"nAz")),x.push((0,n.jsxs)("p",{children:[c("content.seleccionapilotoyzona"),":"]},"header")),t.players.forEach((e,a)=>{let i=[],f=0,T;(e.group===s||o.zo.isCurrentUserIsOwner(t.owner))&&(e.zones.forEach(t=>{T=e.id===m&&f===l?"colorGrey rounded":"rounded",p&&p[e.group]&&p[e.group][e.id]&&(p[e.group][e.id][f].status!==z?p[e.group][e.id][f].status===Z?T+=" colorOrange":"repair"===p[e.group][e.id][f].status?T+=" colorRed":p[e.group][e.id][f].status===k&&(T+=" colorGreen"):p[e.group][e.id][f].data&&(T+=" colorClearGrey"),i.push((0,n.jsxs)("span",{"data-zone":f,onClick:s=>{!function(e,t){let s=Number(e.target.closest("[data-zone]").getAttribute("data-zone")),n=p[t.group][t.id][s].status;l===s&&m===t.id?j():n===z||n===k||n===Z?(u(t.id),d(s),r(t,s)):j()}(s,e,t)},className:T,children:[(0,n.jsxs)("div",{children:[c("description.zona")," ",f+1]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:[c("description.estado"),":"]}),(0,n.jsx)("div",{children:function(e,t,s){let n;switch(t){case"waiting":n=e(s?"description.reparacionfinalizada":"description.waiting");break;case"done":n=e("description.done");break;case"repair":n=e("description.repair");break;case"playing":n=e("description.playing");break;default:n=e("description.waiting")}return n}(c,p[e.group][e.id][f].status,p[e.group][e.id][f].data)})]},f+1))),f++}),x.push((0,n.jsxs)("div",{className:"gameProgressionItem rounded rounded1",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{src:e.avatar,alt:"player avatar"}),e.name," ",(0,n.jsx)("br",{}),c("description.grupo")," ",e.group+1]}),(0,n.jsx)("div",{className:"horizontalScrollContainer",children:i})]},h+f)),m>=0&&l>=0&&e.id===m&&p[e.group][m][l].data&&x.push((0,n.jsx)("div",{className:"gameProgressionInfoItem smallText rounded rounded2",children:(0,n.jsx)(w.Z,{gameType:t.gameType,innerRef:g,gameProgression:p[e.group][m][l]})},`${h+f}Info`)),h++)}),(0,n.jsx)(n.Fragment,{children:x})},F=s(11517),V=function(e){let[t,s]=a.useState(null),[n,o]=a.useState(-1),[c,l]=a.useState(""),[d]=a.useContext(G),{t:m}=(0,i.$G)(["main"]);return[t,n,c,d,function(e,t){o(t),s(e),l("")},function(){if(t&&-1!==n){let s=t.id,a=d[t.group][s][n];a.status===r.i3&&window.confirm(m("content.quieresempezarzona"))||a.status===r.gr&&window.confirm(m("content.quiereseditarpartida"))||a.status===r.rN&&window.confirm(m("content.seguroeditarpartidaenjuego"))?(l(""),e(t,n)):a.status===r.rN?l(m("error.juegoencurso")):a.status===r.S4&&l(m("error.reparacionencurso"))}}]},S=function(e){let t,{game:s,jidGroup:a,onBeginGame:l,onBackButtonClick:d,onCloseButonClick:m}=e,u=[],g=o.zo.isCurrentUserIsOwner(s.owner),{t:p}=(0,i.$G)(["main"]),[x,h,j,f,T,v]=V(l);if(g&&u.push((0,n.jsxs)("div",{className:"directorContainer rounded rounded3",children:[(0,n.jsx)("div",{className:"bold",children:p("description.directordepartida")}),(0,n.jsx)("br",{}),(0,n.jsx)(A,{game:s,gameProgression:f})]},"dP")),s.jids.find(e=>e===window.crawlear.user.uid)){let e=(0,n.jsx)(n.Fragment,{});(x&&x.group===a||g)&&(e=(0,n.jsx)("button",{onClick:v,className:"playButton importantNote",children:p("description.empezar")})),t=(0,n.jsxs)(n.Fragment,{children:[p("description.jugadorseleccionado"),": ",x?x.name:""," ",(0,n.jsx)("br",{}),p("description.zonaseleccionada"),": ",-1!==h?h+1:"",(0,n.jsx)("br",{}),e,(0,n.jsx)(c,{game:s,zone:h,playerName:x&&x.name,fromName:window.crawlear.user.displayName})]})}return(0,n.jsxs)(n.Fragment,{children:[u,(0,n.jsx)(F.Z,{message:j}),(0,n.jsxs)("div",{className:"trackJudgeContainer rounded rounded3",children:[(0,n.jsx)("div",{className:"bold",children:p("description.juezdepista")}),(0,n.jsx)(E,{onZoneClick:T,game:s,jidGroup:a}),(0,n.jsx)(F.Z,{message:j}),t]}),(0,n.jsxs)("div",{className:"tendJudgeContainer rounded rounded3",children:[(0,n.jsx)("div",{className:"bold",children:p("description.juezdecarpa")}),(0,n.jsx)(C,{gameProgression:f,game:s,onRepairEnd:r.ZP.onRepairEnd})]}),(0,n.jsx)("button",{className:"backButton",onClick:d,children:p("description.atras")}),o.zo.isCurrentUserIsOwner(s.owner)&&r.ZP.isGroupGameFinished(s,f,a)?(0,n.jsx)("button",{className:"closeButton importantNote",onClick:()=>{m(s)},children:p("description.cerrarpartida")}):(0,n.jsx)(n.Fragment,{})]})},D=s(20596),L=s(11218),B=s(12709),I=function(e){let{onGameEnd:t}=e,{t:s}=(0,i.$G)(["main"]),{game:n}=a.useContext(B.G),[r,c]=a.useState(()=>(L.wG.texts=L.wG.texts.map(function(e){return s(e)}),function(e){let t={game:e,order:[...e.players]};o.zo.init(t.game,o.zo.getGameTypeControlTextValuesInit(t.game.gameType),o.zo.getGameTypeFiascoControlTextValuesInit(t.game.gameType),!1);for(let e=0;e<t.game.players.length;e++)t.game.players[e].zones[0].gateProgressionData[0].controlTextValues=Array(L.wG.steps.length).fill(0);return t}(n)));return a.useEffect(()=>{l.Z.pageview("/kinggame/")},[]),[r,function(e,t,s){let n={...r},a=n.game.players,i=a[s].zones[0],o=i.gateProgressionData[0];o.controlTextValues=[...o.controlTextValues],o.controlTextValues[t]+=e,i.totalPoints+=e,i.points+=e,n.order=function(e,t){let s=[...t];return s.push(s.splice(e,1)[0]),s}(n.order.findIndex(e=>e.id===a[s].id),n.order),c(n)},function(){t&&t(n)}]};s(68102);var R=function(e){let{onGameEnd:t}=e,{t:s}=(0,i.$G)(["main"]),a=[],[r,c,l]=I({onGameEnd:t}),d=r.game;a.push((0,n.jsx)(P,{courtesyTime:0,startTime:0,label:s("description.tiempo"),maxTime:d.maxTime},"tmC")),a.push((0,n.jsxs)("div",{children:[s("description.ordenruta"),":"]},0));for(let e=0;e<d.players.length;e++){let t="";o.zo.isPointsFiasco(d,r.order[e].zones[0])&&(t="blink foreColorRed"),a.push((0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:`controlTextContainerQueue rounded bold ${t}`,children:[r.order[e].name,": ",r.order[e].zones[0].totalPoints," ptos"]})},e+1))}a.push((0,n.jsxs)("p",{children:[s("description.puntos").toUpperCase(),":"]},d.players.length+1));for(let e=0;e<d.players.length;e++){let t,i=d.players[e],r=i.zones[0];a.push((0,n.jsxs)("div",{className:"playerInfo",children:[(0,n.jsxs)("div",{className:"headerPlayer importantNote rounded2 rounded",children:[(0,n.jsx)("div",{className:"bold",children:i.name}),s("description.total"),": ",r.totalPoints,t]}),(0,n.jsx)("div",{className:"controlTextContainer rounded rounded1",children:(0,D.Z)({controlTextValuesString:"controlTextValues",steps:L.wG.steps,maxValues:L.wG.maxValues,texts:L.wG.texts,zone:0,player:e,onValueChange:c})})]},d.players.length+e+2))}return a.push((0,n.jsx)("button",{className:"importantNote",onClick:l,children:s("description.fin")},2*d.players.length+2)),(0,n.jsx)("div",{className:"gameContainer",children:a},2*d.players.length+3)};function O(e,t){let s={tickTime:0,forceAction:"",game:e};return o.zo.init(s.game,o.zo.getGameTypeControlTextValuesInit(s.game.gameType),o.zo.getGameTypeFiascoControlTextValuesInit(s.game.gameType),t),s}var $=function(e,t,s,n){let i=new g,{game:r,gameExtras:c}=a.useContext(B.G),[d,m]=a.useState(()=>(window.scrollTo(0,0),O(r,!1))),u=d.game.players[s].zones[n];return a.useEffect(()=>{let e=d.game.players[s].zones[n];m({...d,tickTime:e.time,forceAction:"play"}),document.body.classList.add(o.zo.getGameTypeBodyClassName(r.gameType))},[]),[d,function(e){let t={...d};if(!e){let e=t.game.players[s].zones[n];e.simpathyPoints=0,c.onTimerChange(e)}u.time=e,m({...t,tickTime:e,forceAction:"play"})},function(e,t){let a={...d},r=a.game,l=r.players[s].zones[n],u=l.gateProgressionData[l.gateProgression];(!(r.maxPoints<=l.points&&r.maxPoints>0)&&!(r.maxTime<=d.tickTime&&r.maxTime>0)||l.points+e<=r.maxPoints&&0===l.fiascoControlTextValues.filter(e=>e>0).length)&&(u.controlTextValues=[...u.controlTextValues],u.controlTextValues[t]+=e,l.points+=e,l.gateProgression<r.gates[n]&&(u.gatePoints+=e),i.sendMessage(x,l.points),c.onChangeScore(l),m(a),o.zo.isFiasco(a.game,s,n)&&m({...d,forceAction:"pause"}))},function(){let e={...d};window.scrollTo(0,0),l.Z.event("play","reset",e.game.players[s].name),(e=O(e.game,!0)).forceAction="stop",m(t=>({...t,...e}))},function(){let t={...d},a=t.game,i=a.players;window.scrollTo(0,0),c.onEndPlayer(a,d.tickTime,s,n),t.forceAction="stop",m(t),l.Z.event("play","endPlayer",i[s].name),document.body.classList.remove(o.zo.getGameTypeBodyClassName(r.gameType)),e(t.game)},function(e){let t={...d},a=t.game.players[s].zones[n];a.gateProgression=e,i.sendMessage(p,a.gateProgression),e===t.game.gates[n]&&(t.forceAction="pause"),c.onGateProgressionChange(a),m(t)},function(e,t){let a={...d},i=a.game.players[s].zones[n];i.fiascoControlTextValues=[...i.fiascoControlTextValues],i.fiascoControlTextValues[t]+=e,i.fiascoControlTextValues[t]>0&&(a.forceAction="pause"),c.onFiascoChangeScore(),m(a)},function(){let e={...d},t=e.game.players[s].zones[n];t.simpathyPoints++,c.onPointBecauseLastMinute(t),m(e)},function(){m({...{...d},tickTime:r.maxTime+r.courtesyTime,forceAction:"pause"})},function(){let e={...d};e.game.players[s].zones[n].time=d.tickTime,e.forceAction="stop",m(e),t&&t(s,n)}]},M=function(e){let{zoneIndex:t,playerIndex:s}=e,r=(0,n.jsx)(n.Fragment,{}),{t:c}=(0,i.$G)(["main"]),{game:m}=a.useContext(B.G),u=m.players[s],g=u.zones[t];return o.zo.isFiasco(m,s,t)&&(l.Z.event("play","fiasco",u.name),r=(0,n.jsx)("div",{className:"fiascoBox rounded importantNote",children:"FiASCO!"})),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"playersList",children:(0,n.jsxs)("div",{className:"playerListItem importantNote rounded",children:[(0,n.jsx)("img",{src:u.avatar,alt:"avatar"}),u.name]})}),(0,n.jsxs)("div",{className:"controlTextContainer rounded rounded2",children:[(0,n.jsxs)("div",{className:"smallText",children:[c("description.zona"),": ",t+1]}),(0,n.jsxs)("div",{className:"smallText",children:[c("description.puertas"),": ",m.gates[t]]}),(0,n.jsxs)("div",{className:"smallText",children:["max ",c("description.tiempo"),": ",d.Z.printTime(d.Z.millisToTime(m.maxTime))]}),(0,n.jsxs)("div",{className:"smallText",children:["max ",c("description.puntos"),": ",m.maxPoints]}),(0,n.jsxs)("div",{className:"bold pointsText",children:[c("description.total"),": ",g.totalPoints]}),r]})]})},U=function(){let[e,t]=a.useState(0),[s,i]=a.useState({}),r=new g,o=new T;function c(e){i(e),t(1),r.listenMessages(h,l),r.listenMessages(j,d),r.listenMessages(f,m),r.listenMessages(x,u),r.listenMessages(p,v)}function l(){o.sendStart()}function d(){o.sendStop()}function m(e){o.sendTime(e.detail)}function u(e){o.sendPoints(e.detail)}function v(e){o.sendGates(e.detail)}return 0===e?(0,n.jsx)("div",{className:"controlText",onClick:function(){o.discoverDevice(c)},children:"Discover Bluetooth Device"}):(0,n.jsx)("div",{className:"controlText",children:s.name})},q=function(e){let{playerZone:t,forceAction:s,setRepairStatus:r,onTimerChange:o,onTimeFiasco:c,onPointBecauseLastMinute:l}=e,{t:m}=(0,i.$G)(["main"]),{game:u}=a.useContext(B.G);return(0,n.jsxs)("div",{className:"controlTextContainer rounded rounded2",children:[d.Z.isIphone()?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(U,{}),u.courtesyTime>0?(0,n.jsxs)("div",{className:"pointsText",children:[m("description.puntos")," ",m("description.portiempo"),": ",t.simpathyPoints]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)("button",{className:"repairButton importantNote",onClick:r,children:m("description.iniciarreparacion")}),(0,n.jsx)(P,{courtesyTime:u.courtesyTime,startTime:t.time,label:m("description.tiempo"),forceAction:s,onTimerChange:o,onTimeFiasco:c,onPointBecauseLastMinute:l,maxTime:u.maxTime})]})},H=s(97798);s(67197),s(33409);var _=function(e){let{playerIndex:t,zoneIndex:s,onGateProgressionChange:r}=e,{t:c}=(0,i.$G)(["main"]),{game:l,gameExtras:d}=a.useContext(B.G),m=(0,H.u7)(H.ZP);function u(e){let n="gatesPlusButton"===e.target.id,a=l.players[t].zones[s],i=l.gates[s];n?a.gateProgression<i&&r(a.gateProgression+1):a.gateProgression>0&&r(a.gateProgression-1)}let g=l.players[t].zones[s];return(0,n.jsxs)("div",{className:"gateProgressionContainer controlTextContainer info rounded rounded2",children:[c("description.avancepuerta"),": ",g.gateProgression,(0,n.jsx)("button",{id:"gatesPlusButton",onClick:u,className:"buttonControlTextPlus",children:"+"}),(0,n.jsx)("button",{id:"gatesMinusButton",onClick:u,className:"buttonControlTextMinus",children:"-"}),(0,n.jsx)(m,{step:1,min:0,max:l.gates[s],dots:!0,vertical:l.gameType===o.Oh,value:g.gateProgression,onChange:r,marks:d.generateSliderMarksFromGates(g.gateProgressionData,g.gateProgression),tipFormatter:e=>g.gateProgression<l.gates[s]?String(e).concat("-").concat(g.gateProgressionData[g.gateProgression].gatePoints):"-"})]})};s(67174);var Q=function(e){let{children:t,onGameEnd:s,onRepair:r,playerIndex:o,zoneIndex:c}=e,{t:l}=(0,i.$G)(["main"]),d=[],[m,u,g,p,x,h,j,f,T,v]=$(s,r,o,c),b=m.game,y=b.players[o],P=y.zones[c];return t.length&&(d.push(a.cloneElement(t[0],{onValueChange:g})),t[2]?(d.push(a.cloneElement(t[1],{onValueChange:j})),d.push(a.cloneElement(t[2]))):d.push(a.cloneElement(t[1])),t[3]&&d.push(a.cloneElement(t[3]))),(0,n.jsxs)("div",{className:"gameContainer",children:[(0,n.jsx)(M,{playerIndex:o,zoneIndex:c}),(0,n.jsx)(q,{playerZone:P,forceAction:m.forceAction,setRepairStatus:v,onTimerChange:u,onTimeFiasco:T,onPointBecauseLastMinute:f}),(0,n.jsx)(_,{playerIndex:o,zoneIndex:c,onGateProgressionChange:h}),(0,n.jsxs)("div",{className:"controlTextContainer rounded rounded2",children:[d[2],P.gateProgression<b.gates[c]?d[0]:(0,n.jsx)(n.Fragment,{}),P.gateProgression<b.gates[c]?d[1]:(0,n.jsx)(n.Fragment,{})]}),d[3],(0,n.jsx)("button",{onClick:p,className:"resetButton",children:l("description.reset")}),(0,n.jsxs)("button",{className:"importantNote",onClick:()=>{x()},children:[l("description.finjugador")," (",y.name,")"]}),(0,n.jsx)("p",{})]})},J=function(e){let{game:t,player:s,zone:i,onGameEnd:r,onRepair:o,gameExtras:c,children:l}=e,[d,m]=a.useState(t),u=[];return a.useEffect(()=>{c.doPageView()},[]),1!==d.gameType?u.push((0,n.jsx)(Q,{onGameEnd:e=>{r(e)},onRepair:o,playerIndex:s,zoneIndex:i,children:l},1)):u.push((0,n.jsx)(R,{onGameEnd:e=>{r(e)},onRepair:o},0)),(0,n.jsx)(B.G.Provider,{value:{game:d,setGame:m,gameExtras:c},children:u})},K=s(69945),W=s(54037);s(22487);var X=function(e){let{inGame:t,onBackButtonClick:s}=e,c=(0,n.jsx)(n.Fragment,{}),{t:l}=(0,i.$G)(["main"]),d=r.ZP.getGameExtras(t.gameType),[m,u,g,p,x,h,j,f,T,v]=(0,W.ZP)(t,d),b=r.ZP.getGameContent(u.gameType,x.id,h),[y]=a.useState(()=>r.ZP.getGroupFromJid(u,window.crawlear.user.uid));return m===W.gC?c=u.gameType===o.te?(0,n.jsx)(J,{game:u,onGameEnd:T,gameExtras:d}):(0,n.jsx)(G.Provider,{value:[g,p],children:(0,n.jsx)(S,{game:u,gameProgression:g,jidGroup:y,onBeginGame:j,onBackButtonClick:s,onCloseButonClick:f})}):m===W.TK?c=(0,n.jsx)(J,{player:x.id,zone:h,game:u,gameExtras:d,onGameEnd:T,onRepair:v,children:b}):m===W.V9&&(c=(0,n.jsxs)("div",{className:"gameList",children:[(0,n.jsx)(K.Z,{game:u}),(0,n.jsx)("button",{className:"backButton",onClick:s,children:l("description.atras")})]})),c}},83492:function(e,t,s){"use strict";s.d(t,{S4:function(){return p},gr:function(){return x},i3:function(){return u},rN:function(){return g}});var n=s(52759),a=s(24025),i=s(65780),r=s(5163),o=s(1219),c=s(31959),l=s(18492),d=s(11218);let m={isIndividualGame:e=>e.gameType===n.te,isGroupGameFinished:(e,t,s)=>{let n=!0;return!!m.isIndividualGame(e)||(Object.entries(t).forEach(e=>{Number(e[0])===s&&Object.entries(e[1]).forEach(e=>{Object.entries(e[1]).forEach(e=>{(e[1].status===u||e[1].status===p||e[1].status===g)&&(n=!1)})})}),n)},onRepairEnd(e,t,s,n,a){let i=window.crawlear?.fb;a.status=u,delete a.repairData,i.setGameProgression(e,t,s,n,a)},updateGameFromProgression:(e,t)=>{let s={...t};return Object.entries(e).forEach(e=>{Object.entries(e[1]).forEach(t=>{t[1].data&&(s.players[e[0]].zones[t[0]]=t[1].data)})}),s},getGroupFromJid:(e,t)=>{let s=e.judges.find(e=>e.uid===t);return s?s.group:0},getGameExtras:e=>{let t;return e===n.oP?t=a.vc:e===n.UZ?t=i.vc:e===n.HF?t=r.vc:e===n.uG?t=o.vc:e===n.te?t=d.vc:e===n.Jo?t=c.vc:e===n.Oh&&(t=l.vc),t},getGameContent:(e,t,s)=>{let d,m;return e===n.oP?d=a.n_:e===n.UZ?d=i.n_:e===n.HF?d=r.n_:e===n.uG?d=o.n_:e===n.te||(e===n.Jo?d=c.n_:e===n.Oh&&(d=l.n_)),d&&(m=d(t,s)),m}},u="waiting",g="playing",p="repair",x="done";t.ZP=m},54037:function(e,t,s){"use strict";s.d(t,{TK:function(){return d},V9:function(){return m},gC:function(){return l}});var n=s(2265),a=s(1746),i=s(83492),r=s(50362),o=s(52759),c=s(76142);let l=0,d=1,m=2;t.ZP=function(e,t){let[s,u]=n.useState(l),[g,p]=n.useState(e),[x,h]=n.useState([]),j=n.useRef([]),[f,T]=n.useState(-1),v=window.crawlear.fb,{t:b}=(0,r.$G)(["main"]),[y,P]=n.useState({name:"",avatar:"",group:0,id:0,zones:[],uid:""});return n.useEffect(()=>{a.s?h(o.zo.createGameProgression(g.zones,g.players.length)):v.getGameProgression(g.gid,()=>{},()=>{},(e,t)=>{let s={};s[e]=t,p(i.ZP.updateGameFromProgression(t,g)),j.current={...j.current,...s},h({...j.current,...s})},(e,t)=>{let s={};s[e]=t,p(i.ZP.updateGameFromProgression(t,g)),j.current={...j.current,...s},h({...j.current,...s})})},[]),[s,g,x,h,y,f,function(e,t){let s=e.id,n=e.group;u(d),P(e),T(t),x[n][s][t].status=i.rN,h(x),v.setGameProgression(g.gid,s,n,t,x[n][s][t])},function(e,s){if(i.ZP.isGroupGameFinished(e,x,s)&&window.confirm(b("content.cerrarpartida"))&&!a.s)v.getGameResult(e,e=>{let s={...e};s.gameStatus=2,t.onGameEnd(s),s=c.Z.getOrderedGameResult(s),v.updateGame(s),v.removeGameProgression(s.gid),p(s),u(m)},()=>{});else if(a.s){let t=c.Z.getOrderedGameResult(e);p(o.zo.getGameResult(t,x)),u(m)}},function(e){if(i.ZP.isIndividualGame(g)){t.onGameEnd(g);let e=c.Z.getOrderedGameResult(g);e.gameStatus=2,v.updateGame(e),v.removeGameProgression(e.gid),v.removeDirectorPresenceRequest(e.gid),u(m),p(e)}else{let t=y.id,s=y.group,n={...x},a={...g};n[s][t][f].status=i.gr,n[s][t][f].data=e.players[t].zones[f],n[s][t][f].data.judgedBy||(n[s][t][f].data.judgedBy=[]),n[s][t][f].data.judgedBy.push(window.crawlear.user.uid),h(n),a.players[t].zones[f]=n[s][t][f].data,v.setGameProgression(a.gid,t,s,f,n[s][t][f]),u(l),p(a)}},function(e,t){let s={...x},n=g.players[e],a=n.group,r=n.id;s[a][e][t].status=i.S4,s[a][e][t].repairData={setTime:new Date().getTime()},s[a][e][t].data=n.zones[t],h(s),v.setGameProgression(g.gid,r,a,t,s[a][r][t]),u(l)}]}},67174:function(){},22487:function(){},68102:function(){},61025:function(){},8450:function(){},79309:function(){},33409:function(){},97421:function(){},51217:function(){},22242:function(){},32495:function(){},56257:function(e,t){"use strict";t.Z={src:"/_next/static/media/iconFiasco.2d816ec2.png",height:20,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAXVBMVEXx8fHv7+/s7Ozr6+vn5+fd3d3b29vZ2dnY2Nj19fXe3d0AAADCwsLW1tbl5eXk5OTa2trk5OTZ2dno6Oju7u7j4+Po6Oj8/Pzn5+fb29vw8PDh4eH5+fnv7+/09PTplhA8AAAAH3RSTlMAAAAAAAAAAAABAQIGCRQVFRccHiIiJC0xMTY3SlNaSM9/+AAAAEFJREFUeNoFQIMRwDAA/Cq2vf+YPfALteLiuM1Z65gbzy5Slv0gDZWzGgmxvd6/LeKb3do+PxDdQ+iaQFDmHKPiB4oGA9U4Mn9uAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}}}]);