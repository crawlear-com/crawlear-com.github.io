(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3678],{93678:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var i=n(57437),s=n(2265),r=n(50362),a=n(52759),o=n(54037),c=n(69945),d=n(66709),u=n(97914),l=n(56257),m=function(e){let{game:t,gameProgression:n}=e,{t:s}=(0,r.$G)(["main"]),o=[],c=0;return t&&(o.push((0,i.jsx)(d.Z,{game:t},"header")),t.players.forEach(e=>{let r,d=[],m=0;e.zones.forEach((o,c)=>{let g=e.group;if(n&&n[g]&&n[g][e.id]&&n[g][e.id][m]&&n[g][e.id][m].data){let o=[],f=n[g][e.id][m];"done"===f.status?o.push((0,i.jsx)(u.Z,{gameType:t.gameType,gameProgression:f},`progressRow${m}`)):"repair"===f.status&&o.push(s("points.reparacion").toUpperCase()),a.zo.isFiasco(t,e.id,c)&&(r=(0,i.jsx)("img",{src:l.Z,alt:"fiasco"})),d.push((0,i.jsxs)("div",{className:"gameProgressionInfoItem",children:[(0,i.jsxs)("div",{className:"bold",children:[s("description.zona")," ",m+1," ",r]}),o]},m))}m++}),d.length>0&&o.push((0,i.jsxs)("div",{className:"gameProgressionItem rounded rounded1",children:[(0,i.jsx)("img",{src:e.avatar,alt:"player avatar"}),(0,i.jsx)("div",{children:d})]},c+m)),c++})),(0,i.jsx)(i.Fragment,{children:o})},g=n(2635),f=function(e){let{game:t,inGameProgression:n}=e,[r,a]=s.useState(n),o=window.crawlear.fb;return s.useEffect(()=>{r||o.getGameProgressionOnce(t.gid,(e,t)=>{a({...t})},()=>{})},[]),r?(0,i.jsx)(m,{game:t,gameProgression:r}):(0,i.jsx)(g.Z,{})};function p(e){let t=(0,i.jsx)(i.Fragment,{}),n="";return t=e.gameStatus===o.gC||e.gameStatus===o.TK?(0,i.jsx)(f,{game:e}):(0,i.jsx)(c.Z,{game:e}),a.zo.isCurrentUserIsOwner(e.owner)&&(n="(D) "),{title:`${n}${e.name} - ${e.date}`,content:t}}n(6078);var x=n(14842),w=n(16463);n(2364);var h={src:"/_next/static/media/iconLike.878280e5.png",height:33,width:30,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAQAAACfDS2NAAAAd0lEQVR42g3IMQ5BURAF0DvznyG0EiJRUFIoJKKxFiu1EBQK8UgEHX7+vLmc8oAgaiXeG+8RCmSxOHZ9XQqgNx0B6G/9Yl+IDgPMK85LK08PbTkvq1k1gYvR6l3SBQf+hDD+cU/NlQUmAtDjISf7WBprB4jmtf8Bpd4yvKKrmlAAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},j={src:"/_next/static/media/iconDislike.698e8ad5.png",height:29,width:29,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAiklEQVR42mP4qPzO5Eva787frX/afrW/0mT4Ufd97Y8VP1YB4Yofmz4HMnyp+rLwy5Qv04Bwypc572MY3vi/rX0/6UPfh54PEz7MfFXIwMAwjfmJ3quaN62v8176P1Bi+M/IAAQP9Z+3PpBjgIDbjO+YGBjuO953ZmB4wgwWugxUdYr1niMDAwMDAMPKQwORcd/LAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},A=function(e){let{user:t}=e,{t:n}=(0,r.$G)(["main"]),[a,o]=s.useState({}),c=s.useRef({}),d=[];function u(e){o(e)}function l(e){c.current={...c.current,...e},o({...c.current})}function m(e){delete c.current[e],o({...c.current})}return(s.useEffect(()=>{let e=window.crawlear.fb;e&&e.getUserGameRequests(t.uid,u,()=>{},l,m)},[]),a&&Object.keys(a).forEach(e=>{let s=window.crawlear.fb;d.push((0,i.jsxs)("div",{className:"gameRequestsItem smallText",children:[(0,i.jsxs)("span",{className:"gameRequestsFrom",children:[n("description.peticionde"),": ",(0,i.jsx)("span",{className:"bold",children:a[e].fromName})]}),(0,i.jsxs)("div",{className:"gameRequestGameName",children:[n("description.parajuego"),": ",(0,i.jsx)("span",{className:"bold",children:a[e].gameName})]}),(0,i.jsx)("span",{className:"acceptButton",onClick:()=>{s.acceptGameRequest(t.uid,e)},children:(0,i.jsx)("img",{src:h,alt:"like icon"})}),(0,i.jsx)("span",{className:"rejectButton",onClick:()=>{s.rejectGameRequest(t.uid,e)},children:(0,i.jsx)("img",{src:j,alt:"dislike icon"})})]}))}),d.length>0)?(0,i.jsxs)("div",{className:"gameRequestsContainer rounded rounded1",children:[(0,i.jsx)("div",{className:"headerText bold",children:n("description.peticionesdejuego")}),d]}):(0,i.jsx)(i.Fragment,{})};async function v(e,t,n){let i=window.crawlear.fb,s=e[t],r=[...e],a=window.crawlear.user.uid;s.uids.indexOf(a)>=0&&(s=await i.removeIdFromGame(s,a,"uids")),s.jids.indexOf(a)>=0&&(s=await i.removeIdFromGame(s,a,"jids")),s.owner.indexOf(a)>=0&&(s=await i.removeIdFromGame(s,a,"owner")),0===s.uids.length&&0===s.jids.length&&await i.removeGame(s.gid),r.splice(t,1),n(r)}var N=function(){let[e,t]=s.useState([]),[n,i]=s.useState([]),[r,a]=s.useState([]),[o,c]=s.useState([]);return s.useEffect(()=>{window.crawlear.fbBase.isUserLogged()&&function(){let e=window.crawlear.fb;e.getGamesFromUser(window.crawlear.user.uid,!1,e=>{c(t=>[...t,...e])}),e.getGamesFromJudge(window.crawlear.user.uid,!1,e=>{c(t=>[...t,...e])})}()},[window.crawlear.user]),s.useEffect(()=>{(function(e){let n=[],s=[];e.forEach(e=>{e.jids.indexOf(window.crawlear.user.uid)>=0||e.owner.indexOf(window.crawlear.user.uid)>=0?n.push(e):e.uids.indexOf(window.crawlear.user.uid)>=0&&s.push(e)}),t(s),i(n)})(o)},[o]),[e,n=>{v(e,n,t)},n,e=>{v(n,e,i)},r,e=>{v(r,e,a)},function(){window.crawlear.fb.getFinishedGamesFromUid(window.crawlear.user.uid,e=>{a(t=>[...t,...e])})}]},b=function(e){let{storedGames:t,onRemoveStoredGames:n,onConfigureGames:a,onLoadPreviousGames:o}=e,c=[],{t:d}=(0,r.$G)(["main"]),[u,l]=s.useState(!1),m=u?(0,i.jsx)(g.Z,{}):(0,i.jsx)("button",{title:"loadButton",onClick:()=>{l(!0),o(window.crawlear.user.uid)},children:d("description.cargar")});return t.length>0?(u&&l(!1),c.push((0,i.jsx)(x.Z,{title:d("description.partidasprevias"),data:t,transformer:p,readOnly:!1,onItemAction:()=>{},onRemoveItem:e=>{n(e)},onConfigureItem:e=>{a(t,e)}},"previousGames"))):c.push((0,i.jsxs)("div",{className:"gameList rounded rounded3 centerText",children:[(0,i.jsx)("div",{className:"headerText bold",children:d("description.partidasprevias")}),m]},"noPreviousGames")),(0,i.jsxs)(i.Fragment,{children:[" ",c," "]})};n(1923);var C=function(e){let{onConfigureGames:t,onGamePlay:n}=e,{t:s}=(0,r.$G)("main"),[a,o,c,d,u,l,m]=N();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"headerText bold sectionTitle",children:s("description.secciondejuego")}),(0,i.jsx)(A,{user:window.crawlear?.user}),(0,i.jsx)(x.Z,{data:a,readOnly:!0,transformer:p,onRemoveItem:e=>{o(e)},onConfigureItem:e=>{t(a,e)},title:s("description.partidascomopiloto")}),(0,i.jsx)(x.Z,{data:c,title:s("description.partidasdejuez"),readOnly:!1,transformer:p,onItemAction:e=>{n(c,e)},onConfigureItem:e=>{t(c,e)},onRemoveItem:e=>{d(e)}}),(0,i.jsx)("button",{className:"newGameButton importantNote",onClick:function(){(0,w.redirect)("/gameconfigurator")},children:s("description.crearjuego")}),(0,i.jsx)(b,{storedGames:u,onRemoveStoredGames:l,onConfigureGames:t,onLoadPreviousGames:m})]})}},14842:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(57437),s=n(2265),r=n(50362);n(67872);var a=function(e){let{itemPosition:t,onClickFunction:n,text:s}=e;return(0,i.jsx)("div",{"data-itemposition":t,onClick:e=>{e.stopPropagation(),n(e)},className:"itemListMenuItem",children:s})},o=function(e){let{itemPosition:t,onRemoveClick:n,onConfigureClick:o}=e,{t:c}=(0,r.$G)(["main"]),d=s.useRef(null);function u(){d.current.classList.toggle("closed")}return(0,i.jsxs)("span",{ref:d,className:"listItemMenu rounded closed",children:[(0,i.jsxs)("div",{onClick:u,children:[(0,i.jsx)("div",{className:"burguerMenuBar"}),(0,i.jsx)("div",{className:"burguerMenuBar"}),(0,i.jsx)("div",{className:"burguerMenuBar"})]}),(0,i.jsx)(a,{text:c("description.eliminar"),itemPosition:t,onClickFunction:e=>{u(),n(e)}}),(0,i.jsx)(a,{text:c("description.editar"),itemPosition:t,onClickFunction:o})]})},c=n(6078);n(8900);var d=function(e){let{data:t,readOnly:n,onRemoveItem:s,onConfigureItem:a,title:d,onItemAction:u,transformer:l}=e,{t:m}=(0,r.$G)(["main"]),g=0,f=[];function p(e){let t=Number(e.target.getAttribute("data-itemposition"));window.confirm(m("content.seguroborrarpost"))&&s&&s(t)}function x(e){let t=Number(e.target.getAttribute("data-itemposition"));a&&a(t)}function w(){}return t&&t.forEach(e=>{f.push((0,i.jsxs)("div",{children:[a&&s&&(0,i.jsx)(o,{itemPosition:g,onConfigureClick:x,onRemoveClick:p},`menu${g}`),(0,i.jsx)(c.Z,{item:l(e),onItemAction:u,itemPosition:g,onOpenClose:w},`item${g}`)]},g)),g++}),t&&0!==t.length||f.push((0,i.jsx)("div",{className:"centerText smallText",children:m("description.noentradas")},g)),(0,i.jsxs)("div",{className:"list rounded rounded3",children:[(0,i.jsx)("div",{className:"headerText bold",children:d}),f]})}},6078:function(e,t,n){"use strict";var i=n(57437);n(2265),n(98169),t.Z=function(e){let{item:t,itemPosition:n,onOpenClose:s,onItemAction:r}=e;return(0,i.jsxs)("div",{className:"listItemContainer rounded rounded1 closed",children:[(0,i.jsx)("span",{onClick:function(e){let t=e.target.parentElement;t&&(t.classList.toggle("closed"),t.classList.contains("closed")||s(n))},className:"textOverflow listItemName bold",children:t.title}),r?(0,i.jsx)("span",{className:"editButton",onClick:function(e){r&&r(n)},children:(0,i.jsx)("button",{className:"importantNote playButton"})}):(0,i.jsx)(i.Fragment,{}),t.content]},n)}},2364:function(){},8900:function(){},98169:function(){},67872:function(){}}]);