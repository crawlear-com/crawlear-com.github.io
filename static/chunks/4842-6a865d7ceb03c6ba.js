(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4842],{11517:function(e,n,a){"use strict";var t=a(57437);a(2265),a(38033),n.Z=function(e){let{message:n}=e;return!n||n.length<=0?(0,t.jsx)(t.Fragment,{}):(0,t.jsx)("div",{className:"errorBoxContainer",children:n})}},2635:function(e,n,a){"use strict";var t=a(57437);a(2265),a(14987),n.Z=function(){return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"spinner",children:[(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{}),(0,t.jsx)("div",{})]})})}},88780:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return z}});var t=a(57437),i=a(2265),s=a(52759),r=a(50362);a(21169);var o=function(e){let{onGameTypeChange:n,selectedGameType:a=0,selectedPointsType:s=0}=e,{t:o}=(0,r.$G)(["main"]),l=[o("gametype.aecar"),o("gametype.rey"),o("gametype.isrcc"),o("gametype.levante124"),o("gametype.copaespana"),o("gametype.minicrawlerpassion"),o("gametype.generic")],c=[(0,t.jsx)("div",{children:o("gametype.modojuegoarcar")}),(0,t.jsx)("div",{children:o("gametype.modojuegorey")}),(0,t.jsx)("div",{children:o("gametype.modojuegoisrcc")}),(0,t.jsx)("div",{children:o("gametype.modojuegolevante124")}),(0,t.jsx)("div",{children:o("gametype.modojuegocopaespana")}),(0,t.jsx)("div",{children:o("gametype.modojuegominicrawlerpassion")}),(0,t.jsx)("div",{children:o("gametype.modojuegogeneric")})],[d,u]=i.useState({gameType:a}),m=[];return l.forEach((e,n)=>{m.push((0,t.jsx)("option",{value:n,children:l[n]},n))}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"gameType rounded1 rounded",children:[(0,t.jsxs)("label",{htmlFor:"gameTypeSelect",className:"headerText bold",children:[o("gametype.modojuego"),(0,t.jsx)("select",{id:"gameTypeSelect",defaultValue:a,onChange:function(e){let a=e.target.selectedIndex;n&&n(a),u({gameType:a})},children:m})]}),(0,t.jsx)("div",{className:"gameSelectText smallText",children:c[d.gameType]})]})})};a(2209);var l=function(e){let{player:n,i:a,onRemovePlayer:i,onClickPlayer:s,onGroupChange:o,maxGroups:l,editMode:c,isForJudge:d,onGameDirectorChange:u}=e,{t:m}=(0,r.$G)(["main"]),g=[];if(c){let e=[];for(let n=0;n<l;n++)e.push((0,t.jsxs)("option",{value:n,children:[m("description.grupo")," ",n+1]}));g.push((0,t.jsx)("button",{className:"buttonControlTextMinus",id:a,onClick:function(e){e.stopPropagation(),i&&i(e)},children:"-"})),g.push((0,t.jsx)("div",{children:(0,t.jsx)("select",{value:n.group,onChange:function(e){let a=e.target.selectedIndex;o&&o(n.id,a)},children:e})})),d&&g.push((0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"checkbox",onChange:function(e){u&&u(n.id,e.target.checked)}}),(0,t.jsx)("span",{className:"PlayerItemGameDirector",children:m("description.directordepartida")})]}))}return(0,t.jsx)("li",{onClick:function(){s&&s(n.id)},className:"closed importantNote rounded playerListItem",value:n.name,children:(0,t.jsxs)("div",{className:"playerBox",children:[(0,t.jsx)("img",{referrerPolicy:"no-referrer",src:n.avatar,alt:"avatar"}),(0,t.jsx)("div",{className:"textOverflow",children:n.name}),g]})},a)},c=a(1746);a(95236);var d={src:"/_next/static/media/iconAdd.a91ab472.png",height:17,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAx0lEQVR42mP48OEDIwMQ3Lp1i+3Hjx8Rv3//Ln/37p0CSOznz59gOYa3b9/yffv2bRpQwQygYO337983fP782Q4sCVXg8+nTp4UfP360Wrx4MRNQshdocsOpU6fYwApev35d+ObNG3MQGyjB8vzZMxYgvxYorghW8OjRI4unT59WPnv2TO/9hw+sQHb2kydP4k+cOMEMVnDlyhX2+/fuRdy/fz/83r17bkA6/e6dOypgyRs3boBdCvWJ6u3bt80uXrjABXUbIwBkDn7Djb8kxwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7},u=function(e){let{onUserSeachPlayerAdd:n,onUserClick:a,onPlusAddUserClick:s,mainText:r,secondaryText:o,iconSend:l,children:u}=e,m=window.crawlear.fb,g=window.crawlear.fbBase,[p,h]=i.useState(""),[x,j]=i.useState([]),f=i.useRef(),v=i.useRef();function w(e){let a=e.target,t=a.getAttribute("data-uid"),i=a.getAttribute("data-displayname"),s=a.getAttribute("data-photourl");j([]),h(""),n&&n({uid:t,displayName:i,photoURL:s})}function y(e){let n=e.target.nextElementSibling.getAttribute("data-uid");a&&a(n)}let b=[],T=0,N;return x.length>0&&(b.push((0,t.jsx)("div",{className:"userSearchResultsText smallText",children:o},T)),T++),x.forEach(e=>{let a=l;n&&e.uid===window.crawlear.user.uid&&(a=d),b.push((0,t.jsxs)("div",{className:"bold userSearchItem",children:[(0,t.jsx)("span",{onClick:y,className:"userSearchResult textOverflow",children:e.displayName}),(0,t.jsx)("img",{src:a,alt:"send icon","data-uid":e.uid,"data-displayname":e.displayName,"data-photourl":e.photoURL,onClick:w})]},T)),T++}),s&&(N=(0,t.jsx)("button",{className:"buttonControlTextPlus",onClick:()=>{let e=v.current.value;j([]),h(""),s({uid:"",displayName:e})},children:"+"})),(0,t.jsxs)("div",{className:"userSearchContainer rounded rounded3",children:[!c.s||s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"userSearchText smallText",children:r}),(0,t.jsx)("input",{id:Date.now(),ref:v,className:"userSearchName",onChange:function(e){let n=e.target.value;h(n),!c.s&&g.isUserLogged()&&(n.length>0?m.userSearch(n,e=>{j(e)},()=>{}):j([]))},value:p})]}):(0,t.jsx)(t.Fragment,{}),N,u,(0,t.jsx)("div",{ref:f,className:"resultsContainer",children:b})]})},m={src:"/_next/static/media/iconSend.82deb4fe.png",height:17,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAQAAACfUMTVAAAAbElEQVR42mXBoQ5AQACA4T8Jgk2iSIpgU80DXOFtbILoLQ2TCObS7W63u+K67+PHxX70i5/DxY8uRjdmUsIWtlDCTLpBVu8AT/3U8A6y4ipvASYyEdziKjnTo9+7vQ27oz9TYE22fMvCfE3gA5MbL8eNMHDZAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7},g=function(e){let{onUserSeachPlayerAdd:n,gameName:a,isForJudge:s}=e,o=window.crawlear.fb,l=window.crawlear.fbBase,{t:c}=(0,r.$G)(["main"]),d=i.useRef(0),[g,p]=i.useState(0),h=[];return d.current>0&&h.push((0,t.jsxs)("div",{children:[d.current," ",c("description.peticionespendientes")]},0)),(0,t.jsx)(u,{onUserSeachPlayerAdd:function(e){let{uid:t,displayName:i,photoURL:s}=e;if(t){if(t!==window.crawlear.user.uid&&!window.confirm(c("content.peticionjuegoconfirmacion")))return;if(t===window.crawlear.user.uid){let e=window.crawlear.user;n({uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,group:0})}else o.setUserGameRequest(window.crawlear.user.uid,window.crawlear.user.displayName,t,a,(e,a)=>{"pending"===a?(d.current+=1,p(g+1)):("accepted"===a&&n({uid:t,displayName:i,photoURL:s,group:0}),d.current-=1,p(g-1))})}},onPlusAddUserClick:s?void 0:n,mainText:l.isUserLogged()?c("content.usuariodesistema"):c("content.usuarionosistema"),secondaryText:`${c("content.enviorequest")}. ${c("content.enviorequest2")}`,iconSend:m,children:h})},p=a(76968);a(46060);var h=function(e){let{inPlayers:n,onPlayerNumerChange:a,onGameDirectorChange:s,gameName:o,isForJudge:c,maxGroups:d}=e,[u,m]=i.useState(n||[]),{t:h}=(0,r.$G)(["main"]);function x(e){p.Z.event("menu","removePlayer",u[e.target.id].name),delete u[e.target.id];let n=u.filter(e=>e);m(n),a&&a(n)}function j(e,n){let a=[...u];a[e].group=n,m(a)}function f(e,n){s&&s(e,n)}i.useEffect(()=>{a&&a(u)},[u]);let v=h(u.length?"description.jugadores":"description.nojugadores");return c&&(v=h(u.length?"description.jueces":"description.nojueces")),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"players rounded rounded1",children:[(0,t.jsx)("div",{className:"headerText bold",children:h(c?"description.jueces":"description.jugadores")}),(0,t.jsx)(g,{isForJudge:c,onUserSeachPlayerAdd:function(e){let n=e.displayName;!(!n||0===n.trim().length||u.find(n=>n.uid===e.uid&&e.uid.length>0))&&(!c||e.uid)&&(u.push({id:u.length,uid:e.uid||"",name:n,avatar:e.photoURL||`https://eu.ui-avatars.com/api/?background=345B63&color=FFFFFF&name=${n}`,group:0,time:0,points:0,battery:!1}),p.Z.event("menu","addPlayer",n),a&&a(u))},gameName:o}),(0,t.jsx)("div",{className:"headerText",children:h(c?"description.juecesenpartida":"description.usuariosenpartida")}),(0,t.jsx)("ul",{className:"playersList",children:0===u.length?v:u.map((e,n)=>(0,t.jsx)(l,{player:e,i:n,onGameDirectorChange:f,maxGroups:d,onGroupChange:j,editMode:!0,isForJudge:c,onRemovePlayer:x},n))})]})})},x=a(49742);a(99331);var j=function(e){let{onMaxTimeChange:n,minutes:a,seconds:i}=e,s=[a,i];function r(e,a){let t=[...s];t[a]=e,e=function(e){let n=Number(e[0])||0;return 1e3*(Number(e[1])||0)+6e4*n}(t),n&&n(e)}return(0,t.jsxs)("div",{className:"pickerContainer rounded rounded2",children:[(0,t.jsx)(x.Z,{value:s[0],initialValue:0,minValue:0,maxValue:60,callback:e=>{r(e,0)}}),(0,t.jsx)("div",{className:"maxTimePickerContainer--separator",children:"m"}),(0,t.jsx)(x.Z,{value:s[1],initialValue:0,minValue:0,maxValue:60,callback:e=>{r(e,1)}}),(0,t.jsx)("div",{className:"maxTimePickerContainer--separator",children:"s"})]})},f=a(76142),v=function(e){let{onMaxTimeChange:n,onMaxPointsChange:a,showTimePicker:i,time:s,points:o}=e,{t:l}=(0,r.$G)(["main"]),c=f.Z.millisToTime(s),d=(0,t.jsx)(t.Fragment,{});return i&&(d=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:l("content.maxTimeText1")}),(0,t.jsx)(j,{onMaxTimeChange:n,minutes:c.m,seconds:c.s})]})),(0,t.jsxs)("div",{children:[d,(0,t.jsx)("p",{children:l("content.maxTimeText2")}),(0,t.jsx)("div",{className:"pickerContainer rounded rounded2",children:(0,t.jsx)(x.Z,{value:o,minValue:0,initialValue:0,callback:e=>{a(e)}})})]})},w=function(e){let{onZonesChange:n,value:a=1}=e,{t:i}=(0,r.$G)(["main"]);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[i("content.seleccionZonas"),":"]}),(0,t.jsx)("div",{className:"pickerContainer rounded rounded2",children:(0,t.jsx)(x.Z,{value:a,minValue:1,maxValue:40,callback:e=>{n(e)},initialValue:1})})]})},y=function(e){let{onGroupsChange:n,value:a,minValue:i,maxValue:s}=e,{t:o}=(0,r.$G)(["main"]);return c.s?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[o("content.selecciongrupos"),":"]}),(0,t.jsx)("div",{className:"pickerContainer horizontalScrollContainer rounded rounded2",children:(0,t.jsx)(x.Z,{minValue:i||1,maxValue:s||10,value:a,callback:e=>{n(e)},initialValue:1})})]})},b=function(e){let{onGatesChange:n,zones:a,value:i,minValue:s,maxValue:o}=e,{t:l}=(0,r.$G)(["main"]),c=[];for(let e=0;e<a;e++)c.push((0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"zoneName",children:[l("description.zona")," ",e+1,":"]},e),(0,t.jsx)("br",{},`br${e}`),(0,t.jsx)(x.Z,{minValue:s||1,maxValue:o||40,value:i,callback:a=>{n(a,e)},initialValue:1},`picker${e}`)]},`pickerContainer${e}`));return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[l("content.seleccionPuertas"),":"]}),(0,t.jsx)("div",{className:"gatesPickerContainer pickerContainer horizontalScrollContainer rounded rounded2",children:c})]})},T=a(11517),N=a(2635),A=function(e){let n,{onLocationResolved:a}=e,[s,o]=i.useState(0),[l,c]=i.useState({latitude:0,longitude:0}),{t:d}=(0,r.$G)(["main"]);return navigator.geolocation?0===s?n=(0,t.jsx)("a",{className:"bold",href:"https://crawlear.com",onClick:function(e){e.preventDefault(),navigator.geolocation?(o(2),navigator.geolocation.getCurrentPosition(e=>{let n={latitude:e.coords.latitude,longitude:e.coords.longitude};a(n),o(1),c(n)},()=>{a({}),o(0)})):o(0)},children:d("description.obtener")}):2===s?n=(0,t.jsx)(N.Z,{}):1===s&&(n=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["(",`${l.latitude},${l.longitude}`,")"]}),(0,t.jsx)("a",{href:f.Z.getMapsURL(l.latitude,l.longitude),rel:"noreferrer",target:"_blank",children:d("description.vergooglemaps")})]})):n=(0,t.jsx)("div",{className:"",children:d("content.nogeolocation")}),n},C=a(24025),k=a(65780),P=a(5163),G=a(1219),S=a(11218),R=a(31959),U=a(18492),F=e=>{let n=0,a=0;switch(e){case s.oP:n=C.zR.maxPoints,a=C.zR.maxTime;break;case s.te:n=S.wG.maxPoints,a=S.wG.maxTime;break;case s.UZ:n=k.nz.maxPoints,a=k.nz.maxTime;break;case s.HF:n=P.$z.maxPoints,a=P.$z.maxTime;break;case s.uG:n=G.UC.maxPoints,a=G.UC.maxTime;break;case s.Jo:n=R.Kp.maxPoints,a=R.Kp.maxTime;break;case s.Oh:n=U.GQ.maxPoints,a=U.GQ.maxTime;break;default:n=0,a=0}return[a,n]},V=a(16463),Z=function(e){let{preconfiguredGame:n,onGameCreated:a}=e,[t,o]=i.useState(()=>{let e=n||new s.lA("",new Date().toLocaleDateString(),{latitude:0,longitude:0},!0,s.HF,[],[],6e5,40,[,].fill(10),1,0,[],[],[]);return e.date=new Date().toLocaleDateString(),e}),l=(0,V.useRouter)(),[d,u]=i.useState(""),[m,g]=i.useState(!1),[h,x]=i.useState(1),{t:j}=(0,r.$G)(["main"]),v=window.crawlear.fb;function w(e){let n={...t},a="addJudge";t.judges.length>e.length&&(a="removeJudge"),p.Z.event("menu",a,e.length),n.judges=[...e],c.s&&!n.owner.length&&n.owner.push(s.UU),o(n),u("")}return i.useEffect(()=>{window.scrollTo(0,0),c.s&&w([s.vf])},[]),[t,d,h,function(e){let n={...t};p.Z.event("menu","playModeChange",e),n.gameType=e,[n.maxTime,n.maxPoints]=F(n.gameType),o(n)},function(e){if(e.latitude&&e.longitude){let n={...t};n.location=e,o(n)}else u(j("error.nogeolocation"))},w,function(e){let n={...t},a="addPlayer";t.players.length>e.length&&(a="removePlayer"),p.Z.event("menu",a,e.length),n.players=[...e],o(n),u("")},function(e){let n={...t};p.Z.event("menu","maxPointsSet",e),n.maxPoints=e,o(n)},function(e){let n={...t};n.maxTime=e,p.Z.event("menu","maxTimeSet",e),o(n)},function(e){let n={...t};t.zones<e?n.gates.push(10):n.gates.pop(),n.zones=e,p.Z.event("menu","zonesSet",e),o(n)},function(e,n){let a={...t};a.gates[n]=e,p.Z.event("menu","gateSet",e),o(a)},function(e){let n={...t},a=e.target.value;a&&(n.name=a,o(n),u(""))},function(e){x(e)},function(e){let n={...t};n.isPublic=e.target.value,o(n)},function(e,n){let a=t.judges[e].uid,i={...t};if(n&&!i.owner.find(e=>e===a))i.owner.push(a),o(i);else if(!n&&i.owner.find(e=>e===a)){let e=i.owner.indexOf(a);i.owner.splice(e,1),o(i)}},function(e){g(e.target.checked)},function(e,n){let t=function(e,n){let a=Array(e).fill(0);for(let e=0;e<n.players.length;e++)a[n.players[e].group]++;return void 0===a.find(e=>0===e)}(e,n);if(window.scrollTo(0,0),n.name&&n.name.length){if(t){if(n.judges.length||n.gameType===s.te){if(n.players.length){if(n.gameType===s.te||n.owner.length){if(n.gameType!==s.te&&t||n.gameType===s.te){let e={...n};n.gameType===s.te&&(e.judges.push({...window.crawlear.user}),e.zones=1,e.gates=[,].fill(1)),e.uids=f.Z.getUidsFromUsers(e.players),e.jids=f.Z.getUidsFromUsers(e.judges),m&&function(e){if(e.players.length){let n=[...e.players];n=n.sort((e,n)=>Math.random()-.5),e.players=n,s.zo.redoPlayersIds(e)}}(e),s.zo.init(e,s.zo.getGameTypeControlTextValuesInit(e.gameType),s.zo.getGameTypeFiascoControlTextValuesInit(e.gameType),!0),c.s&&a?a(e):v.setGame(e,n=>{e.gid=n.gid,v.createGameProgression(e),o(e),l.push("/game")},()=>{})}}else u(j("error.nodirectordepartida"))}else u(j("error.nojugadores"))}else u(j("error.nojueces"))}else u(j("error.rellenargrupos"))}else u(j("error.nonombre"))}]};a(53093);var z=function(e){let{preconfiguredGame:n,onGameCreated:a}=e,{t:l}=(0,r.$G)(["main"]),d=[];i.useEffect(()=>{window.crawlear&&window?.crawlear.user&&window?.crawlear.user.uid||c.s,p.Z.pageview("/gameconfigurator")},[]);let[u,m,g,x,j,f,N,C,k,P,G,S,R,U,F,V,z]=Z({preconfiguredGame:n,onGameCreated:a});return d.push((0,t.jsx)(v,{onMaxPointsChange:C,onMaxTimeChange:k,time:u.maxTime,points:u.maxPoints,showTimePicker:!0},0)),u.gameType===s.te||(d.push((0,t.jsx)(w,{value:u.zones,onZonesChange:P},1)),d.push((0,t.jsx)(b,{zones:u.zones,value:10,onGatesChange:G},2)),d.push((0,t.jsx)(y,{onGroupsChange:R,value:1,minValue:1,maxValue:10},3)),c.s||d.push((0,t.jsx)(h,{isForJudge:!0,maxGroups:g,inPlayers:u.judges,gameName:u.name,onGameDirectorChange:F,onPlayerNumerChange:f},4))),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Z,{message:m}),(0,t.jsx)("div",{className:"newGameContainer rounded rounded1",children:(0,t.jsxs)("div",{className:"newGame",children:[(0,t.jsx)("div",{className:"headerText bold",children:l("description.nuevaPartida")}),(0,t.jsxs)("div",{className:"newGameRow",children:[(0,t.jsx)("span",{className:"",children:l("description.nombre")}),": ",(0,t.jsx)("input",{value:u.name,className:"newGameNameInput",type:"text",onChange:S})]}),(0,t.jsxs)("div",{className:"newGameRow",children:[(0,t.jsx)("span",{className:"",children:l("description.fecha")}),": ",u.date.toLocaleString()]}),(0,t.jsxs)("div",{className:"newGameRow",children:[(0,t.jsx)("span",{className:"",children:l("description.esPublica")}),": ",(0,t.jsx)("input",{type:"checkbox",checked:u.isPublic,onChange:U})]}),(0,t.jsxs)("div",{className:"newGameRow",children:[(0,t.jsx)("span",{className:"",children:l("description.localizacion")}),":",(0,t.jsx)(A,{onLocationResolved:j})]})]})}),(0,t.jsx)(o,{selectedGameType:u.gameType,selectedPointsType:u.pointsType,onGameTypeChange:e=>{x(e)}}),d,(0,t.jsx)(h,{gameName:u.name,isForJudge:!1,inPlayers:u.players,maxGroups:g,onGameDirectorChange:()=>{},onPlayerNumerChange:e=>{N&&N(e)}}),(0,t.jsx)("input",{type:"checkbox",onChange:V}),l("description.ordenRamdomJugadores"),(0,t.jsxs)("p",{children:[(0,t.jsx)("button",{className:"importantNote",onClick:()=>{z(g,u)},children:l("description.crearjuego")}),(0,t.jsx)("button",{onClick:()=>{window.location.reload()},children:l("description.atras")})]})]})}},1746:function(e,n,a){"use strict";a.d(n,{s:function(){return t}}),a(57437),a(2265),a(69599),a(52759),a(72215);let t=!navigator.onLine},53093:function(){},21169:function(){},99331:function(){},46060:function(){},2209:function(){},95236:function(){},38033:function(){},14987:function(){},72215:function(){}}]);