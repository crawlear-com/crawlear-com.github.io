"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[5237],{28641:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(13907),r=n(96540),o=n(58219),i=n(55038),s=n(65627),c=n(98533);const l=function(e){let{gameType:t,gameProgression:n}=e;const{t:l}=(0,a.B)(["main"]);if(n.data){const{points:e,totalPoints:a,time:m,gateFails:d,gateProgression:u,simpathyPoints:p,handicap:g,bonitification:f}=n.data;let[E,b]=(0,s.kp)(t,l);return r.createElement(r.Fragment,null,r.createElement("ul",null,r.createElement("li",null,l("description.puntos"),": ",r.createElement("span",{className:"bold"},e)),u?r.createElement("li",null,l("description.avancepuerta"),": ",r.createElement("span",{className:"bold"},u)):r.createElement(r.Fragment,null),void 0!==d&&void 0!==f?r.createElement(r.Fragment,null,r.createElement("li",null,l("description.fallospuerta"),": ",r.createElement("span",{className:"bold"},d)),r.createElement("li",null,l("description.bonificacion"),": ",r.createElement("span",{className:"bold"},-2*f))):r.createElement(r.Fragment,null),void 0!==p?r.createElement("li",null,l("description.portiempo"),": ",r.createElement("span",{className:"bold"},p)):r.createElement(r.Fragment,null),void 0!==g?r.createElement("li",null,l("description.handicap"),": ",r.createElement("span",{className:"bold"},g)):r.createElement(r.Fragment,null),r.createElement("li",null,l("description.total"),": ",r.createElement("span",{className:"bold"},a)),r.createElement("li",null,l("description.tiempo"),": ",r.createElement("span",{className:"bold"},(0,i.tO)((0,i.vE)(m))))),r.createElement(o.A,{controlTextValues:n.data.gateProgressionData?(0,c._i)(n.data.gateProgressionData):n.data.controlTextValues,texts:E}),n.data.fiascoControlTextValues&&n.data.fiascoControlTextValues.filter((e=>e>0)).length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"fiascosText left bold"},l("points.fiascos"),":"),r.createElement(o.A,{controlTextValues:n.data.fiascoControlTextValues,texts:b})):r.createElement(r.Fragment,null))}return r.createElement(r.Fragment,null)}},75237:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Se});var a=n(96540),r=n(13907),o=n(65627),i=n(52698),s=n(55038);const c=(e,t,n)=>{e.addEventListener(t,n)},l=(e,t,n)=>{e.dispatchEvent(new CustomEvent(t,{detail:n}))},m=class{constructor(){this.container=document.querySelector(".AppMainContainer")}listenMessages(e,t){c(this.container,e,t)}sendMessage(e,t){l(this.container,e,t)}},d="BT_GATES",u="BT_POINTS",p="BT_START",g="BT_STOP",f="BT_TIME",E=class{constructor(){this.device={},this.timeCharacteristic={},this.timeValueCharacteristic={},this.pointsCharacteristic={},this.gatesCharacteristic={}}discoverDevice(e){navigator.bluetooth.requestDevice({filters:[{name:"CrawlearBluetoothDevice"},{services:["3feb1e8a-3981-4045-ad39-b225135013a0"]}]}).then((t=>(this.device=t,e&&e(t),t.gatt&&t.gatt.connect()))).then((e=>e&&e.getPrimaryService("3feb1e8a-3981-4045-ad39-b225135013a0"))).then((e=>{const t=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8"),n=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b1"),a=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b2"),r=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b3");return Promise.all([t,n,a,r])})).then((([e,t,n,a])=>{this.timeCharacteristic=e,this.timeValueCharacteristic=t,this.pointsCharacteristic=n,this.gatesCharacteristic=a})).catch((e=>{console.error(e)}))}sendTime(e){this.timeValueCharacteristic&&this.timeValueCharacteristic.writeValue((new TextEncoder).encode(e))}sendPoints(e){this.pointsCharacteristic&&this.pointsCharacteristic.writeValue((new TextEncoder).encode(e))}sendGates(e){this.gatesCharacteristic&&this.gatesCharacteristic.writeValue((new TextEncoder).encode(e))}sendStart(){if(this.timeCharacteristic){const e=Uint8Array.of(1);this.timeCharacteristic.writeValue(e)}}sendStop(){if(this.timeCharacteristic){const e=Uint8Array.of(0);this.timeCharacteristic.writeValue(e)}}};var b;!function(e){e.Play="play",e.Stop="stop",e.Pause="pause",e.Update="update"}(b||(b={}));const y=(e,t)=>{const n=Object.assign({},e),a=t.payload||{};switch(t.type){case b.Pause:n.state=b.Pause,n.timer=0;break;case b.Stop:n.state=b.Stop,n.millis=0,n.timer=0;break;case b.Play:n.state=b.Play,n.millis=a.millis,n.timer=a.timer,n.timeStart=a.timeStart;break;case b.Update:n.millis=t.payload.millis}return n};var h=n(38791);const x=(e,t,n,r,o,i,c)=>{const l=a.useMemo((()=>new m),[]),d=a.useRef(e||0),[u,E]=((e,t)=>{const n={millis:e||0,timer:0,maxTime:t,state:b.Pause,timeStart:Date.now()},[r,o]=a.useReducer(y,n);return[r,o]})(e,t);return[u,function(e){if(c&&c.current.classList.toggle("play"),e.state===b.Pause||e.state===b.Stop){const t=Date.now(),a=window.setInterval((()=>{!function(e){d.current<e.maxTime?(d.current=Date.now()-e.timeStart+e.millis,r&&r(d.current),E({type:b.Update,payload:{millis:d.current}}),Date.now()%2==0&&l.sendMessage(f,(0,s.tO)((0,s.vE)(d.current)))):function(e,t,n,a){return e&&t>0&&n>=t&&n<t+a||0===t}(o,e.maxTime,d.current,n)?(d.current=Date.now()-e.timeStart,r&&r(d.current),E({type:b.Update,payload:{millis:d.current}}),e.maxTime>0&&c&&!c.current.classList.contains("blink")&&c.current.classList.add("blink"),e.maxTime>0&&(e.maxTime+d.current)%1e4==0&&o()):(c&&c.current.classList.toggle("blink"),c&&c.current.classList.toggle("foreColorRed"),i&&i()),l.sendMessage(f,(0,s.tO)((0,s.vE)(d.current)))}(Object.assign(Object.assign({},e),{timeStart:t}))}),10);h.A.event("play","timePlay",""),c&&c.current.classList.remove("blink"),l.sendMessage(p,{}),e.timer&&window.clearInterval(e.timer),E({type:b.Play,payload:{millis:d.current,timer:a,timeStart:t}})}else h.A.event("play","timePause",""),l.sendMessage(g,{}),e.timer&&window.clearInterval(e.timer),E({type:b.Pause,payload:{millis:d.current}})},function(){d.current=0,c&&c.current.classList.contains("play")&&c.current.classList.toggle("play"),u.timer&&clearInterval(u.timer),c&&c.current.classList.remove("blink"),h.A.event("play","timeStop",""),E({type:b.Stop}),r&&r(d.current),l.sendMessage(g,{})}]};var v=n(85072),T=n.n(v),P=n(97825),C=n.n(P),k=n(77659),w=n.n(k),A=n(55056),N=n.n(A),z=n(10540),S=n.n(z),B=n(41113),O=n.n(B),j=n(27313),I={};I.styleTagTransform=O(),I.setAttributes=N(),I.insert=w().bind(null,"head"),I.domAPI=C(),I.insertStyleElement=S(),T()(j.A,I),j.A&&j.A.locals&&j.A.locals;const G=function(e){let{startTime:t,forceAction:n,label:o,onTimerChange:i,courtesyTime:c,maxTime:l,onPointBecauseLastMinute:m,onTimeFiasco:d}=e;const{t:u}=(0,r.B)(["main"]),p=a.useRef(null),[g,f,E]=x(t,l,c,i,m,d,p),y=(0,s.vE)(g.millis);return a.useEffect((()=>{n===b.Stop&&E(),n===b.Pause&&g.state===b.Play&&f(g)}),[n,g,f,E]),a.createElement("div",{ref:p,className:"timerContainer"},a.createElement("div",{className:"timerLabel"},(o||u("description.tiempo")).toUpperCase(),":"),a.createElement("div",{className:"timer"},(0,s.tO)(y)),a.createElement("button",{className:"timerPlayButton",onClick:()=>{f(g)}}),a.createElement("button",{onClick:E,className:"resetButton"}))};var F=n(98533),V=n(43841),M=n(91642);var D=n(93922),R={};R.styleTagTransform=O(),R.setAttributes=N(),R.insert=w().bind(null,"head"),R.domAPI=C(),R.insertStyleElement=S(),T()(D.A,R),D.A&&D.A.locals&&D.A.locals;const L=function(e){let{onGameEnd:t}=e;const{t:n}=(0,r.B)(["main"]);let o=[];const[s,c,l]=function({onGameEnd:e}){const{t}=(0,r.B)(["main"]),{game:n}=a.useContext(M.A),[o,i]=a.useState((()=>(V.T.texts=V.T.texts.map((function(e){return t(e)})),function(e){const t={game:e,order:[...e.players]};(0,F.Ts)(t.game,(0,F.DV)(t.game.gameType),(0,F.Q$)(t.game.gameType),!1);for(let e=0;e<t.game.players.length;e++)t.game.players[e].zones[0].gateProgressionData[0].controlTextValues=new Array(V.T.steps.length).fill(0);return t}(n))));return a.useEffect((()=>{h.A.pageview("/kinggame/")}),[]),[o,function(e,t,n){const a=Object.assign({},o),r=a.game.players,s=r[n].zones[0],c=s.gateProgressionData[0];c.controlTextValues=[...c.controlTextValues],c.controlTextValues[t]+=e,s.totalPoints+=e,s.points+=e,a.order=function(e,t){const n=[...t];return n.push(n.splice(e,1)[0]),n}(a.order.findIndex((e=>e.id===r[n].id)),a.order),i(a)},function(){e&&e(n)}]}({onGameEnd:t}),m=s.game;o.push(a.createElement(G,{key:"tmC",courtesyTime:0,startTime:0,label:n("description.tiempo"),maxTime:m.maxTime})),o.push(a.createElement("div",{key:0},n("description.ordenruta"),":"));for(let e=0;e<m.players.length;e++){let t="";(0,F.Ng)(m,s.order[e].zones[0])&&(t="blink foreColorRed"),o.push(a.createElement("div",{key:e+1},a.createElement("div",{className:"controlTextContainerQueue rounded bold ".concat(t)},s.order[e].name,": ",s.order[e].zones[0].totalPoints," ptos")))}o.push(a.createElement("p",{key:m.players.length+1},n("description.puntos").toUpperCase(),":"));for(let e=0;e<m.players.length;e++){let t,r=m.players[e],s=r.zones[0];o.push(a.createElement("div",{key:m.players.length+e+2,className:"playerInfo"},a.createElement("div",{className:"headerPlayer importantNote rounded2 rounded"},a.createElement("div",{className:"bold"},r.name),n("description.total"),": ",s.totalPoints,t),a.createElement("div",{className:"controlTextContainer rounded rounded1"},(0,i.A)({controlTextValuesString:"controlTextValues",steps:V.T.steps,maxValues:V.T.maxValues,texts:V.T.texts,zone:0,player:e,onValueChange:c}))))}return o.push(a.createElement("button",{key:2*m.players.length+2,className:"importantNote",onClick:l},n("description.fin"))),a.createElement("div",{key:2*m.players.length+3,className:"gameContainer"},o)};function Z(e,t){const n={tickTime:0,forceAction:"",game:e};return(0,F.Ts)(n.game,(0,F.DV)(n.game.gameType),(0,F.Q$)(n.game.gameType),t),n}const $=function({zoneIndex:e,playerIndex:t}){let n=a.createElement(a.Fragment,null);const{t:o}=(0,r.B)(["main"]),{game:i}=a.useContext(M.A),c=i.players[t],l=c.zones[e];return(0,F.kI)(i,t,e)&&(h.A.event("play","fiasco",c.name),n=a.createElement("div",{className:"fiascoBox rounded importantNote"},"FiASCO!")),a.createElement(a.Fragment,null,a.createElement("div",{className:"playersList"},a.createElement("div",{className:"playerListItem importantNote rounded"},a.createElement("img",{src:c.avatar,alt:"avatar"}),c.name)),a.createElement("div",{className:"controlTextContainer rounded rounded2"},a.createElement("div",{className:"smallText"},o("description.zona"),": ",e+1),a.createElement("div",{className:"smallText"},o("description.puertas"),": ",i.gates[e]),a.createElement("div",{className:"smallText"},"max ",o("description.tiempo"),": ",(0,s.tO)((0,s.vE)(i.maxTime))),a.createElement("div",{className:"smallText"},"max ",o("description.puntos"),": ",i.maxPoints),a.createElement("div",{className:"bold pointsText"},o("description.total"),": ",l.totalPoints),n))},q=function(){const[e,t]=a.useState(0),[n,r]=a.useState({}),o=new m,i=new E;function s(e){r(e),t(1),o.listenMessages(p,c),o.listenMessages(g,l),o.listenMessages(f,b),o.listenMessages(u,y),o.listenMessages(d,h)}function c(){i.sendStart()}function l(){i.sendStop()}function b(e){i.sendTime(e.detail)}function y(e){i.sendPoints(e.detail)}function h(e){i.sendGates(e.detail)}return 0===e?a.createElement("div",{className:"controlText",onClick:function(){i.discoverDevice(s)}},"Discover Bluetooth Device"):a.createElement("div",{className:"controlText"},n.name)},U=function({playerZone:e,forceAction:t,setRepairStatus:n,onTimerChange:o,onTimeFiasco:i,onPointBecauseLastMinute:c}){const{t:l}=(0,r.B)(["main"]),{game:m}=a.useContext(M.A);return a.createElement("div",{className:"controlTextContainer rounded rounded2"},(0,s.sf)()?a.createElement(a.Fragment,null):a.createElement(q,null),m.courtesyTime>0?a.createElement("div",{className:"pointsText"},l("description.puntos")," ",l("description.portiempo"),": ",e.simpathyPoints):a.createElement(a.Fragment,null),a.createElement("button",{className:"repairButton importantNote",onClick:n},l("description.iniciarreparacion")),a.createElement(G,{courtesyTime:m.courtesyTime,startTime:e.time,label:l("description.tiempo"),forceAction:t,onTimerChange:o,onTimeFiasco:i,onPointBecauseLastMinute:c,maxTime:m.maxTime}))};var _=n(1397),H=(n(49722),n(19905)),Q={};Q.styleTagTransform=O(),Q.setAttributes=N(),Q.insert=w().bind(null,"head"),Q.domAPI=C(),Q.insertStyleElement=S(),T()(H.A,Q),H.A&&H.A.locals&&H.A.locals;const J=function({playerIndex:e,zoneIndex:t,onGateProgressionChange:n}){const{t:o}=(0,r.B)(["main"]),{game:i,gameExtras:s}=a.useContext(M.A),c=(0,_.R3)(_.Ay);function l(a){const r="gatesPlusButton"===a.target.id,o=i.players[e].zones[t],s=i.gates[t];r?o.gateProgression<s&&n(o.gateProgression+1):o.gateProgression>0&&n(o.gateProgression-1)}const m=i.players[e].zones[t];return a.createElement("div",{className:"gateProgressionContainer controlTextContainer info rounded rounded2"},o("description.avancepuerta"),": ",m.gateProgression,a.createElement("button",{id:"gatesPlusButton",onClick:l,className:"buttonControlTextPlus"},"+"),a.createElement("button",{id:"gatesMinusButton",onClick:l,className:"buttonControlTextMinus"},"-"),a.createElement(c,{step:1,min:0,max:i.gates[t],dots:!0,value:m.gateProgression,onChange:n,marks:s.generateSliderMarksFromGates(m.gateProgressionData,m.gateProgression),tipFormatter:e=>m.gateProgression<i.gates[t]?String(e).concat("-").concat(m.gateProgressionData[m.gateProgression].gatePoints):"-"}))};var W=n(18282),K={};K.styleTagTransform=O(),K.setAttributes=N(),K.insert=w().bind(null,"head"),K.domAPI=C(),K.insertStyleElement=S(),T()(W.A,K),W.A&&W.A.locals&&W.A.locals;const X=function(e){let{children:t,onGameEnd:n,onRepair:o,playerIndex:i,zoneIndex:s}=e;const{t:c}=(0,r.B)(["main"]),l=[],[p,g,f,E,b,y,x,v,T,P]=function(e,t,n,r){const o=new m,{game:i,gameExtras:s}=a.useContext(M.A),[c,l]=a.useState((()=>(window.scrollTo(0,0),Z(i,!1)))),p=c.game.players[n].zones[r];return[c,function(e){const t=Object.assign({},c);if(!e){const e=t.game.players[n].zones[r];e.simpathyPoints=0,s.onTimerChange(e)}p.time=e,l(Object.assign(Object.assign({},t),{tickTime:e,forceAction:"play"}))},function(e,t){const a=Object.assign({},c),i=a.game,m=i.players[n].zones[r],d=m.gateProgressionData[m.gateProgression];(i.maxPoints<=m.points&&i.maxPoints>0||i.maxTime<=c.tickTime&&i.maxTime>0)&&!(m.points+e<=i.maxPoints&&0===m.fiascoControlTextValues.filter((e=>e>0)).length)||(d.controlTextValues=[...d.controlTextValues],d.controlTextValues[t]+=e,m.points+=e,m.gateProgression<i.gates[r]&&(d.gatePoints+=e),o.sendMessage(u,m.points),s.onChangeScore(m),l(a),(0,F.kI)(a.game,n,r)&&l(Object.assign(Object.assign({},c),{forceAction:"pause"})))},function(){let e=Object.assign({},c);window.scrollTo(0,0),h.A.event("play","reset",e.game.players[n].name),e=Z(e.game,!0),e.forceAction="stop",l((t=>Object.assign(Object.assign({},t),e)))},function(){const t=Object.assign({},c),a=t.game,o=a.players;window.scrollTo(0,0),s.onEndPlayer(a,c.tickTime,n,r),t.forceAction="stop",l(t),h.A.event("play","endPlayer",o[n].name),document.body.classList.remove((0,F.Cm)(i.gameType)),e(t.game)},function(e){const t=Object.assign({},c),a=t.game.players[n].zones[r];a.gateProgression=e,o.sendMessage(d,a.gateProgression),e===t.game.gates[r]&&(t.forceAction="pause"),s.onGateProgressionChange(a),l(t)},function(e,t){const a=Object.assign({},c),o=a.game.players[n].zones[r];o.fiascoControlTextValues=[...o.fiascoControlTextValues],o.fiascoControlTextValues[t]+=e,o.fiascoControlTextValues[t]>0&&(a.forceAction="pause"),s.onFiascoChangeScore(),l(a)},function(){const e=Object.assign({},c),t=e.game.players[n].zones[r];t.simpathyPoints++,s.onPointBecauseLastMinute(t),l(e)},function(){const e=Object.assign({},c);l(Object.assign(Object.assign({},e),{tickTime:i.maxTime+i.courtesyTime,forceAction:"pause"}))},function(){const e=Object.assign({},c);e.game.players[n].zones[r].time=c.tickTime,e.forceAction="stop",l(e),t&&t(n,r)}]}(n,o,i,s),C=p.game,k=C.players[i],w=k.zones[s];return t.length&&(l.push(a.cloneElement(t[0],{onValueChange:f})),t[2]?(l.push(a.cloneElement(t[1],{onValueChange:x})),l.push(a.cloneElement(t[2]))):l.push(a.cloneElement(t[1])),t[3]&&l.push(a.cloneElement(t[3]))),a.createElement("div",{className:"gameContainer"},a.createElement($,{playerIndex:i,zoneIndex:s}),a.createElement(U,{playerZone:w,forceAction:p.forceAction,setRepairStatus:P,onTimerChange:g,onTimeFiasco:T,onPointBecauseLastMinute:v}),a.createElement(J,{playerIndex:i,zoneIndex:s,onGateProgressionChange:y}),a.createElement("div",{className:"controlTextContainer rounded rounded2"},l[2],w.gateProgression<C.gates[s]?l[0]:a.createElement(a.Fragment,null),w.gateProgression<C.gates[s]?l[1]:a.createElement(a.Fragment,null)),l[3],a.createElement("button",{onClick:E,className:"resetButton"},c("description.reset")),a.createElement("button",{className:"importantNote",onClick:()=>{b()}},c("description.finjugador")," (",k.name,")"),a.createElement("p",null))},Y=function({game:e,player:t,zone:n,onGameEnd:r,onRepair:o,gameExtras:i,children:s}){const[c,l]=a.useState(e),m=[],d={game:c,setGame:l,gameExtras:i};return a.useEffect((()=>{i.doPageView()}),[i]),1!==c.gameType?m.push(a.createElement(X,{key:1,onGameEnd:e=>{r(e)},onRepair:o,playerIndex:t,zoneIndex:n},s)):m.push(a.createElement(L,{key:0,onGameEnd:e=>{r(e)}})),a.createElement(M.A.Provider,{value:d},m)};var ee=n(56812),te=n(788);const ne=a.createContext();var ae=n(52811),re={};re.styleTagTransform=O(),re.setAttributes=N(),re.insert=w().bind(null,"head"),re.domAPI=C(),re.insertStyleElement=S(),T()(ae.A,re),ae.A&&ae.A.locals&&ae.A.locals;const oe=function(e){let{onTimeFiasco:t,onRepairTimerChange:n}=e;const{t:o}=(0,r.B)(["main"]);return a.createElement("div",{className:"repairTimeContainer"},a.createElement(G,{courtesyTime:0,label:o("points.reparacion"),onTimeFiasco:t,onTimerChange:n,maxTime:18e5}))},ie=function({setTime:e,gid:t,playerId:n,group:o,zoneIndex:i,zone:s,onRepairEnd:c,playerAvatar:l}){const{t:m}=(0,r.B)(["main"]),d=new Date(e).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});return a.createElement("div",{key:n,className:"repairProgressionItem rounded rounded2"},a.createElement("div",{className:"repairProgressionItemHead"},a.createElement("img",{src:l,alt:"player avatar"}),a.createElement("span",{className:"repairProgressionItemZone"},m("description.zona"),": ",i+1),a.createElement("span",{className:"gameProgressionItemHour"},m("description.enreparaciondesde")," ",d)),a.createElement(oe,{onTimeFiasco:()=>{},onRepairTimerChange:()=>{}}),a.createElement("button",{onClick:()=>{!function(e,t,n,a,r){window.confirm(m("content.finalizarreparacion"))&&c&&c(e,t,n,a,r)}(t,n,o,i,s)},className:"importantNote"},m("description.fin")))};var se=n(51541),ce={};ce.styleTagTransform=O(),ce.setAttributes=N(),ce.insert=w().bind(null,"head"),ce.domAPI=C(),ce.insertStyleElement=S(),T()(se.A,ce),se.A&&se.A.locals&&se.A.locals;const le=function({gameProgression:e,gid:t,players:n,onRepairEnd:o}){const{t:i}=(0,r.B)(["main"]),s=[];return e&&Object.entries(e).forEach((e=>{Object.entries(e[1]).forEach((r=>{Object.entries(r[1]).forEach(((i,c)=>{if("repair"===i[1].status){const l=n[r[0]];s.push(a.createElement(ie,{key:l.name,setTime:i[1].repairData.setTime,gid:t,playerId:l.id,group:Number(e[0]),zoneIndex:c,zone:i[1],onRepairEnd:o,playerAvatar:l.avatar}))}}))}))})),a.createElement("div",{className:"repairProgressionContainer"},s.length?s:i("description.nohayreparaciones"))},me=function({numZones:e,gameProgression:t}){const{t:n}=(0,r.B)(["main"]),o=[];for(let r=0;r<e;r++){let e=[];Object.entries(t).forEach(((t,o)=>{let i=0;Object.entries(t[1]).forEach(((e,t)=>{e[1]&&e[1][r]&&"done"===e[1][r].status&&e[1][r].data&&i++})),i===Object.entries(t[1]).length&&e.push(a.createElement("span",{key:`dG${r}`,className:"directorGroup"},n("description.grupo")," ",o+1))})),o.push(a.createElement("div",{key:`dZ${r}`,className:"directorZone horizontalScrolling"},n("description.zona")," ",r+1,": ",e))}return a.createElement(a.Fragment,null,[o])};var de=n(8528),ue={};ue.styleTagTransform=O(),ue.setAttributes=N(),ue.insert=w().bind(null,"head"),ue.domAPI=C(),ue.insertStyleElement=S(),T()(de.A,ue),de.A&&de.A.locals&&de.A.locals;const pe=function(e){let{game:t,gameProgression:n}=e;const{t:o}=(0,r.B)(["main"]),[i,s]=function(e,t){const n=window.crawlear.fb,[r,o]=a.useState(new Map);return a.useEffect((()=>{function t(e,t){"pending"===t.status&&o((n=>{const a=new Map(n);return a.set(e,t),a}))}0===r.size&&n.getDirectorPresenceRequest(e,t,t)}),[n,e,r]),[r,function(a){if(window.confirm(t("content.aceptarpresencia"))){const t=new Map(r);t.delete(a),o(t),n.acceptDirectorPresenceRequest(e,a)}}]}(t.gid,o),c=[];return(0,F.SS)(t.owner)?(c.push(a.createElement("div",{key:"zC",className:""},o("content.zonascompletadas"))),c.push(a.createElement(me,{key:t.name,gameProgression:n,numZones:t.zones})),c.push(a.createElement("p",{key:"pdp",className:"bold"},o("description.peticionesdepresencia"),":")),i||c.push(a.createElement("p",{key:"npsp",className:""},o("description.nopeticionespresencia"))),i&&Array.from(i.keys()).forEach(((e,t)=>{const n=i.get(e);c.push(a.createElement("div",{key:"dR".concat(t),className:"directorRequestContainer blink"},a.createElement("div",null,a.createElement("div",null,o("description.de")," ",n.fromName),a.createElement("div",null,o("description.zona"),": ",n.zone+1),a.createElement("div",null,o("description.jugador"),": ",n.playerName),a.createElement("div",null,o("description.estado"),": ",n.status)),a.createElement("div",null,a.createElement("button",{onClick:()=>{s(e)}},o("description.aceptar")))))})),a.createElement("div",{key:"dP",className:"directorContainer rounded rounded3"},a.createElement("div",{className:"bold"},o("description.directordepartida")),a.createElement("br",null),a.createElement(a.Fragment,null,[c]))):a.createElement(a.Fragment,null)};var ge,fe,Ee=n(28641);(fe=ge||(ge={})).waiting="waiting",fe.playing="playing",fe.repair="repair",fe.done="done";const be=function({zoneIndex:e,zones:t,selectedPlayer:n,selectedZone:o,player:i,gameProgression:s,prepareOnClick:c,resolveGameStatus:l}){const{t:m}=(0,r.B)(["main"]);return t.map(((t,r)=>{let d=i.id===n&&e===o?"colorGrey rounded":"rounded";if(s&&s[i.group]&&s[i.group][i.id]){const n=s[i.group][i.id][e].status,o=s[i.group][i.id][e].data;return n===ge.playing?d+=" colorOrange":n===ge.repair?d+=" colorRed":n===ge.done?d+=" colorGreen":n===ge.waiting&&o&&(d+=" colorClearGrey"),a.createElement("span",{"data-zone":e,key:`zone${i.name}${e}${r}`,onClick:e=>{c(e,i,t)},className:d},m("description.zona")," ",e+1,a.createElement("br",null),a.createElement("div",null,m("description.estado"),":"),a.createElement("div",null,l(m,n,o)))}return a.createElement("span",{key:`zone${i.name}${e}${r}`})}))},ye=function(e){let{game:t,jidGroup:n,onZoneClick:o}=e;const{t:i}=(0,r.B)(["main"]),[s,c,l,m,d,u]=function(e,t,n){const[r,o]=a.useState(-1),[i,s]=a.useState(-1),[c]=a.useContext(ne);function l(){e(-1,-1),s(-1),o(-1)}return[function(){const e=new Array(n.zones).fill(!1);return c&&Object.entries(c).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{"playing"===t[1].status&&!e[n]&&(e[n]=!0)}))}))})),function(e){const n=[];return e.forEach(((e,r)=>{const o=[];o.push(a.createElement("span",{key:r},t("description.zona")," ",r+1,": ")),e?o.push(a.createElement("span",{key:`dG${r}`,className:"directorGroup colorRed"},t("description.ocupado"))):o.push(a.createElement("span",{key:`div${r}`},a.createElement("span",{className:"directorGroup"},t("description.libre")),a.createElement("br",null))),n.push(a.createElement("div",{key:`dZ${r}`,className:"directorZone"},o))})),a.createElement("div",{className:""},n)}(e)},function(t,n){var a;const m=t.target,d=Number(null===(a=m.closest("[data-zone]"))||void 0===a?void 0:a.getAttribute("data-zone")),u=c[n.group][n.id][d].status;r===d&&i===n.id?l():u===ge.waiting||u===ge.done||u===ge.playing?(s(n.id),o(d),e(n,d)):l()},function(e,t,n){let a;switch(t){case ge.waiting:a=e(n?"description.reparacionfinalizada":"description.waiting");break;case ge.done:a=e("description.done");break;case ge.repair:a=e("description.repair");break;case ge.playing:a=e("description.playing");break;default:a=e("description.waiting")}return a},c,i,r]}(o,i,t),p=[];let g=0;return p.push(a.createElement("div",{key:"eZ",className:""},i("content.estadozona"))),p.push(a.createElement("div",{key:"nAz"},s())),p.push(a.createElement("p",{key:"header"},i("content.seleccionapilotoyzona"),":")),t.players.forEach((e=>{let r=[],o=0;if(e.group===n||(0,F.SS)(t.owner)){if(r=a.createElement(be,{zoneIndex:o,zones:e.zones,selectedPlayer:d,selectedZone:u,player:e,gameProgression:m,prepareOnClick:c,resolveGameStatus:l}),p.push(a.createElement("div",{key:"".concat(e.name).concat(g).concat(o),className:"gameProgressionItem rounded rounded1"},a.createElement("div",{className:"gameProgressionItemHeader"},a.createElement("img",{src:e.avatar,alt:"player avatar"}),e.name," ",a.createElement("br",null),i("description.grupo")," ",e.group+1),a.createElement("div",{className:"horizontalScrollContainer"},r))),d>=0&&u>=0){const n=m[e.group][d][u];e.id===d&&n.data&&p.push(a.createElement("div",{key:"".concat(g+o,"Info"),className:"gameProgressionInfoItem smallText rounded rounded2"},a.createElement(Ee.A,{gameType:t.gameType,gameProgression:n})))}o++,g++}})),a.createElement(a.Fragment,null,p)};var he=n(34816);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pe=function(e){let{game:t,playerName:n,fromName:o,zone:i}=e;const{t:s}=(0,r.B)(["main"]),c=window.crawlear.fb,l=[],m=t.gid,d=[],[u,p]=a.useState({});function g(e,t){if("pending"===e.status){const n=ve({},u);n[t]=e,p(n)}else if("accepted"===e.status){const e=ve({},u);delete e[t],p(e)}}return m&&n&&o&&i>=0&&!(0,F.SS)(t.owner)&&0===Object.entries(u).length&&l.push(a.createElement("button",{key:n,onClick:function(){window.confirm(s("content.quieresenviarpeticiondepresencia"))&&c.setDirectorPresenceRequest(m,i,n,o,g)}},s("description.reclamarpresencia"))),Object.keys(u).forEach(((e,t)=>{d.push(a.createElement("div",{key:"".concat(n).concat(t)},u[e].status))})),a.createElement("div",{className:"presenceButtonContainer"},l,d)},Ce=function({game:e,player:t,zone:n,jidGroup:r,onBeginPlayClick:o,t:i}){if(e.jids.find((e=>e===window.crawlear.user.uid))){let s=a.createElement(a.Fragment,null);return(t&&t.group===r||(0,F.SS)(e.owner))&&(s=a.createElement("button",{onClick:o,className:"playButton importantNote"},i("description.empezar"))),a.createElement(a.Fragment,null,i("description.jugadorseleccionado"),": ",t?t.name:""," ",a.createElement("br",null),i("description.zonaseleccionada"),": ",-1!==n?n+1:"",a.createElement("br",null),s,a.createElement(Pe,{game:e,zone:n,playerName:t&&t.name,fromName:window.crawlear.user.displayName}))}return a.createElement(a.Fragment,null)},ke=function({game:e,jidGroup:t,onBeginGame:n,onBackButtonClick:i,onCloseButonClick:s}){const{t:c}=(0,r.B)(["main"]),[l,m,d,u,p,g]=function(e){const[t,n]=a.useState(null),[i,s]=a.useState(-1),[c,l]=a.useState(""),[m]=a.useContext(ne),{t:d}=(0,r.B)(["main"]);return[t,i,c,m,function(e,t){s(t),n(e),l("")},function(){if(t&&-1!==i){const n=t.id,a=t.group,r=m[a][n][i];r.status===o.fm&&window.confirm(d("content.quieresempezarzona"))||r.status===o.E7&&window.confirm(d("content.quiereseditarpartida"))||r.status===o.iB&&window.confirm(d("content.seguroeditarpartidaenjuego"))?(l(""),e(t,i)):r.status===o.iB?l(d("error.juegoencurso")):r.status===o.xu&&l(d("error.reparacionencurso"))}}]}(n);return a.createElement(a.Fragment,null,a.createElement(pe,{game:e,gameProgression:u}),a.createElement(he.A,{message:d}),a.createElement("div",{className:"trackJudgeContainer rounded rounded3"},a.createElement("div",{className:"bold"},c("description.juezdepista")),a.createElement(ye,{onZoneClick:p,game:e,jidGroup:t}),a.createElement(he.A,{message:d}),a.createElement(Ce,{t:c,game:e,player:l,zone:m,jidGroup:t,onBeginPlayClick:g})),a.createElement("div",{className:"tendJudgeContainer rounded rounded3"},a.createElement("div",{className:"bold"},c("description.juezdecarpa")),a.createElement(le,{gameProgression:u,gid:e.gid,players:e.players,onRepairEnd:o.Gv})),a.createElement("button",{className:"backButton",onClick:i},c("description.atras")),(0,F.SS)(e.owner)&&(0,o.iO)(e,u,t)?a.createElement("button",{className:"closeButton importantNote",onClick:()=>{s(e)}},c("description.cerrarpartida")):a.createElement(a.Fragment,null))},we=function({game:e,onBeginGame:t,onGameEnd:n,onBackButtonClick:r,onClosePlayButtonClick:o,jidGroup:i,gameProgression:s,setGameProgression:c}){let l=a.createElement(a.Fragment,null);return l=e.gameType===te.c0?a.createElement(Y,{game:e,onGameEnd:n,gameExtras:V._U}):a.createElement(ne.Provider,{value:[s,c]},a.createElement(ke,{game:e,jidGroup:i,onBeginGame:t,onBackButtonClick:r,onCloseButonClick:o})),l};var Ae=n(82155),Ne=n(34552),ze={};ze.styleTagTransform=O(),ze.setAttributes=N(),ze.insert=w().bind(null,"head"),ze.domAPI=C(),ze.insertStyleElement=S(),T()(Ne.A,ze),Ne.A&&Ne.A.locals&&Ne.A.locals;const Se=function(e){let{inGame:t,onBackButtonClick:n}=e,i=a.createElement(a.Fragment,null);const{t:s}=(0,r.B)(["main"]),c=(0,o.cO)(t.gameType),[l,m,d,u,p,g,f,E,b,y]=(0,Ae.Ay)(t,c),h=(0,o.qf)(m.gameType,p.id,g),[x]=a.useState((()=>(0,o.Pn)(m,window.crawlear.user.uid)));return l===Ae.hE?i=a.createElement(we,{game:m,onBeginGame:f,onGameEnd:b,onBackButtonClick:n,onClosePlayButtonClick:E,jidGroup:x,gameProgression:d,setGameProgression:u}):l===Ae.r0?i=a.createElement(Y,{player:p.id,zone:g,game:m,gameExtras:c,onGameEnd:b,onRepair:y},h):l===Ae.NE&&(i=a.createElement("div",{className:"gameList"},a.createElement(ee.A,{game:m}),a.createElement("button",{className:"backButton",onClick:n},s("description.atras")))),i}},18282:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".totalValue{font-size:26px}.totalTimeContainer{margin:10px;padding:10px;font-size:.8em}.repairButton{display:block;margin:10px auto}.generic .gateProgressionContainer{width:26%;float:left;margin:0 10px 0 10px}.generic .gatePoints{padding:0px;width:18px}.generic .controlTextText{width:auto}.gateProgressionContainer .buttonControlTextPlus,.gateProgressionContainer .buttonControlTextMinus{width:35px;height:35px}.gatesContainer{margin:10px;padding:10px;font-size:.8em}.player{padding-bottom:10px}.pointsText{display:inline-block}.fiascoBox{font-size:17px;width:65px;padding:10px;float:left;margin:10px}.fiascoBox .importantNote{margin-bottom:15px}.info{font-size:.8em}.controlTextContainer .timerContainer{float:none;margin:0 auto}",""]);const s=i},34552:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".gameProgressionItem{padding:15px;font-size:.7em;display:flex;margin-bottom:10px}.gameProgressionItem .gameProgressionItemHeader{max-width:25%}.gameProgressionItem img{display:block;max-width:90px;max-height:45px;width:auto;height:auto;border-radius:15px}.gameProgressionItem .rounded{background-image:none;margin:8px;box-shadow:none}.tendJudgeContainer{margin-top:15px}.directorContainer{margin-bottom:15px}.directorGroup{background-color:green;color:#fff;border-radius:8px;padding:3px;font-size:.8em;margin-right:5px}.directorZone{margin:5px 0}.gatePoints{padding:5px;border-radius:15px;color:#fff}",""]);const s=i},8528:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".directorRequestContainer{margin-top:15px;border:1px solid red;border-radius:15px}",""]);const s=i},93922:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".controlTextContainerQueue{background-color:#ffa602;border-radius:15px;margin:10px;font-size:15px;padding:5px}",""]);const s=i},51541:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".repairProgressionContainer{margin:25px}.repairProgressionItem{margin:10px}.repairProgressionItem .repairProgressionItemHead{font-size:.8em}.repairProgressionItem .repairProgressionItemHead{text-align:left}.repairProgressionItem img{border-radius:15px;margin-right:15px;display:inline-block;max-width:40px}.repairProgressionItem .timerContainer{margin:0 auto;width:100%}.gameProgressionItemHour{margin:0 10px}",""]);const s=i},52811:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".repairTimerContainer .timerContainer{padding:0}",""]);const s=i},27313:(e,t,n)=>{n.d(t,{A:()=>E});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o),s=n(4417),c=n.n(s),l=new URL(n(89805),n.b),m=new URL(n(58931),n.b),d=new URL(n(57725),n.b),u=i()(r()),p=c()(l),g=c()(m),f=c()(d);u.push([e.id,`.timerContainer{font-size:.8em;width:43%;margin:0 auto}.timerContainer button{width:36px;height:48px;background-repeat:no-repeat;background-size:25px;background-position:center;margin:5px 11px}.timerContainer .timer{border:1px solid;border-radius:15px;max-width:163px;margin:0 auto}.timerContainer .timerPlayButton{background-image:url(${p})}.timerContainer .resetButton{background-image:url(${g})}.timerContainer.play .timerPlayButton{background-image:url(${f})}body.lightMode .playButton{background-color:#a0bcc2}`,""]);const E=u},19905:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".rc-slider{width:80%;height:47px;margin:15px auto}.rc-slider-rail{background-color:#333}.rc-slider-track{background-color:#aaa}.rc-slider-dot{border-color:#666}.rc-slider-handle,.rc-slider-dot.rc-slider-dot-active{border-color:#fff;border-top-left-radius:0px;border-bottom-left-radius:0px;border-top-right-radius:75px;border-bottom-right-radius:75px}.rc-slider-mark-text{color:#000;padding-bottom:50%}body.lightMode .rc-slider-handle{background-color:#333}body.lightMode .rc-slider-rail{background-color:#333}body.lightMode .rc-slider-track{background-color:#aaa}body.lightMode .rc-slider-dot{border-color:#666}",""]);const s=i},82155:(e,t,n)=>{n.d(t,{Ay:()=>u,NE:()=>d,hE:()=>l,r0:()=>m});var a=n(96540),r=n(6932),o=n(65627),i=n(13907),s=n(98533),c=n(55038);const l=0,m=1,d=2,u=function(e,t){const[n,u]=a.useState(l),[p,g]=a.useState(!1),[f,E]=a.useState(e),[b,y]=a.useState([]),h=a.useRef([]),[x,v]=a.useState(-1),T=window.crawlear.fb,{t:P}=(0,i.B)(["main"]),[C,k]=a.useState({name:"",avatar:"",group:0,id:0,zones:[],uid:""});return a.useEffect((()=>{const e=(e,t)=>{const n={};n[e]=t,E((0,o.PD)(t,f)),h.current=Object.assign(Object.assign({},h.current),n),y(Object.assign(Object.assign({},h.current),n))};p||(r.isOffline?y((0,s.WZ)(f.zones,f.players.length)):window.crawlear.fb.getGameProgression(f.gid,(()=>{}),(()=>{}),e,e),g(!0))}),[f,p]),[n,f,b,y,C,x,function(e,t){const n=e.id,a=e.group;u(m),k(e),v(t),b[a][n][t].status=o.iB,y(b),T.setGameProgression(f.gid,n,a,t,b[a][n][t])},function(e,n){if((0,o.iO)(e,b,n)&&window.confirm(P("content.cerrarpartida"))&&!r.isOffline)T.getGameResult(e,(e=>{let n=Object.assign({},e);n.gameStatus=2,t.onGameEnd(n),n=(0,c.Tg)(n),T.updateGame(n),T.removeGameProgression(n.gid),E(n),u(d)}),(()=>{}));else if(r.isOffline){const t=(0,c.Tg)(e);E((0,s.yA)(t,b)),u(d)}},function(e){if((0,o.Gw)(f)){t.onGameEnd(f);const e=(0,c.Tg)(f);e.gameStatus=2,T.updateGame(e),T.removeGameProgression(e.gid),T.removeDirectorPresenceRequest(e.gid),u(d),E(e)}else{const t=C.id,n=C.group,a=Object.assign({},b),r=Object.assign({},f);a[n][t][x].status=o.E7,a[n][t][x].data=e.players[t].zones[x],!a[n][t][x].data.judgedBy&&(a[n][t][x].data.judgedBy=[]),a[n][t][x].data.judgedBy.push(window.crawlear.user.uid),y(a),r.players[t].zones[x]=a[n][t][x].data,T.setGameProgression(r.gid,t,n,x,a[n][t][x]),u(l),E(r)}},function(e,t){const n=Object.assign({},b),a=f.players[e],r=a.group,i=a.id;n[r][e][t].status=o.xu,n[r][e][t].repairData={setTime:(new Date).getTime()},n[r][e][t].data=a.zones[t],y(n),T.setGameProgression(f.gid,i,r,t,n[r][i][t]),u(l)}]}},57725:(e,t,n)=>{e.exports=n.p+"c3934397bbea4f4b413d.png"},89805:(e,t,n)=>{e.exports=n.p+"4e8d84bf42ab7e35ed38.png"},58931:(e,t,n)=>{e.exports=n.p+"7df5afd41f704db43dad.png"}}]);