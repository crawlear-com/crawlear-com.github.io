"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[531],{81397:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(96540),r=n(18492),o=n(28641),i=n(788),s=n(79887);const c="waiting",l="playing",u="done",m=function(e){let{game:t,jidGroup:n,onZoneClick:m}=e;const{t:d}=(0,r.B)(["main"]),[p,f]=a.useState(-1),[g,E]=a.useState(-1),T=a.useRef(),[v,h]=a.useContext(s.GameProgressionContext),_=[];let y=0;function b(){m(-1,-1),E(-1),f(-1)}return _.push(a.createElement("div",{key:"eZ",className:""},d("content.estadozona"))),_.push(a.createElement("div",{key:"nAz"},function(){const e=new Array(t.zones).fill(!1);return v&&Object.entries(v).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{"playing"===t[1].status&&!e[n]&&(e[n]=!0)}))}))})),function(e){const t=[];return e.forEach(((e,n)=>{const r=[];r.push(a.createElement("span",{key:n},d("description.zona")," ",n+1,": ")),e?r.push(a.createElement("span",{key:"dG".concat(n),className:"directorGroup colorRed"},d("description.ocupado"))):r.push(a.createElement("span",{key:"div".concat(n)},a.createElement("span",{className:"directorGroup"},d("description.libre")),a.createElement("br",null))),t.push(a.createElement("div",{key:"dZ".concat(n),className:"directorZone"},r))})),a.createElement("div",{className:""},t)}(e)}())),_.push(a.createElement("p",{key:"header"},d("content.seleccionapilotoyzona"),":")),t.players.forEach(((e,r)=>{let s,h=[],G=0;(e.group===n||i.GameUtils.isCurrentUserIsOwner(t.owner))&&(e.zones.forEach((t=>{s=e.id===g&&G===p?"colorGrey rounded":"rounded",v&&v[e.group]&&v[e.group][e.id]&&(v[e.group][e.id][G].status!==c?v[e.group][e.id][G].status===l?s+=" colorOrange":"repair"===v[e.group][e.id][G].status?s+=" colorRed":v[e.group][e.id][G].status===u&&(s+=" colorGreen"):v[e.group][e.id][G].data&&(s+=" colorClearGrey"),h.push(a.createElement("span",{"data-zone":G,onClick:t=>{!function(e,t){const n=Number(e.target.closest("[data-zone]").getAttribute("data-zone")),a=v[t.group][t.id][n].status;p===n&&g===t.id?b():a===c||a===u||a===l?(E(t.id),f(n),m(t,n)):b()}(t,e)},key:G+1,className:s},a.createElement("div",null,d("description.zona")," ",G+1),a.createElement("br",null),a.createElement("div",null,d("description.estado"),":"),a.createElement("div",null,function(e,t,n){let a;switch(t){case"waiting":a=e(n?"description.reparacionfinalizada":"description.waiting");break;case"done":a=e("description.done");break;case"repair":a=e("description.repair");break;case"playing":a=e("description.playing");break;default:a=e("description.waiting")}return a}(d,v[e.group][e.id][G].status,v[e.group][e.id][G].data))))),G++})),_.push(a.createElement("div",{key:y+G,className:"gameProgressionItem rounded rounded1"},a.createElement("div",null,a.createElement("img",{src:e.avatar,alt:"player avatar"}),e.name," ",a.createElement("br",null),d("description.grupo")," ",e.group+1),a.createElement("div",{className:"horizontalScrollContainer"},h))),g>=0&&p>=0&&e.id===g&&v[e.group][g][p].data&&_.push(a.createElement("div",{key:"".concat(y+G,"Info"),className:"gameProgressionInfoItem smallText rounded rounded2"},a.createElement(o.A,{gameType:t.gameType,innerRef:T,gameProgression:v[e.group][g][p]}))),y++)})),a.createElement(a.Fragment,null,_)}},6837:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(96540),r=n(18492);const o=function(e){let{game:t,gameProgression:n}=e;const{t:o}=(0,r.B)(["main"]),i=window.crawlear.fb,s=a.useRef(),[c,l]=a.useState({}),u=[];function m(e,t){if("pending"===t.status){const n={};n[e]=t,s.current={...s.current,...n},l(s.current)}}function d(e,t){if("pending"===t.status){const n={};n[e]=t,s.current={...s.current,...n},l(s.current)}}u.push(a.createElement("div",{key:"zC",className:""},o("content.zonascompletadas"))),a.useEffect((()=>{i.getDirectorPresenceRequest(t.gid,m,d)}),[]);for(let e=0;e<t.zones;e++){let t=[];Object.entries(n).forEach(((n,r)=>{let i=0;Object.entries(n[1]).forEach(((t,n)=>{t[1]&&t[1][e]&&"done"===t[1][e].status&&t[1][e].data&&i++})),i===Object.entries(n[1]).length&&t.push(a.createElement("span",{key:"dG".concat(e),className:"directorGroup"},o("description.grupo")," ",r+1))})),u.push(a.createElement("div",{key:"dZ".concat(e),className:"directorZone horizontalScrolling"},o("description.zona")," ",e+1,": ",t))}return u.push(a.createElement("p",{key:"pdp",className:"bold"},o("description.peticionesdepresencia"),":")),s.current||u.push(a.createElement("p",{key:"npsp",className:""},o("description.nopeticionespresencia"))),s.current&&Object.keys(s.current).forEach(((e,n)=>{const r=s.current[e];u.push(a.createElement("div",{key:"dR".concat(n),className:"directorRequestContainer blink"},a.createElement("div",null,a.createElement("div",null,o("description.de")," ",r.fromName),a.createElement("div",null,o("description.zona"),": ",r.zone+1),a.createElement("div",null,o("description.jugador"),": ",r.playerName),a.createElement("div",null,o("description.estado"),": ",r.status)),a.createElement("div",null,a.createElement("button",{onClick:()=>{!function(e){if(window.confirm(o("content.aceptarpresencia"))){const n={...s.current};delete n[e],l(n),s.current=n,i.acceptDirectorPresenceRequest(t.gid,e)}}(e)}},o("description.aceptar")))))})),a.createElement(a.Fragment,null,[u])}},28641:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(18492),r=n(96540),o=n(9928),i=n(55038),s=n(42578),c=n(842),l=n(3442),u=n(46662),m=n(98784),d=n(90598),p=n(788);const f=function(e){let{gameType:t,gameProgression:n}=e;const{t:f}=(0,a.B)(["main"]);if(n.data){const e=n.data.points,a=n.data.totalPoints,g=n.data.time,E=n.data.gatesWithFail,T=n.data.gateProgression,v=n.data.simpathyPoints,h=n.data.handicap,_=n.data.gatesWithBonification;let y=i.default.tokenToTexts(f,s.AecarGameScores.texts),b=i.default.tokenToTexts(f,s.AecarGameScores.fiascoTexts);return t===p.GAME_TYPE_ISRCC&&(y=i.default.tokenToTexts(f,u.IsrccGameScores.texts),b=i.default.tokenToTexts(f,u.IsrccGameScores.fiascoTexts)),t===p.GAME_TYPE_LEVANTE&&(y=i.default.tokenToTexts(f,l.Levante124GameScores.texts),b=i.default.tokenToTexts(f,l.Levante124GameScores.fiascoTexts)),t===p.GAME_TYPE_COPAESPANA&&(y=i.default.tokenToTexts(f,c.RegionalZonaRcGameScores.texts),b=i.default.tokenToTexts(f,c.RegionalZonaRcGameScores.fiascoTexts)),t===p.GAME_TYPE_MINICRAWLERPASSION&&(y=i.default.tokenToTexts(f,m.MiniCrawlerPassionGameScores.texts),b=i.default.tokenToTexts(f,m.MiniCrawlerPassionGameScores.fiascoTexts)),t===p.GAME_TYPE_GENERIC&&(y=i.default.tokenToTexts(f,d.GenericGameScores.texts),b=i.default.tokenToTexts(f,d.GenericGameScores.fiascoTexts)),r.createElement(r.Fragment,null,r.createElement("ul",null,r.createElement("li",null,f("description.puntos"),": ",r.createElement("span",{className:"bold"},e)),T?r.createElement("li",null,f("description.avancepuerta"),": ",r.createElement("span",{className:"bold"},T)):r.createElement(r.Fragment,null),void 0!==typeof E&&void 0!==typeof _?r.createElement(r.Fragment,null,r.createElement("li",null,f("description.fallospuerta"),": ",r.createElement("span",{className:"bold"},E)),r.createElement("li",null,f("description.bonificacion"),": ",r.createElement("span",{className:"bold"},-2*_))):r.createElement(r.Fragment,null),void 0!==typeof v?r.createElement("li",null,f("description.portiempo"),": ",r.createElement("span",{className:"bold"},v)):r.createElement(r.Fragment,null),void 0!==typeof h?r.createElement("li",null,f("description.handicap"),": ",r.createElement("span",{className:"bold"},h)):r.createElement(r.Fragment,null),r.createElement("li",null,f("description.total"),": ",r.createElement("span",{className:"bold"},a)),r.createElement("li",null,f("description.tiempo"),": ",r.createElement("span",{className:"bold"},i.default.printTime(i.default.millisToTime(g))))),r.createElement(o.A,{controlTextValues:n.data.gateProgressionData?p.GameUtils.sumControlTextValues(n.data.gateProgressionData):n.data.controlTextValues,texts:y}),n.data.fiascoControlTextValues&&n.data.fiascoControlTextValues.filter((e=>e>0)).length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"fiascosText left bold"},f("points.fiascos"),":"),r.createElement(o.A,{controlTextValues:n.data.fiascoControlTextValues,texts:b})):r.createElement(r.Fragment,null))}return r.createElement(r.Fragment,null)}},79887:(e,t,n)=>{n.r(t),n.d(t,{GameProgressionContext:()=>a});const a=n(96540).createContext()},70531:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var a=n(96540),r=n(18492),o=n(99512),i=n.n(o),s=n(42927),c=n.n(s),l=n(70569),u=n(30738),m=n(788),d=n(10057),p=n.n(d),f=n(43841);const g=function(e){let{onGameEnd:t}=e;const{t:n}=(0,r.B)(["main"]);let o=[];const[i,s,c]=p()({onGameEnd:t}),d=i.game;o.push(a.createElement(u.default,{key:"tmC",courtesyTime:0,startTime:0,label:n("description.tiempo"),maxTime:d.maxTime})),o.push(a.createElement("div",{key:0},n("description.ordenruta"),":"));for(let e=0;e<d.players.length;e++){let t="";m.GameUtils.isPointsFiasco(d,i.order[e].zones[0])&&(t="blink foreColorRed"),o.push(a.createElement("div",{key:e+1},a.createElement("div",{className:"controlTextContainerQueue rounded bold ".concat(t)},i.order[e].name,": ",i.order[e].zones[0].totalPoints," ptos")))}o.push(a.createElement("p",{key:d.players.length+1},n("description.puntos").toUpperCase(),":"));for(let e=0;e<d.players.length;e++){let t,r=d.players[e],i=r.zones[0];o.push(a.createElement("div",{key:d.players.length+e+2,className:"playerInfo"},a.createElement("div",{className:"headerPlayer importantNote rounded2 rounded"},a.createElement("div",{className:"bold"},r.name),n("description.total"),": ",i.totalPoints,t),a.createElement("div",{className:"controlTextContainer rounded rounded1"},(0,l.A)({controlTextValuesString:"controlTextValues",steps:f.KingGameScores.steps,maxValues:f.KingGameScores.maxValues,texts:f.KingGameScores.texts,zone:0,player:e,onValueChange:s}))))}return o.push(a.createElement("button",{key:2*d.players.length+2,className:"importantNote",onClick:c},n("description.fin"))),a.createElement("div",{key:2*d.players.length+3,className:"gameContainer"},o)};var E=n(35153),T=n.n(E),v=n(13384),h=n.n(v),_=n(58349),y=n.n(_),b=n(99006),G=n.n(b);const P=function(e){let{children:t,onGameEnd:n,onRepair:o,playerIndex:i,zoneIndex:s}=e;const{t:c}=(0,r.B)(["main"]),l=[],[u,m,d,p,f,g,E,v,_,b]=T()(n,o,i,s),P=u.game,S=P.players[i],A=S.zones[s];return t.length&&(l.push(a.cloneElement(t[0],{onValueChange:d})),t[2]?(l.push(a.cloneElement(t[1],{onValueChange:E})),l.push(a.cloneElement(t[2]))):l.push(a.cloneElement(t[1])),t[3]&&l.push(a.cloneElement(t[3]))),a.createElement("div",{className:"gameContainer"},a.createElement(h(),{playerIndex:i,zoneIndex:s}),a.createElement(y(),{playerZone:A,forceAction:u.forceAction,setRepairStatus:b,onTimerChange:m,onTimeFiasco:_,onPointBecauseLastMinute:v}),a.createElement(G(),{playerIndex:i,zoneIndex:s,onGateProgressionChange:g}),a.createElement("div",{className:"controlTextContainer rounded rounded2"},l[2],A.gateProgression<P.gates[s]?l[0]:a.createElement(a.Fragment,null),A.gateProgression<P.gates[s]?l[1]:a.createElement(a.Fragment,null)),l[3],a.createElement("button",{onClick:p,className:"resetButton"},c("description.reset")),a.createElement("button",{className:"importantNote",onClick:()=>{f()}},c("description.finjugador")," (",S.name,")"),a.createElement("p",null))};var S=n(91642);const A=function(e){let{game:t,player:n,zone:r,onGameEnd:o,onRepair:i,gameExtras:s,children:c}=e;const[l,u]=a.useState(t),m=[];return a.useEffect((()=>{s.doPageView()}),[]),1!==l.gameType?m.push(a.createElement(P,{key:1,onGameEnd:e=>{o(e)},onRepair:i,playerIndex:n,zoneIndex:r},c)):m.push(a.createElement(g,{key:0,onGameEnd:e=>{o(e)},onRepair:i})),a.createElement(S.GameContext.Provider,{value:{game:l,setGame:u,gameExtras:s}},m)};var C=n(79887),x=n(38435),N=n(82155),M=n.n(N);const O=function(e){let{inGame:t,onBackButtonClick:n}=e,o=a.createElement(a.Fragment,null);const{t:s}=(0,r.B)(["main"]),l=i().getGameExtras(t.gameType),[u,d,p,f,g,E,T,v,h,_]=M()(t,l),y=i().getGameContent(d.gameType,g.id,E),[b]=a.useState((()=>i().getGroupFromJid(d,window.crawlear.user.uid)));return u===N.GAME_STATUS_CREATED?o=d.gameType===m.GAME_TYPE_KING?a.createElement(A,{game:d,onGameEnd:h,gameExtras:l}):a.createElement(C.GameProgressionContext.Provider,{value:[p,f]},a.createElement(c(),{game:d,gameProgression:p,jidGroup:b,onBeginGame:T,onBackButtonClick:n,onCloseButonClick:v})):u===N.GAME_STATUS_PLAYING?o=a.createElement(A,{player:g.id,zone:E,game:d,gameExtras:l,onGameEnd:h,onRepair:_},y):u===N.GAME_STATUS_FINISHED&&(o=a.createElement("div",{className:"gameList"},a.createElement(x.default,{game:d}),a.createElement("button",{className:"backButton",onClick:n},s("description.atras")))),o}},96276:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(96540),r=n(51605),o=n.n(r),i=n(75730);const s=function(){const[e,t]=a.useState(0),[n,r]=a.useState({}),s=new(o()),c=new i.default;function l(e){r(e),t(1),s.listenMessages(i.MSG_START,u),s.listenMessages(i.MSG_STOP,m),s.listenMessages(i.MSG_TIME,d),s.listenMessages(i.MSG_POINTS,p),s.listenMessages(i.MSG_GATES,f)}function u(){c.sendStart()}function m(){c.sendStop()}function d(e){c.sendTime(e.detail)}function p(e){c.sendPoints(e.detail)}function f(e){c.sendGates(e.detail)}return 0===e?a.createElement("div",{className:"controlText",onClick:function(){c.discoverDevice(l)}},"Discover Bluetooth Device"):a.createElement("div",{className:"controlText"},n.name)}},70849:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(96540),r=n(18492),o=n(788);const i=function(e){let{game:t,playerName:n,fromName:i,zone:s}=e;const{t:c}=(0,r.B)(["main"]),l=window.crawlear.fb,u=[],m=t.gid,d=[],[p,f]=a.useState({});function g(e,t){if("pending"===e.status){const n={...p};n[t]=e,f(n)}else if("accepted"===e.status){const e={...p};delete e[t],f(e)}}return m&&n&&i&&s>=0&&!o.GameUtils.isCurrentUserIsOwner(t.owner)&&0===Object.entries(p).length&&u.push(a.createElement("button",{onClick:function(){window.confirm(c("content.quieresenviarpeticiondepresencia"))&&l.setDirectorPresenceRequest(m,s,n,i,g)}},c("description.reclamarpresencia"))),Object.keys(p).forEach(((e,t)=>{d.push(a.createElement("div",null,p[e].status))})),a.createElement("div",{className:"presenceButtonContainer"},u,d)}},61062:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(96540),r=n(18492),o=n(30738);const i=function(e){let{onTimeFiasco:t,onRepairTimerChange:n}=e;const{t:i}=(0,r.B)(["main"]);return a.createElement("div",{className:"repairTimeContainer"},a.createElement(o.default,{courtesyTime:0,label:i("points.reparacion"),onTimeFiasco:t,onTimerChange:n,maxTime:18e5}))},s=function(e){let{gameProgression:t,game:n,onRepairEnd:o}=e;const{t:s}=(0,r.B)(["main"]),c=[];return t&&Object.entries(t).forEach(((e,t)=>{Object.entries(e[1]).forEach(((r,l)=>{Object.entries(r[1]).forEach(((l,u)=>{if("repair"===l[1].status){const m=new Date(l[1].repairData.setTime).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});c.push(a.createElement("div",{key:u+t,className:"repairProgressionItem rounded rounded2"},a.createElement("div",{className:"repairProgressionItemHead"},a.createElement("img",{src:n.players[r[0]].avatar,alt:"player avatar"}),a.createElement("span",{className:"repairProgressionItemZone"},s("description.zona"),": ",u+1),a.createElement("span",{className:"gameProgressionItemHour"},s("description.enreparaciondesde")," ",m)),a.createElement(i,null),a.createElement("button",{onClick:()=>{!function(e,t,n,a,r){window.confirm(s("content.finalizarreparacion"))&&o&&o(e,t,n,a,r)}(n.gid,n.players[[r[0]]].id,e[0],u,l[1])},className:"importantNote"},s("description.fin"))))}}))}))})),a.createElement("div",{className:"repairProgressionContainer"},c.length?c:s("description.nohayreparaciones"))}},30738:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a=n(96540),r=n(18492),o=n(38791),i=n(55038),s=n(51605),c=n.n(s),l=n(75730);const u="play",m="pause",d="stop",p=function(e){let{startTime:t,forceAction:n,label:s,onTimerChange:p,courtesyTime:f,maxTime:g,onPointBecauseLastMinute:E,onTimeFiasco:T}=e;const{t:v}=(0,r.B)(["main"]),h=a.useRef(null),_=a.useRef(t||0),y=new(c()),[b,G]=a.useState((()=>({millis:t||0,timer:null,maxTime:g,state:m,timeStart:Date.now()}))),P=i.default.millisToTime(b.millis);function S(){_.current=0,b.timer&&clearInterval(b.timer),h.current.classList.remove("blink"),G({maxTime:b.maxTime,millis:0,timer:null,state:d}),p&&p(_.current),h.current.classList.contains("play")&&h.current.classList.toggle("play")}function A(){h.current.classList.toggle("play"),b.state===m||b.state===d?(b.state=u,o.default.event("play","timePlay",""),h.current.classList.remove("blink")):(b.state=m,o.default.event("play","timePause","")),G((e=>({...e,state:b.state})))}return a.useEffect((()=>{n===d&&S(),n===m&&b.state===u&&A()}),[n]),a.useEffect((()=>{const e={...b};e.state===u?(e.timer&&clearInterval(e.timer),e.millis=_.current,e.timer=setInterval((()=>{!function(e){_.current<e.maxTime?(_.current=Date.now()-e.timeStart+e.millis,p&&p(_.current),G((e=>({...e,millis:_.current}))),Date.now()%2==0&&y.sendMessage(l.MSG_TIME,i.default.printTime(i.default.millisToTime(_.current)))):E&&e.maxTime>0&&_.current>=e.maxTime&&_.current<e.maxTime+f||0===e.maxTime?(_.current=Date.now()-e.timeStart,p&&p(_.current),G((e=>({...e,millis:_.current}))),e.maxTime>0&&!h.current.classList.contains("blink")&&h.current.classList.add("blink"),e.maxTime>0&&(e.maxTime+_.current)%1e4==0&&E()):(h.current.classList.toggle("blink"),h.current.classList.toggle("foreColorRed"),A(),T&&T())}(e)}),10),e.timeStart=Date.now(),y.sendMessage(l.MSG_START,{}),G((t=>({...t,...e})))):e.state===m?(e.timer&&clearInterval(b.timer),e.timer=null,y.sendMessage(l.MSG_STOP,{}),G((t=>({...t,...e})))):(e.millis=0,_.current=0,e.timer&&clearInterval(b.timer),e.timer=null,y.sendMessage(l.MSG_STOP,{}),G((t=>({...t,...e})))),y.sendMessage(l.MSG_TIME,i.default.printTime(i.default.millisToTime(_.current)))}),[b.state]),a.createElement("div",{ref:h,className:"timerContainer"},a.createElement("div",{className:"timerLabel"},(s||v("description.tiempo")).toUpperCase(),":"),a.createElement("div",{className:"timer"},i.default.printTime(P)),a.createElement("button",{className:"timerPlayButton",onClick:A}),a.createElement("button",{onClick:S,className:"resetButton"}))}},19905:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".rc-slider{width:80%;height:47px;margin:15px auto}.generic .rc-slider{height:61px;width:61%;min-height:325px;margin:15px auto}.rc-slider-rail{background-color:#333}.rc-slider-track{background-color:#aaa}.rc-slider-dot{border-color:#666}.rc-slider-handle,.rc-slider-dot.rc-slider-dot-active{border-color:#fff;border-top-left-radius:0px;border-bottom-left-radius:0px;border-top-right-radius:75px;border-bottom-right-radius:75px}.rc-slider-mark-text{color:#000;padding-bottom:50%}body.lightMode .rc-slider-handle{background-color:#333}body.lightMode .rc-slider-rail{background-color:#333}body.lightMode .rc-slider-track{background-color:#aaa}body.lightMode .rc-slider-dot{border-color:#666}",""]);const s=i},2512:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(85072),r=n.n(a),o=n(97825),i=n.n(o),s=n(77659),c=n.n(s),l=n(55056),u=n.n(l),m=n(10540),d=n.n(m),p=n(41113),f=n.n(p),g=n(19905),E={};E.styleTagTransform=f(),E.setAttributes=u(),E.insert=c().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=d(),r()(g.A,E);const T=g.A&&g.A.locals?g.A.locals:void 0},51605:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(21123)),o=function(){function e(){this.container=document.querySelector(".AppMainContainer")}return e.prototype.listenMessages=function(e,t){r.default.listenEvent(this.container,e,t)},e.prototype.sendMessage=function(e,t){r.default.sendEvent(this.container,e,t)},e}();t.default=o},21123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={listenEvent:function(e,t,n){e.addEventListener(t,n)},sendEvent:function(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}};t.default=n},75730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MSG_TIME=t.MSG_STOP=t.MSG_START=t.MSG_POINTS=t.MSG_GATES=void 0,t.MSG_GATES="BT_GATES",t.MSG_POINTS="BT_POINTS",t.MSG_START="BT_START",t.MSG_STOP="BT_STOP",t.MSG_TIME="BT_TIME";var n=function(){function e(){this.device={},this.timeCharacteristic={},this.timeValueCharacteristic={},this.pointsCharacteristic={},this.gatesCharacteristic={}}return e.prototype.discoverDevice=function(e){var t=this;navigator.bluetooth.requestDevice({filters:[{name:"CrawlearBluetoothDevice"},{services:["3feb1e8a-3981-4045-ad39-b225135013a0"]}]}).then((function(n){return t.device=n,e&&e(n),n.gatt&&n.gatt.connect()})).then((function(e){return e&&e.getPrimaryService("3feb1e8a-3981-4045-ad39-b225135013a0")})).then((function(e){var t=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8"),n=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b1"),a=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b2"),r=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b3");return Promise.all([t,n,a,r])})).then((function(e){var n=e[0],a=e[1],r=e[2],o=e[3];t.timeCharacteristic=n,t.timeValueCharacteristic=a,t.pointsCharacteristic=r,t.gatesCharacteristic=o})).catch((function(e){console.error(e)}))},e.prototype.sendTime=function(e){this.timeValueCharacteristic&&this.timeValueCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendPoints=function(e){this.pointsCharacteristic&&this.pointsCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendGates=function(e){this.gatesCharacteristic&&this.gatesCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendStart=function(){if(this.timeCharacteristic){var e=Uint8Array.of(1);this.timeCharacteristic.writeValue(e)}},e.prototype.sendStop=function(){if(this.timeCharacteristic){var e=Uint8Array.of(0);this.timeCharacteristic.writeValue(e)}},e}();t.default=n},99512:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_DONE=t.STATUS_REPAIR=t.STATUS_PLAYING=t.STATUS_WAITING=void 0;var r=n(788),o=n(42578),i=n(46662),s=n(3442),c=n(842),l=n(98784),u=n(90598),m=n(43841),d={isIndividualGame:function(e){return e.gameType===r.GAME_TYPE_KING},isGroupGameFinished:function(e,n,a){var r=!0;return!!d.isIndividualGame(e)||(Object.entries(n).forEach((function(e){Number(e[0])===a&&Object.entries(e[1]).forEach((function(e){Object.entries(e[1]).forEach((function(e){e[1].status!==t.STATUS_WAITING&&e[1].status!==t.STATUS_REPAIR&&e[1].status!==t.STATUS_PLAYING||(r=!1)}))}))})),r)},onRepairEnd:function(e,n,a,r,o){var i,s=null===(i=window.crawlear)||void 0===i?void 0:i.fb;o.status=t.STATUS_WAITING,delete o.repairData,s.setGameProgression(e,n,a,r,o)},updateGameFromProgression:function(e,t){var n=a({},t);return Object.entries(e).forEach((function(e){Object.entries(e[1]).forEach((function(t){t[1].data&&(n.players[e[0]].zones[t[0]]=t[1].data)}))})),n},getGroupFromJid:function(e,t){var n=e.judges.find((function(e){return e.uid===t}));return n?n.group:0},getGameExtras:function(e){var t;return e===r.GAME_TYPE_AECAR?t=o.gameExtras:e===r.GAME_TYPE_ISRCC?t=i.gameExtras:e===r.GAME_TYPE_LEVANTE?t=s.gameExtras:e===r.GAME_TYPE_COPAESPANA?t=c.gameExtras:e===r.GAME_TYPE_KING?t=m.gameExtras:e===r.GAME_TYPE_MINICRAWLERPASSION?t=l.gameExtras:e===r.GAME_TYPE_GENERIC&&(t=u.gameExtras),t},getGameContent:function(e,t,n){var a,m;return e===r.GAME_TYPE_AECAR?a=o.getGameContent:e===r.GAME_TYPE_ISRCC?a=i.getGameContent:e===r.GAME_TYPE_LEVANTE?a=s.getGameContent:e===r.GAME_TYPE_COPAESPANA?a=c.getGameContent:e===r.GAME_TYPE_KING||(e===r.GAME_TYPE_MINICRAWLERPASSION?a=l.getGameContent:e===r.GAME_TYPE_GENERIC&&(a=u.getGameContent)),a&&(m=a(t,n)),m}};t.STATUS_WAITING="waiting",t.STATUS_PLAYING="playing",t.STATUS_REPAIR="repair",t.STATUS_DONE="done",t.default=d},42927:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(96540)),c=n(32418),l=n(788),u=i(n(70849)),m=i(n(61062)),d=i(n(6837)),p=i(n(81397)),f=i(n(98357)),g=i(n(99512)),E=i(n(15420));t.default=function(e){var t,n=e.game,a=e.jidGroup,r=e.onBeginGame,o=e.onBackButtonClick,i=e.onCloseButonClick,T=[],v=l.GameUtils.isCurrentUserIsOwner(n.owner),h=(0,c.useTranslation)(["main"]).t,_=(0,E.default)(r),y=_[0],b=_[1],G=_[2],P=_[3],S=_[4],A=_[5];if(v&&T.push(s.createElement("div",{key:"dP",className:"directorContainer rounded rounded3"},s.createElement("div",{className:"bold"},h("description.directordepartida")),s.createElement("br",null),s.createElement(d.default,{game:n,gameProgression:P}))),n.jids.find((function(e){return e===window.crawlear.user.uid}))){var C=s.createElement(s.Fragment,null);(y&&y.group===a||v)&&(C=s.createElement("button",{onClick:A,className:"playButton importantNote"},h("description.empezar"))),t=s.createElement(s.Fragment,null,h("description.jugadorseleccionado"),": ",y?y.name:""," ",s.createElement("br",null),h("description.zonaseleccionada"),": ",-1!==b?b+1:"",s.createElement("br",null),C,s.createElement(u.default,{game:n,zone:b,playerName:y&&y.name,fromName:window.crawlear.user.displayName}))}return s.createElement(s.Fragment,null,T,s.createElement(f.default,{message:G}),s.createElement("div",{className:"trackJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},h("description.juezdepista")),s.createElement(p.default,{onZoneClick:S,game:n,jidGroup:a}),s.createElement(f.default,{message:G}),t),s.createElement("div",{className:"tendJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},h("description.juezdecarpa")),s.createElement(m.default,{gameProgression:P,game:n,onRepairEnd:g.default.onRepairEnd})),s.createElement("button",{className:"backButton",onClick:o},h("description.atras")),l.GameUtils.isCurrentUserIsOwner(n.owner)&&g.default.isGroupGameFinished(n,P,a)?s.createElement("button",{className:"closeButton importantNote",onClick:function(){i(n)}},h("description.cerrarpartida")):s.createElement(s.Fragment,null))}},99006:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(96540)),s=o(n(1397)),c=n(32418),l=n(788),u=n(91642);n(49722),n(2512),t.default=function(e){var t=e.playerIndex,n=e.zoneIndex,a=e.onGateProgressionChange,r=(0,c.useTranslation)(["main"]).t,o=i.useContext(u.GameContext),m=o.game,d=o.gameExtras,p=(0,s.createSliderWithTooltip)(s.default);function f(e){var r="gatesPlusButton"===e.target.id,o=m.players[t].zones[n],i=m.gates[n];r?o.gateProgression<i&&a(o.gateProgression+1):o.gateProgression>0&&a(o.gateProgression-1)}var g=m.players[t].zones[n];return i.createElement("div",{className:"gateProgressionContainer controlTextContainer info rounded rounded2"},r("description.avancepuerta"),": ",g.gateProgression,i.createElement("button",{id:"gatesPlusButton",onClick:f,className:"buttonControlTextPlus"},"+"),i.createElement("button",{id:"gatesMinusButton",onClick:f,className:"buttonControlTextMinus"},"-"),i.createElement(p,{step:1,min:0,max:m.gates[n],dots:!0,vertical:m.gameType===l.GAME_TYPE_GENERIC,value:g.gateProgression,onChange:a,marks:d.generateSliderMarksFromGates(g.gateProgressionData,g.gateProgression),tipFormatter:function(e){return g.gateProgression<m.gates[n]?String(e).concat("-").concat(g.gateProgressionData[g.gateProgression].gatePoints):"-"}}))}},13384:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(96540)),c=n(32418),l=n(91642),u=i(n(55038)),m=n(788),d=i(n(38791));t.default=function(e){var t=e.zoneIndex,n=e.playerIndex,a=s.createElement(s.Fragment,null),r=(0,c.useTranslation)(["main"]).t,o=s.useContext(l.GameContext).game,i=o.players[n],p=i.zones[t];return m.GameUtils.isFiasco(o,n,t)&&(d.default.event("play","fiasco",i.name),a=s.createElement("div",{className:"fiascoBox rounded importantNote"},"FiASCO!")),s.createElement(s.Fragment,null,s.createElement("div",{className:"playersList"},s.createElement("div",{className:"playerListItem importantNote rounded"},s.createElement("img",{src:i.avatar,alt:"avatar"}),i.name)),s.createElement("div",{className:"controlTextContainer rounded rounded2"},s.createElement("div",{className:"smallText"},r("description.zona"),": ",t+1),s.createElement("div",{className:"smallText"},r("description.puertas"),": ",o.gates[t]),s.createElement("div",{className:"smallText"},"max ",r("description.tiempo"),": ",u.default.printTime(u.default.millisToTime(o.maxTime))),s.createElement("div",{className:"smallText"},"max ",r("description.puntos"),": ",o.maxPoints),s.createElement("div",{className:"bold pointsText"},r("description.total"),": ",p.totalPoints),a))}},58349:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(96540)),c=i(n(55038)),l=i(n(96276)),u=i(n(30738)),m=n(32418),d=n(91642);t.default=function(e){var t=e.playerZone,n=e.forceAction,a=e.setRepairStatus,r=e.onTimerChange,o=e.onTimeFiasco,i=e.onPointBecauseLastMinute,p=(0,m.useTranslation)(["main"]).t,f=s.useContext(d.GameContext).game;return s.createElement("div",{className:"controlTextContainer rounded rounded2"},c.default.isIphone()?s.createElement(s.Fragment,null):s.createElement(l.default,null),f.courtesyTime>0?s.createElement("div",{className:"pointsText"},p("description.puntos")," ",p("description.portiempo"),": ",t.simpathyPoints):s.createElement(s.Fragment,null),s.createElement("button",{className:"repairButton importantNote",onClick:a},p("description.iniciarreparacion")),s.createElement(u.default,{courtesyTime:f.courtesyTime,startTime:t.time,label:p("description.tiempo"),forceAction:n,onTimerChange:r,onTimeFiasco:o,onPointBecauseLastMinute:i,maxTime:f.maxTime}))}},35153:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(96540)),u=c(n(51605)),m=n(788),d=n(75730),p=c(n(38791)),f=n(91642);function g(e,t){var n={tickTime:0,forceAction:"",game:e};return m.GameUtils.init(n.game,m.GameUtils.getGameTypeControlTextValuesInit(n.game.gameType),m.GameUtils.getGameTypeFiascoControlTextValuesInit(n.game.gameType),t),n}t.default=function(e,t,n,r){var o=new u.default,i=l.useContext(f.GameContext),c=i.game,E=i.gameExtras,T=l.useState((function(){return window.scrollTo(0,0),g(c,!1)})),v=T[0],h=T[1],_=v.game.players[n].zones[r];return l.useEffect((function(){var e=v.game.players[n].zones[r];h(a(a({},v),{tickTime:e.time,forceAction:"play"})),document.body.classList.add(m.GameUtils.getGameTypeBodyClassName(c.gameType))}),[]),[v,function(e){var t=a({},v);if(!e){var o=t.game.players[n].zones[r];o.simpathyPoints=0,E.onTimerChange(o)}_.time=e,h(a(a({},t),{tickTime:e,forceAction:"play"}))},function(e,t){var i=a({},v),c=i.game,l=c.players[n].zones[r],u=l.gateProgressionData[l.gateProgression];(c.maxPoints<=l.points&&c.maxPoints>0||c.maxTime<=v.tickTime&&c.maxTime>0)&&!(l.points+e<=c.maxPoints&&0===l.fiascoControlTextValues.filter((function(e){return e>0})).length)||(u.controlTextValues=s([],u.controlTextValues,!0),u.controlTextValues[t]+=e,l.points+=e,l.gateProgression<c.gates[r]&&(u.gatePoints+=e),o.sendMessage(d.MSG_POINTS,l.points),E.onChangeScore(l),h(i),m.GameUtils.isFiasco(i.game,n,r)&&h(a(a({},v),{forceAction:"pause"})))},function(){var e=a({},v);window.scrollTo(0,0),p.default.event("play","reset",e.game.players[n].name),(e=g(e.game,!0)).forceAction="stop",h((function(t){return a(a({},t),e)}))},function(){var t=a({},v),o=t.game,i=o.players;window.scrollTo(0,0),E.onEndPlayer(o,v.tickTime,n,r),t.forceAction="stop",h(t),p.default.event("play","endPlayer",i[n].name),document.body.classList.remove(m.GameUtils.getGameTypeBodyClassName(c.gameType)),e(t.game)},function(e){var t=a({},v),i=t.game.players[n].zones[r];i.gateProgression=e,o.sendMessage(d.MSG_GATES,i.gateProgression),e===t.game.gates[r]&&(t.forceAction="pause"),E.onGateProgressionChange(i),h(t)},function(e,t){var o=a({},v),i=o.game.players[n].zones[r];i.fiascoControlTextValues=s([],i.fiascoControlTextValues,!0),i.fiascoControlTextValues[t]+=e,i.fiascoControlTextValues[t]>0&&(o.forceAction="pause"),E.onFiascoChangeScore(),h(o)},function(){var e=a({},v),t=e.game.players[n].zones[r];t.simpathyPoints++,E.onPointBecauseLastMinute(t),h(e)},function(){var e=a({},v);h(a(a({},e),{tickTime:c.maxTime+c.courtesyTime,forceAction:"pause"}))},function(){var e=a({},v);e.game.players[n].zones[r].time=v.tickTime,e.forceAction="stop",h(e),t&&t(n,r)}]}},82155:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_STATUS_FINISHED=t.GAME_STATUS_PLAYING=t.GAME_STATUS_CREATED=void 0;var c=i(n(96540)),l=n(27447),u=s(n(99512)),m=n(32418),d=n(788),p=n(99512),f=s(n(55038));t.GAME_STATUS_CREATED=0,t.GAME_STATUS_PLAYING=1,t.GAME_STATUS_FINISHED=2,t.default=function(e,n){var r=c.useState(t.GAME_STATUS_CREATED),o=r[0],i=r[1],s=c.useState(e),g=s[0],E=s[1],T=c.useState([]),v=T[0],h=T[1],_=c.useRef([]),y=c.useState(-1),b=y[0],G=y[1],P=window.crawlear.fb,S=(0,m.useTranslation)(["main"]).t,A=c.useState({name:"",avatar:"",group:0,id:0,zones:[],uid:""}),C=A[0],x=A[1];return c.useEffect((function(){l.isOffline?h(d.GameUtils.createGameProgression(g.zones,g.players.length)):P.getGameProgression(g.gid,(function(){}),(function(){}),(function(e,t){var n={};n[e]=t,E(u.default.updateGameFromProgression(t,g)),_.current=a(a({},_.current),n),h(a(a({},_.current),n))}),(function(e,t){var n={};n[e]=t,E(u.default.updateGameFromProgression(t,g)),_.current=a(a({},_.current),n),h(a(a({},_.current),n))}))}),[]),[o,g,v,h,C,b,function(e,n){var a=e.id,r=e.group;i(t.GAME_STATUS_PLAYING),x(e),G(n),v[r][a][n].status=p.STATUS_PLAYING,h(v),P.setGameProgression(g.gid,a,r,n,v[r][a][n])},function(e,r){if(u.default.isGroupGameFinished(e,v,r)&&window.confirm(S("content.cerrarpartida"))&&!l.isOffline)P.getGameResult(e,(function(e){var r=a({},e);r.gameStatus=2,n.onGameEnd(r),r=f.default.getOrderedGameResult(r),P.updateGame(r),P.removeGameProgression(r.gid),E(r),i(t.GAME_STATUS_FINISHED)}),(function(){}));else if(l.isOffline){var o=f.default.getOrderedGameResult(e);E(d.GameUtils.getGameResult(o,v)),i(t.GAME_STATUS_FINISHED)}},function(e){if(u.default.isIndividualGame(g))n.onGameEnd(g),(c=f.default.getOrderedGameResult(g)).gameStatus=2,P.updateGame(c),P.removeGameProgression(c.gid),P.removeDirectorPresenceRequest(c.gid),i(t.GAME_STATUS_FINISHED),E(c);else{var r=C.id,o=C.group,s=a({},v),c=a({},g);s[o][r][b].status=p.STATUS_DONE,s[o][r][b].data=e.players[r].zones[b],!s[o][r][b].data.judgedBy&&(s[o][r][b].data.judgedBy=[]),s[o][r][b].data.judgedBy.push(window.crawlear.user.uid),h(s),c.players[r].zones[b]=s[o][r][b].data,P.setGameProgression(c.gid,r,o,b,s[o][r][b]),i(t.GAME_STATUS_CREATED),E(c)}},function(e,n){var r=a({},v),o=g.players[e],s=o.group,c=o.id;r[s][e][n].status=p.STATUS_REPAIR,r[s][e][n].repairData={setTime:(new Date).getTime()},r[s][e][n].data=o.zones[n],h(r),P.setGameProgression(g.gid,c,s,n,r[s][c][n]),i(t.GAME_STATUS_CREATED)}]}},15420:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(96540)),s=n(32418),c=n(79887),l=n(99512);t.default=function(e){var t=i.useState(null),n=t[0],a=t[1],r=i.useState(-1),o=r[0],u=r[1],m=i.useState(""),d=m[0],p=m[1],f=i.useContext(c.GameProgressionContext)[0],g=(0,s.useTranslation)(["main"]).t;return[n,o,d,f,function(e,t){u(t),a(e),p("")},function(){if(n&&-1!==o){var t=n.id,a=n.group,r=f[a][t][o];r.status===l.STATUS_WAITING&&window.confirm(g("content.quieresempezarzona"))||r.status===l.STATUS_DONE&&window.confirm(g("content.quiereseditarpartida"))||r.status===l.STATUS_PLAYING&&window.confirm(g("content.seguroeditarpartidaenjuego"))?(p(""),e(n,o)):r.status===l.STATUS_PLAYING?p(g("error.juegoencurso")):r.status===l.STATUS_REPAIR&&p(g("error.reparacionencurso"))}}]}},10057:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(96540)),u=c(n(38791)),m=n(43841),d=n(32418),p=n(788),f=n(91642);t.default=function(e){var t=e.onGameEnd,n=(0,d.useTranslation)(["main"]).t,r=l.useContext(f.GameContext).game,o=l.useState((function(){return m.KingGameScores.texts=m.KingGameScores.texts.map((function(e){return n(e)})),function(e){var t={game:e,order:s([],e.players,!0)};p.GameUtils.init(t.game,p.GameUtils.getGameTypeControlTextValuesInit(t.game.gameType),p.GameUtils.getGameTypeFiascoControlTextValuesInit(t.game.gameType),!1);for(var n=0;n<t.game.players.length;n++)t.game.players[n].zones[0].gateProgressionData[0].controlTextValues=new Array(m.KingGameScores.steps.length).fill(0);return t}(r)})),i=o[0],c=o[1];return l.useEffect((function(){u.default.pageview("/kinggame/")}),[]),[i,function(e,t,n){var r,o,l,u=a({},i),m=u.game.players,d=m[n].zones[0],p=d.gateProgressionData[0];p.controlTextValues=s([],p.controlTextValues,!0),p.controlTextValues[t]+=e,d.totalPoints+=e,d.points+=e,u.order=(r=u.order.findIndex((function(e){return e.id===m[n].id})),o=u.order,(l=s([],o,!0)).push(l.splice(r,1)[0]),l),c(u)},function(){t&&t(r)}]}}}]);