(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[996],{1140:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var a=n(96540),r=n(18492),i=n(43106),o=n(788),s=n(17902);const c="waiting",l="playing",u="done",m=function(e){let{game:t,jidGroup:n,onZoneClick:m}=e;const{t:d}=(0,r.B)(["main"]),[p,f]=a.useState(-1),[g,E]=a.useState(-1),T=a.useRef(),[v,_]=a.useContext(s.GameProgressionContext),h=[];let y=0;function G(){m(-1,-1),E(-1),f(-1)}return h.push(a.createElement("div",{key:"eZ",className:""},d("content.estadozona"))),h.push(a.createElement("div",{key:"nAz"},function(){const e=new Array(t.zones).fill(!1);return v&&Object.entries(v).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{"playing"===t[1].status&&!e[n]&&(e[n]=!0)}))}))})),function(e){const t=[];return e.forEach(((e,n)=>{const r=[];r.push(a.createElement("span",{key:n},d("description.zona")," ",n+1,": ")),e?r.push(a.createElement("span",{key:"dG".concat(n),className:"directorGroup colorRed"},d("description.ocupado"))):r.push(a.createElement("span",{key:"div".concat(n)},a.createElement("span",{className:"directorGroup"},d("description.libre")),a.createElement("br",null))),t.push(a.createElement("div",{key:"dZ".concat(n),className:"directorZone"},r))})),a.createElement("div",{className:""},t)}(e)}())),h.push(a.createElement("p",{key:"header"},d("content.seleccionapilotoyzona"),":")),t.players.forEach(((e,r)=>{let s,_=[],b=0;(e.group===n||o.GameUtils.isCurrentUserIsOwner(t.owner))&&(e.zones.forEach((t=>{s=e.id===g&&b===p?"colorGrey rounded":"rounded",v&&v[e.group]&&v[e.group][e.id]&&(v[e.group][e.id][b].status!==c?v[e.group][e.id][b].status===l?s+=" colorOrange":"repair"===v[e.group][e.id][b].status?s+=" colorRed":v[e.group][e.id][b].status===u&&(s+=" colorGreen"):v[e.group][e.id][b].data&&(s+=" colorClearGrey"),_.push(a.createElement("span",{"data-zone":b,onClick:t=>{!function(e,t){const n=Number(e.target.closest("[data-zone]").getAttribute("data-zone")),a=v[t.group][t.id][n].status;p===n&&g===t.id?G():a===c||a===u||a===l?(E(t.id),f(n),m(t,n)):G()}(t,e)},key:b+1,className:s},a.createElement("div",null,d("description.zona")," ",b+1),a.createElement("br",null),a.createElement("div",null,d("description.estado"),":"),a.createElement("div",null,function(e,t,n){let a;switch(t){case"waiting":a=e(n?"description.reparacionfinalizada":"description.waiting");break;case"done":a=e("description.done");break;case"repair":a=e("description.repair");break;case"playing":a=e("description.playing");break;default:a=e("description.waiting")}return a}(d,v[e.group][e.id][b].status,v[e.group][e.id][b].data))))),b++})),h.push(a.createElement("div",{key:y+b,className:"gameProgressionItem rounded rounded1"},a.createElement("div",null,a.createElement("img",{src:e.avatar,alt:"player avatar"}),e.name," ",a.createElement("br",null),d("description.grupo")," ",e.group+1),a.createElement("div",{className:"horizontalScrollContainer"},_))),g>=0&&p>=0&&e.id===g&&v[e.group][g][p].data&&h.push(a.createElement("div",{key:"".concat(y+b,"Info"),className:"gameProgressionInfoItem smallText rounded rounded2"},a.createElement(i.A,{gameType:t.gameType,innerRef:T,gameProgression:v[e.group][g][p]}))),y++)})),a.createElement(a.Fragment,null,h)}},83016:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(96540),r=n(18492);const i=function(e){let{game:t,gameProgression:n}=e;const{t:i}=(0,r.B)(["main"]),o=window.crawlear.fb,s=a.useRef(),[c,l]=a.useState({}),u=[];function m(e,t){if("pending"===t.status){const n={};n[e]=t,s.current={...s.current,...n},l(s.current)}}function d(e,t){if("pending"===t.status){const n={};n[e]=t,s.current={...s.current,...n},l(s.current)}}u.push(a.createElement("div",{key:"zC",className:""},i("content.zonascompletadas"))),a.useEffect((()=>{o.getDirectorPresenceRequest(t.gid,m,d)}),[]);for(let e=0;e<t.zones;e++){let t=[];Object.entries(n).forEach(((n,r)=>{let o=0;Object.entries(n[1]).forEach(((t,n)=>{t[1]&&t[1][e]&&"done"===t[1][e].status&&t[1][e].data&&o++})),o===Object.entries(n[1]).length&&t.push(a.createElement("span",{key:"dG".concat(e),className:"directorGroup"},i("description.grupo")," ",r+1))})),u.push(a.createElement("div",{key:"dZ".concat(e),className:"directorZone horizontalScrolling"},i("description.zona")," ",e+1,": ",t))}return u.push(a.createElement("p",{key:"pdp",className:"bold"},i("description.peticionesdepresencia"),":")),s.current||u.push(a.createElement("p",{key:"npsp",className:""},i("description.nopeticionespresencia"))),s.current&&Object.keys(s.current).forEach(((e,n)=>{const r=s.current[e];u.push(a.createElement("div",{key:"dR".concat(n),className:"directorRequestContainer blink"},a.createElement("div",null,a.createElement("div",null,i("description.de")," ",r.fromName),a.createElement("div",null,i("description.zona"),": ",r.zone+1),a.createElement("div",null,i("description.jugador"),": ",r.playerName),a.createElement("div",null,i("description.estado"),": ",r.status)),a.createElement("div",null,a.createElement("button",{onClick:()=>{!function(e){if(window.confirm(i("content.aceptarpresencia"))){const n={...s.current};delete n[e],l(n),s.current=n,o.acceptDirectorPresenceRequest(t.gid,e)}}(e)}},i("description.aceptar")))))})),a.createElement(a.Fragment,null,[u])}},43106:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(18492),r=n(96540),i=n(99263),o=n(8057),s=n(63549),c=n(57311),l=n(35459),u=n(4736),m=n(46101),d=n(96688),p=n(788);const f=function(e){let{gameType:t,gameProgression:n}=e;const{t:f}=(0,a.B)(["main"]);if(n.data){const e=n.data.points,a=n.data.totalPoints,g=n.data.time,E=n.data.gatesWithFail,T=n.data.gateProgression,v=n.data.simpathyPoints,_=n.data.handicap,h=n.data.gatesWithBonification;let y=o.default.tokenToTexts(f,s.AecarGameScores.texts),G=o.default.tokenToTexts(f,s.AecarGameScores.fiascoTexts);return t===p.GAME_TYPE_ISRCC&&(y=o.default.tokenToTexts(f,u.IsrccGameScores.texts),G=o.default.tokenToTexts(f,u.IsrccGameScores.fiascoTexts)),t===p.GAME_TYPE_LEVANTE&&(y=o.default.tokenToTexts(f,l.Levante124GameScores.texts),G=o.default.tokenToTexts(f,l.Levante124GameScores.fiascoTexts)),t===p.GAME_TYPE_COPAESPANA&&(y=o.default.tokenToTexts(f,c.RegionalZonaRcGameScores.texts),G=o.default.tokenToTexts(f,c.RegionalZonaRcGameScores.fiascoTexts)),t===p.GAME_TYPE_MINICRAWLERPASSION&&(y=o.default.tokenToTexts(f,m.MiniCrawlerPassionGameScores.texts),G=o.default.tokenToTexts(f,m.MiniCrawlerPassionGameScores.fiascoTexts)),t===p.GAME_TYPE_GENERIC&&(y=o.default.tokenToTexts(f,d.GenericGameScores.texts),G=o.default.tokenToTexts(f,d.GenericGameScores.fiascoTexts)),r.createElement(r.Fragment,null,r.createElement("ul",null,r.createElement("li",null,f("description.puntos"),": ",r.createElement("span",{className:"bold"},e)),T?r.createElement("li",null,f("description.avancepuerta"),": ",r.createElement("span",{className:"bold"},T)):r.createElement(r.Fragment,null),void 0!==typeof E&&void 0!==typeof h?r.createElement(r.Fragment,null,r.createElement("li",null,f("description.fallospuerta"),": ",r.createElement("span",{className:"bold"},E)),r.createElement("li",null,f("description.bonificacion"),": ",r.createElement("span",{className:"bold"},-2*h))):r.createElement(r.Fragment,null),void 0!==typeof v?r.createElement("li",null,f("description.portiempo"),": ",r.createElement("span",{className:"bold"},v)):r.createElement(r.Fragment,null),void 0!==typeof _?r.createElement("li",null,f("description.handicap"),": ",r.createElement("span",{className:"bold"},_)):r.createElement(r.Fragment,null),r.createElement("li",null,f("description.total"),": ",r.createElement("span",{className:"bold"},a)),r.createElement("li",null,f("description.tiempo"),": ",r.createElement("span",{className:"bold"},o.default.printTime(o.default.millisToTime(g))))),r.createElement(i.A,{controlTextValues:n.data.gateProgressionData?p.GameUtils.sumControlTextValues(n.data.gateProgressionData):n.data.controlTextValues,texts:y}),n.data.fiascoControlTextValues&&n.data.fiascoControlTextValues.filter((e=>e>0)).length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"fiascosText left bold"},f("points.fiascos"),":"),r.createElement(i.A,{controlTextValues:n.data.fiascoControlTextValues,texts:G})):r.createElement(r.Fragment,null))}return r.createElement(r.Fragment,null)}},17902:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GameProgressionContext:()=>a});const a=n(96540).createContext()},5996:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var a=n(96540),r=n(18492),i=n(99512),o=n.n(i),s=n(42927),c=n.n(s),l=n(29128),u=n(63995),m=n(788),d=n(10057),p=n.n(d),f=n(55448);const g=function(e){let{onGameEnd:t}=e;const{t:n}=(0,r.B)(["main"]);let i=[];const[o,s,c]=p()({onGameEnd:t}),d=o.game;i.push(a.createElement(u.default,{key:"tmC",courtesyTime:0,startTime:0,label:n("description.tiempo"),maxTime:d.maxTime})),i.push(a.createElement("div",{key:0},n("description.ordenruta"),":"));for(let e=0;e<d.players.length;e++){let t="";m.GameUtils.isPointsFiasco(d,o.order[e].zones[0])&&(t="blink foreColorRed"),i.push(a.createElement("div",{key:e+1},a.createElement("div",{className:"controlTextContainerQueue rounded bold ".concat(t)},o.order[e].name,": ",o.order[e].zones[0].totalPoints," ptos")))}i.push(a.createElement("p",{key:d.players.length+1},n("description.puntos").toUpperCase(),":"));for(let e=0;e<d.players.length;e++){let t,r=d.players[e],o=r.zones[0];i.push(a.createElement("div",{key:d.players.length+e+2,className:"playerInfo"},a.createElement("div",{className:"headerPlayer importantNote rounded2 rounded"},a.createElement("div",{className:"bold"},r.name),n("description.total"),": ",o.totalPoints,t),a.createElement("div",{className:"controlTextContainer rounded rounded1"},(0,l.A)({controlTextValuesString:"controlTextValues",steps:f.KingGameScores.steps,maxValues:f.KingGameScores.maxValues,texts:f.KingGameScores.texts,zone:0,player:e,onValueChange:s}))))}return i.push(a.createElement("button",{key:2*d.players.length+2,className:"importantNote",onClick:c},n("description.fin"))),a.createElement("div",{key:2*d.players.length+3,className:"gameContainer"},i)};var E=n(35153),T=n.n(E),v=n(13384),_=n.n(v),h=n(58349),y=n.n(h),G=n(99006),b=n.n(G);const P=function(e){let{children:t,onGameEnd:n,onRepair:i,playerIndex:o,zoneIndex:s}=e;const{t:c}=(0,r.B)(["main"]),l=[],[u,m,d,p,f,g,E,v,h,G]=T()(n,i,o,s),P=u.game,S=P.players[o],A=S.zones[s];return t.length&&(l.push(a.cloneElement(t[0],{onValueChange:d})),t[2]?(l.push(a.cloneElement(t[1],{onValueChange:E})),l.push(a.cloneElement(t[2]))):l.push(a.cloneElement(t[1])),t[3]&&l.push(a.cloneElement(t[3]))),a.createElement("div",{className:"gameContainer"},a.createElement(_(),{playerIndex:o,zoneIndex:s}),a.createElement(y(),{playerZone:A,forceAction:u.forceAction,setRepairStatus:G,onTimerChange:m,onTimeFiasco:h,onPointBecauseLastMinute:v}),a.createElement(b(),{playerIndex:o,zoneIndex:s,onGateProgressionChange:g}),a.createElement("div",{className:"controlTextContainer rounded rounded2"},l[2],A.gateProgression<P.gates[s]?l[0]:a.createElement(a.Fragment,null),A.gateProgression<P.gates[s]?l[1]:a.createElement(a.Fragment,null)),l[3],a.createElement("button",{onClick:p,className:"resetButton"},c("description.reset")),a.createElement("button",{className:"importantNote",onClick:()=>{f()}},c("description.finjugador")," (",S.name,")"),a.createElement("p",null))};var S=n(81765);const A=function(e){let{game:t,player:n,zone:r,onGameEnd:i,onRepair:o,gameExtras:s,children:c}=e;const[l,u]=a.useState(t),m=[];return a.useEffect((()=>{s.doPageView()}),[]),1!==l.gameType?m.push(a.createElement(P,{key:1,onGameEnd:e=>{i(e)},onRepair:o,playerIndex:n,zoneIndex:r},c)):m.push(a.createElement(g,{key:0,onGameEnd:e=>{i(e)},onRepair:o})),a.createElement(S.GameContext.Provider,{value:{game:l,setGame:u,gameExtras:s}},m)};var C=n(17902),x=n(251),N=n(82155),O=n.n(N);const M=function(e){let{inGame:t,onBackButtonClick:n}=e,i=a.createElement(a.Fragment,null);const{t:s}=(0,r.B)(["main"]),l=o().getGameExtras(t.gameType),[u,d,p,f,g,E,T,v,_,h]=O()(t,l),y=o().getGameContent(d.gameType,g.id,E),[G]=a.useState((()=>o().getGroupFromJid(d,window.crawlear.user.uid)));return u===N.GAME_STATUS_CREATED?i=d.gameType===m.GAME_TYPE_KING?a.createElement(A,{game:d,onGameEnd:_,gameExtras:l}):a.createElement(C.GameProgressionContext.Provider,{value:[p,f]},a.createElement(c(),{game:d,gameProgression:p,jidGroup:G,onBeginGame:T,onBackButtonClick:n,onCloseButonClick:v})):u===N.GAME_STATUS_PLAYING?i=a.createElement(A,{player:g.id,zone:E,game:d,gameExtras:l,onGameEnd:_,onRepair:h},y):u===N.GAME_STATUS_FINISHED&&(i=a.createElement("div",{className:"gameList"},a.createElement(x.default,{game:d}),a.createElement("button",{className:"backButton",onClick:n},s("description.atras")))),i}},31847:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(96540),r=n(51605),i=n.n(r),o=n(75730);const s=function(){const[e,t]=a.useState(0),[n,r]=a.useState({}),s=new(i()),c=new o.default;function l(e){r(e),t(1),s.listenMessages(o.MSG_START,u),s.listenMessages(o.MSG_STOP,m),s.listenMessages(o.MSG_TIME,d),s.listenMessages(o.MSG_POINTS,p),s.listenMessages(o.MSG_GATES,f)}function u(){c.sendStart()}function m(){c.sendStop()}function d(e){c.sendTime(e.detail)}function p(e){c.sendPoints(e.detail)}function f(e){c.sendGates(e.detail)}return 0===e?a.createElement("div",{className:"controlText",onClick:function(){c.discoverDevice(l)}},"Discover Bluetooth Device"):a.createElement("div",{className:"controlText"},n.name)}},84956:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(96540),r=n(18492),i=n(788);const o=function(e){let{game:t,playerName:n,fromName:o,zone:s}=e;const{t:c}=(0,r.B)(["main"]),l=window.crawlear.fb,u=[],m=t.gid,d=[],[p,f]=a.useState({});function g(e,t){if("pending"===e.status){const n={...p};n[t]=e,f(n)}else if("accepted"===e.status){const e={...p};delete e[t],f(e)}}return m&&n&&o&&s>=0&&!i.GameUtils.isCurrentUserIsOwner(t.owner)&&0===Object.entries(p).length&&u.push(a.createElement("button",{onClick:function(){window.confirm(c("content.quieresenviarpeticiondepresencia"))&&l.setDirectorPresenceRequest(m,s,n,o,g)}},c("description.reclamarpresencia"))),Object.keys(p).forEach(((e,t)=>{d.push(a.createElement("div",null,p[e].status))})),a.createElement("div",{className:"presenceButtonContainer"},u,d)}},26393:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(96540),r=n(18492),i=n(63995);const o=function(e){let{onTimeFiasco:t,onRepairTimerChange:n}=e;const{t:o}=(0,r.B)(["main"]);return a.createElement("div",{className:"repairTimeContainer"},a.createElement(i.default,{courtesyTime:0,label:o("points.reparacion"),onTimeFiasco:t,onTimerChange:n,maxTime:18e5}))},s=function(e){let{gameProgression:t,game:n,onRepairEnd:i}=e;const{t:s}=(0,r.B)(["main"]),c=[];return t&&Object.entries(t).forEach(((e,t)=>{Object.entries(e[1]).forEach(((r,l)=>{Object.entries(r[1]).forEach(((l,u)=>{if("repair"===l[1].status){const m=new Date(l[1].repairData.setTime).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});c.push(a.createElement("div",{key:u+t,className:"repairProgressionItem rounded rounded2"},a.createElement("div",{className:"repairProgressionItemHead"},a.createElement("img",{src:n.players[r[0]].avatar,alt:"player avatar"}),a.createElement("span",{className:"repairProgressionItemZone"},s("description.zona"),": ",u+1),a.createElement("span",{className:"gameProgressionItemHour"},s("description.enreparaciondesde")," ",m)),a.createElement(o,null),a.createElement("button",{onClick:()=>{!function(e,t,n,a,r){window.confirm(s("content.finalizarreparacion"))&&i&&i(e,t,n,a,r)}(n.gid,n.players[[r[0]]].id,e[0],u,l[1])},className:"importantNote"},s("description.fin"))))}}))}))})),a.createElement("div",{className:"repairProgressionContainer"},c.length?c:s("description.nohayreparaciones"))}},63995:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var a=n(96540),r=n(18492),i=n(99952),o=n(8057),s=n(51605),c=n.n(s),l=n(75730);const u="play",m="pause",d="stop",p=function(e){let{startTime:t,forceAction:n,label:s,onTimerChange:p,courtesyTime:f,maxTime:g,onPointBecauseLastMinute:E,onTimeFiasco:T}=e;const{t:v}=(0,r.B)(["main"]),_=a.useRef(null),h=a.useRef(t||0),y=new(c()),[G,b]=a.useState((()=>({millis:t||0,timer:null,maxTime:g,state:m,timeStart:Date.now()}))),P=o.default.millisToTime(G.millis);function S(){h.current=0,G.timer&&clearInterval(G.timer),_.current.classList.remove("blink"),b({maxTime:G.maxTime,millis:0,timer:null,state:d}),p&&p(h.current),_.current.classList.contains("play")&&_.current.classList.toggle("play")}function A(){_.current.classList.toggle("play"),G.state===m||G.state===d?(G.state=u,i.default.event("play","timePlay",""),_.current.classList.remove("blink")):(G.state=m,i.default.event("play","timePause","")),b((e=>({...e,state:G.state})))}return a.useEffect((()=>{n===d&&S(),n===m&&G.state===u&&A()}),[n]),a.useEffect((()=>{const e={...G};e.state===u?(e.timer&&clearInterval(e.timer),e.millis=h.current,e.timer=setInterval((()=>{!function(e){h.current<e.maxTime?(h.current=Date.now()-e.timeStart+e.millis,p&&p(h.current),b((e=>({...e,millis:h.current}))),Date.now()%2==0&&y.sendMessage(l.MSG_TIME,o.default.printTime(o.default.millisToTime(h.current)))):E&&e.maxTime>0&&h.current>=e.maxTime&&h.current<e.maxTime+f||0===e.maxTime?(h.current=Date.now()-e.timeStart,p&&p(h.current),b((e=>({...e,millis:h.current}))),e.maxTime>0&&!_.current.classList.contains("blink")&&_.current.classList.add("blink"),e.maxTime>0&&(e.maxTime+h.current)%1e4==0&&E()):(_.current.classList.toggle("blink"),_.current.classList.toggle("foreColorRed"),A(),T&&T())}(e)}),10),e.timeStart=Date.now(),y.sendMessage(l.MSG_START,{}),b((t=>({...t,...e})))):e.state===m?(e.timer&&clearInterval(G.timer),e.timer=null,y.sendMessage(l.MSG_STOP,{}),b((t=>({...t,...e})))):(e.millis=0,h.current=0,e.timer&&clearInterval(G.timer),e.timer=null,y.sendMessage(l.MSG_STOP,{}),b((t=>({...t,...e})))),y.sendMessage(l.MSG_TIME,o.default.printTime(o.default.millisToTime(h.current)))}),[G.state]),a.createElement("div",{ref:_,className:"timerContainer"},a.createElement("div",{className:"timerLabel"},(s||v("description.tiempo")).toUpperCase(),":"),a.createElement("div",{className:"timer"},o.default.printTime(P)),a.createElement("button",{className:"timerPlayButton",onClick:A}),a.createElement("button",{onClick:S,className:"resetButton"}))}},46514:()=>{},51605:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(21123)),i=function(){function e(){this.container=document.querySelector(".AppMainContainer")}return e.prototype.listenMessages=function(e,t){r.default.listenEvent(this.container,e,t)},e.prototype.sendMessage=function(e,t){r.default.sendEvent(this.container,e,t)},e}();t.default=i},21123:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={listenEvent:function(e,t,n){e.addEventListener(t,n)},sendEvent:function(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}};t.default=n},75730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSG_TIME=t.MSG_STOP=t.MSG_START=t.MSG_POINTS=t.MSG_GATES=void 0,t.MSG_GATES="BT_GATES",t.MSG_POINTS="BT_POINTS",t.MSG_START="BT_START",t.MSG_STOP="BT_STOP",t.MSG_TIME="BT_TIME";var n=function(){function e(){this.device={},this.timeCharacteristic={},this.timeValueCharacteristic={},this.pointsCharacteristic={},this.gatesCharacteristic={}}return e.prototype.discoverDevice=function(e){var t=this;navigator.bluetooth.requestDevice({filters:[{name:"CrawlearBluetoothDevice"},{services:["3feb1e8a-3981-4045-ad39-b225135013a0"]}]}).then((function(n){return t.device=n,e&&e(n),n.gatt&&n.gatt.connect()})).then((function(e){return e&&e.getPrimaryService("3feb1e8a-3981-4045-ad39-b225135013a0")})).then((function(e){var t=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8"),n=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b1"),a=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b2"),r=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b3");return Promise.all([t,n,a,r])})).then((function(e){var n=e[0],a=e[1],r=e[2],i=e[3];t.timeCharacteristic=n,t.timeValueCharacteristic=a,t.pointsCharacteristic=r,t.gatesCharacteristic=i})).catch((function(e){console.error(e)}))},e.prototype.sendTime=function(e){this.timeValueCharacteristic&&this.timeValueCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendPoints=function(e){this.pointsCharacteristic&&this.pointsCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendGates=function(e){this.gatesCharacteristic&&this.gatesCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendStart=function(){if(this.timeCharacteristic){var e=Uint8Array.of(1);this.timeCharacteristic.writeValue(e)}},e.prototype.sendStop=function(){if(this.timeCharacteristic){var e=Uint8Array.of(0);this.timeCharacteristic.writeValue(e)}},e}();t.default=n},99512:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_DONE=t.STATUS_REPAIR=t.STATUS_PLAYING=t.STATUS_WAITING=void 0;var r=n(788),i=n(63549),o=n(4736),s=n(35459),c=n(57311),l=n(46101),u=n(96688),m=n(55448),d={isIndividualGame:function(e){return e.gameType===r.GAME_TYPE_KING},isGroupGameFinished:function(e,n,a){var r=!0;return!!d.isIndividualGame(e)||(Object.entries(n).forEach((function(e){Number(e[0])===a&&Object.entries(e[1]).forEach((function(e){Object.entries(e[1]).forEach((function(e){e[1].status!==t.STATUS_WAITING&&e[1].status!==t.STATUS_REPAIR&&e[1].status!==t.STATUS_PLAYING||(r=!1)}))}))})),r)},onRepairEnd:function(e,n,a,r,i){var o,s=null===(o=window.crawlear)||void 0===o?void 0:o.fb;i.status=t.STATUS_WAITING,delete i.repairData,s.setGameProgression(e,n,a,r,i)},updateGameFromProgression:function(e,t){var n=a({},t);return Object.entries(e).forEach((function(e){Object.entries(e[1]).forEach((function(t){t[1].data&&(n.players[e[0]].zones[t[0]]=t[1].data)}))})),n},getGroupFromJid:function(e,t){var n=e.judges.find((function(e){return e.uid===t}));return n?n.group:0},getGameExtras:function(e){var t;return e===r.GAME_TYPE_AECAR?t=i.gameExtras:e===r.GAME_TYPE_ISRCC?t=o.gameExtras:e===r.GAME_TYPE_LEVANTE?t=s.gameExtras:e===r.GAME_TYPE_COPAESPANA?t=c.gameExtras:e===r.GAME_TYPE_KING?t=m.gameExtras:e===r.GAME_TYPE_MINICRAWLERPASSION?t=l.gameExtras:e===r.GAME_TYPE_GENERIC&&(t=u.gameExtras),t},getGameContent:function(e,t,n){var a,m;return e===r.GAME_TYPE_AECAR?a=i.getGameContent:e===r.GAME_TYPE_ISRCC?a=o.getGameContent:e===r.GAME_TYPE_LEVANTE?a=s.getGameContent:e===r.GAME_TYPE_COPAESPANA?a=c.getGameContent:e===r.GAME_TYPE_KING||(e===r.GAME_TYPE_MINICRAWLERPASSION?a=l.getGameContent:e===r.GAME_TYPE_GENERIC&&(a=u.getGameContent)),a&&(m=a(t,n)),m}};t.STATUS_WAITING="waiting",t.STATUS_PLAYING="playing",t.STATUS_REPAIR="repair",t.STATUS_DONE="done",t.default=d},42927:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),c=n(32418),l=n(788),u=o(n(84956)),m=o(n(26393)),d=o(n(83016)),p=o(n(1140)),f=o(n(82894)),g=o(n(99512)),E=o(n(15420));t.default=function(e){var t,n=e.game,a=e.jidGroup,r=e.onBeginGame,i=e.onBackButtonClick,o=e.onCloseButonClick,T=[],v=l.GameUtils.isCurrentUserIsOwner(n.owner),_=(0,c.useTranslation)(["main"]).t,h=(0,E.default)(r),y=h[0],G=h[1],b=h[2],P=h[3],S=h[4],A=h[5];if(v&&T.push(s.createElement("div",{key:"dP",className:"directorContainer rounded rounded3"},s.createElement("div",{className:"bold"},_("description.directordepartida")),s.createElement("br",null),s.createElement(d.default,{game:n,gameProgression:P}))),n.jids.find((function(e){return e===window.crawlear.user.uid}))){var C=s.createElement(s.Fragment,null);(y&&y.group===a||v)&&(C=s.createElement("button",{onClick:A,className:"playButton importantNote"},_("description.empezar"))),t=s.createElement(s.Fragment,null,_("description.jugadorseleccionado"),": ",y?y.name:""," ",s.createElement("br",null),_("description.zonaseleccionada"),": ",-1!==G?G+1:"",s.createElement("br",null),C,s.createElement(u.default,{game:n,zone:G,playerName:y&&y.name,fromName:window.crawlear.user.displayName}))}return s.createElement(s.Fragment,null,T,s.createElement(f.default,{message:b}),s.createElement("div",{className:"trackJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},_("description.juezdepista")),s.createElement(p.default,{onZoneClick:S,game:n,jidGroup:a}),s.createElement(f.default,{message:b}),t),s.createElement("div",{className:"tendJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},_("description.juezdecarpa")),s.createElement(m.default,{gameProgression:P,game:n,onRepairEnd:g.default.onRepairEnd})),s.createElement("button",{className:"backButton",onClick:i},_("description.atras")),l.GameUtils.isCurrentUserIsOwner(n.owner)&&g.default.isGroupGameFinished(n,P,a)?s.createElement("button",{className:"closeButton importantNote",onClick:function(){o(n)}},_("description.cerrarpartida")):s.createElement(s.Fragment,null))}},99006:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=i(n(1397)),c=n(32418),l=n(788),u=n(81765);n(77772),n(46514),t.default=function(e){var t=e.playerIndex,n=e.zoneIndex,a=e.onGateProgressionChange,r=(0,c.useTranslation)(["main"]).t,i=o.useContext(u.GameContext),m=i.game,d=i.gameExtras,p=(0,s.createSliderWithTooltip)(s.default);function f(e){var r="gatesPlusButton"===e.target.id,i=m.players[t].zones[n],o=m.gates[n];r?i.gateProgression<o&&a(i.gateProgression+1):i.gateProgression>0&&a(i.gateProgression-1)}var g=m.players[t].zones[n];return o.createElement("div",{className:"gateProgressionContainer controlTextContainer info rounded rounded2"},r("description.avancepuerta"),": ",g.gateProgression,o.createElement("button",{id:"gatesPlusButton",onClick:f,className:"buttonControlTextPlus"},"+"),o.createElement("button",{id:"gatesMinusButton",onClick:f,className:"buttonControlTextMinus"},"-"),o.createElement(p,{step:1,min:0,max:m.gates[n],dots:!0,vertical:m.gameType===l.GAME_TYPE_GENERIC,value:g.gateProgression,onChange:a,marks:d.generateSliderMarksFromGates(g.gateProgressionData,g.gateProgression),tipFormatter:function(e){return g.gateProgression<m.gates[n]?String(e).concat("-").concat(g.gateProgressionData[g.gateProgression].gatePoints):"-"}}))}},13384:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),c=n(32418),l=n(81765),u=o(n(8057)),m=n(788),d=o(n(99952));t.default=function(e){var t=e.zoneIndex,n=e.playerIndex,a=s.createElement(s.Fragment,null),r=(0,c.useTranslation)(["main"]).t,i=s.useContext(l.GameContext).game,o=i.players[n],p=o.zones[t];return m.GameUtils.isFiasco(i,n,t)&&(d.default.event("play","fiasco",o.name),a=s.createElement("div",{className:"fiascoBox rounded importantNote"},"FiASCO!")),s.createElement(s.Fragment,null,s.createElement("div",{className:"playersList"},s.createElement("div",{className:"playerListItem importantNote rounded"},s.createElement("img",{src:o.avatar,alt:"avatar"}),o.name)),s.createElement("div",{className:"controlTextContainer rounded rounded2"},s.createElement("div",{className:"smallText"},r("description.zona"),": ",t+1),s.createElement("div",{className:"smallText"},r("description.puertas"),": ",i.gates[t]),s.createElement("div",{className:"smallText"},"max ",r("description.tiempo"),": ",u.default.printTime(u.default.millisToTime(i.maxTime))),s.createElement("div",{className:"smallText"},"max ",r("description.puntos"),": ",i.maxPoints),s.createElement("div",{className:"bold pointsText"},r("description.total"),": ",p.totalPoints),a))}},58349:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),c=o(n(8057)),l=o(n(31847)),u=o(n(63995)),m=n(32418),d=n(81765);t.default=function(e){var t=e.playerZone,n=e.forceAction,a=e.setRepairStatus,r=e.onTimerChange,i=e.onTimeFiasco,o=e.onPointBecauseLastMinute,p=(0,m.useTranslation)(["main"]).t,f=s.useContext(d.GameContext).game;return s.createElement("div",{className:"controlTextContainer rounded rounded2"},c.default.isIphone()?s.createElement(s.Fragment,null):s.createElement(l.default,null),f.courtesyTime>0?s.createElement("div",{className:"pointsText"},p("description.puntos")," ",p("description.portiempo"),": ",t.simpathyPoints):s.createElement(s.Fragment,null),s.createElement("button",{className:"repairButton importantNote",onClick:a},p("description.iniciarreparacion")),s.createElement(u.default,{courtesyTime:f.courtesyTime,startTime:t.time,label:p("description.tiempo"),forceAction:n,onTimerChange:r,onTimeFiasco:i,onPointBecauseLastMinute:o,maxTime:f.maxTime}))}},35153:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(96540)),u=c(n(51605)),m=n(788),d=n(75730),p=c(n(99952)),f=n(81765);function g(e,t){var n={tickTime:0,forceAction:"",game:e};return m.GameUtils.init(n.game,m.GameUtils.getGameTypeControlTextValuesInit(n.game.gameType),m.GameUtils.getGameTypeFiascoControlTextValuesInit(n.game.gameType),t),n}t.default=function(e,t,n,r){var i=new u.default,o=l.useContext(f.GameContext),c=o.game,E=o.gameExtras,T=l.useState((function(){return window.scrollTo(0,0),g(c,!1)})),v=T[0],_=T[1],h=v.game.players[n].zones[r];return l.useEffect((function(){var e=v.game.players[n].zones[r];_(a(a({},v),{tickTime:e.time,forceAction:"play"})),document.body.classList.add(m.GameUtils.getGameTypeBodyClassName(c.gameType))}),[]),[v,function(e){var t=a({},v);if(!e){var i=t.game.players[n].zones[r];i.simpathyPoints=0,E.onTimerChange(i)}h.time=e,_(a(a({},t),{tickTime:e,forceAction:"play"}))},function(e,t){var o=a({},v),c=o.game,l=c.players[n].zones[r],u=l.gateProgressionData[l.gateProgression];(c.maxPoints<=l.points&&c.maxPoints>0||c.maxTime<=v.tickTime&&c.maxTime>0)&&!(l.points+e<=c.maxPoints&&0===l.fiascoControlTextValues.filter((function(e){return e>0})).length)||(u.controlTextValues=s([],u.controlTextValues,!0),u.controlTextValues[t]+=e,l.points+=e,l.gateProgression<c.gates[r]&&(u.gatePoints+=e),i.sendMessage(d.MSG_POINTS,l.points),E.onChangeScore(l),_(o),m.GameUtils.isFiasco(o.game,n,r)&&_(a(a({},v),{forceAction:"pause"})))},function(){var e=a({},v);window.scrollTo(0,0),p.default.event("play","reset",e.game.players[n].name),(e=g(e.game,!0)).forceAction="stop",_((function(t){return a(a({},t),e)}))},function(){var t=a({},v),i=t.game,o=i.players;window.scrollTo(0,0),E.onEndPlayer(i,v.tickTime,n,r),t.forceAction="stop",_(t),p.default.event("play","endPlayer",o[n].name),document.body.classList.remove(m.GameUtils.getGameTypeBodyClassName(c.gameType)),e(t.game)},function(e){var t=a({},v),o=t.game.players[n].zones[r];o.gateProgression=e,i.sendMessage(d.MSG_GATES,o.gateProgression),e===t.game.gates[r]&&(t.forceAction="pause"),E.onGateProgressionChange(o),_(t)},function(e,t){var i=a({},v),o=i.game.players[n].zones[r];o.fiascoControlTextValues=s([],o.fiascoControlTextValues,!0),o.fiascoControlTextValues[t]+=e,o.fiascoControlTextValues[t]>0&&(i.forceAction="pause"),E.onFiascoChangeScore(),_(i)},function(){var e=a({},v),t=e.game.players[n].zones[r];t.simpathyPoints++,E.onPointBecauseLastMinute(t),_(e)},function(){var e=a({},v);_(a(a({},e),{tickTime:c.maxTime+c.courtesyTime,forceAction:"pause"}))},function(){var e=a({},v);e.game.players[n].zones[r].time=v.tickTime,e.forceAction="stop",_(e),t&&t(n,r)}]}},82155:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_STATUS_FINISHED=t.GAME_STATUS_PLAYING=t.GAME_STATUS_CREATED=void 0;var c=o(n(96540)),l=n(4948),u=s(n(99512)),m=n(32418),d=n(788),p=n(99512),f=s(n(8057));t.GAME_STATUS_CREATED=0,t.GAME_STATUS_PLAYING=1,t.GAME_STATUS_FINISHED=2,t.default=function(e,n){var r=c.useState(t.GAME_STATUS_CREATED),i=r[0],o=r[1],s=c.useState(e),g=s[0],E=s[1],T=c.useState([]),v=T[0],_=T[1],h=c.useRef([]),y=c.useState(-1),G=y[0],b=y[1],P=window.crawlear.fb,S=(0,m.useTranslation)(["main"]).t,A=c.useState({name:"",avatar:"",group:0,id:0,zones:[],uid:""}),C=A[0],x=A[1];return c.useEffect((function(){l.isOffline?_(d.GameUtils.createGameProgression(g.zones,g.players.length)):P.getGameProgression(g.gid,(function(){}),(function(){}),(function(e,t){var n={};n[e]=t,E(u.default.updateGameFromProgression(t,g)),h.current=a(a({},h.current),n),_(a(a({},h.current),n))}),(function(e,t){var n={};n[e]=t,E(u.default.updateGameFromProgression(t,g)),h.current=a(a({},h.current),n),_(a(a({},h.current),n))}))}),[]),[i,g,v,_,C,G,function(e,n){var a=e.id,r=e.group;o(t.GAME_STATUS_PLAYING),x(e),b(n),v[r][a][n].status=p.STATUS_PLAYING,_(v),P.setGameProgression(g.gid,a,r,n,v[r][a][n])},function(e,r){if(u.default.isGroupGameFinished(e,v,r)&&window.confirm(S("content.cerrarpartida"))&&!l.isOffline)P.getGameResult(e,(function(e){var r=a({},e);r.gameStatus=2,n.onGameEnd(r),r=f.default.getOrderedGameResult(r),P.updateGame(r),P.removeGameProgression(r.gid),E(r),o(t.GAME_STATUS_FINISHED)}),(function(){}));else if(l.isOffline){var i=f.default.getOrderedGameResult(e);E(d.GameUtils.getGameResult(i,v)),o(t.GAME_STATUS_FINISHED)}},function(e){if(u.default.isIndividualGame(g))n.onGameEnd(g),(c=f.default.getOrderedGameResult(g)).gameStatus=2,P.updateGame(c),P.removeGameProgression(c.gid),P.removeDirectorPresenceRequest(c.gid),o(t.GAME_STATUS_FINISHED),E(c);else{var r=C.id,i=C.group,s=a({},v),c=a({},g);s[i][r][G].status=p.STATUS_DONE,s[i][r][G].data=e.players[r].zones[G],!s[i][r][G].data.judgedBy&&(s[i][r][G].data.judgedBy=[]),s[i][r][G].data.judgedBy.push(window.crawlear.user.uid),_(s),c.players[r].zones[G]=s[i][r][G].data,P.setGameProgression(c.gid,r,i,G,s[i][r][G]),o(t.GAME_STATUS_CREATED),E(c)}},function(e,n){var r=a({},v),i=g.players[e],s=i.group,c=i.id;r[s][e][n].status=p.STATUS_REPAIR,r[s][e][n].repairData={setTime:(new Date).getTime()},r[s][e][n].data=i.zones[n],_(r),P.setGameProgression(g.gid,c,s,n,r[s][c][n]),o(t.GAME_STATUS_CREATED)}]}},15420:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=n(32418),c=n(17902),l=n(99512);t.default=function(e){var t=o.useState(null),n=t[0],a=t[1],r=o.useState(-1),i=r[0],u=r[1],m=o.useState(""),d=m[0],p=m[1],f=o.useContext(c.GameProgressionContext)[0],g=(0,s.useTranslation)(["main"]).t;return[n,i,d,f,function(e,t){u(t),a(e),p("")},function(){if(n&&-1!==i){var t=n.id,a=n.group,r=f[a][t][i];r.status===l.STATUS_WAITING&&window.confirm(g("content.quieresempezarzona"))||r.status===l.STATUS_DONE&&window.confirm(g("content.quiereseditarpartida"))||r.status===l.STATUS_PLAYING&&window.confirm(g("content.seguroeditarpartidaenjuego"))?(p(""),e(n,i)):r.status===l.STATUS_PLAYING?p(g("error.juegoencurso")):r.status===l.STATUS_REPAIR&&p(g("error.reparacionencurso"))}}]}},10057:function(e,t,n){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(96540)),u=c(n(99952)),m=n(55448),d=n(32418),p=n(788),f=n(81765);t.default=function(e){var t=e.onGameEnd,n=(0,d.useTranslation)(["main"]).t,r=l.useContext(f.GameContext).game,i=l.useState((function(){return m.KingGameScores.texts=m.KingGameScores.texts.map((function(e){return n(e)})),function(e){var t={game:e,order:s([],e.players,!0)};p.GameUtils.init(t.game,p.GameUtils.getGameTypeControlTextValuesInit(t.game.gameType),p.GameUtils.getGameTypeFiascoControlTextValuesInit(t.game.gameType),!1);for(var n=0;n<t.game.players.length;n++)t.game.players[n].zones[0].gateProgressionData[0].controlTextValues=new Array(m.KingGameScores.steps.length).fill(0);return t}(r)})),o=i[0],c=i[1];return l.useEffect((function(){u.default.pageview("/kinggame/")}),[]),[o,function(e,t,n){var r,i,l,u=a({},o),m=u.game.players,d=m[n].zones[0],p=d.gateProgressionData[0];p.controlTextValues=s([],p.controlTextValues,!0),p.controlTextValues[t]+=e,d.totalPoints+=e,d.points+=e,u.order=(r=u.order.findIndex((function(e){return e.id===m[n].id})),i=u.order,(l=s([],i,!0)).push(l.splice(r,1)[0]),l),c(u)},function(){t&&t(r)}]}}}]);