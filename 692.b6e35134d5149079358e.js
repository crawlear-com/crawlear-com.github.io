"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[692],{46622:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(9226),r=n(93379),o=n.n(r),i=n(7795),l=n.n(i),c=n(90569),u=n.n(c),s=n(3565),d=n.n(s),p=n(19216),m=n.n(p),f=n(44589),g=n.n(f),v=n(80779),b={};b.styleTagTransform=g(),b.setAttributes=d(),b.insert=u().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=m(),o()(v.Z,b),v.Z&&v.Z.locals&&v.Z.locals;const h=function(e){let{url:t}=e;const n=function(e){var t=e.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11==t[2].length?t[2]:void 0}(t);return n?a.createElement("div",{className:"youtube video-responsive"},a.createElement("iframe",{src:"https://www.youtube.com/embed/".concat(n),title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",frameBorder:"0",allowFullScreen:!0})):a.createElement(a.Fragment,null)}},14357:(e,t,n)=>{n.r(t),n.d(t,{GpxRouteMap:()=>m,MapPointPicker:()=>b});var a=n(9226),r=(n(63582),n(61912)),o=n(51051),i=n(88477),l=n(95190),c=n(94496);n(43486);const u={async:!0,marker_options:{wptIconUrls:{"":"/marker-icon.png"},startIconUrl:"/marker-icon-start.png",endIconUrl:"/marker-icon-end.png",shadowUrl:"/marker-shadow.png"}};function s(e){let t;try{t=new o.XMLParser({ignoreAttributes:!1}).parse(e)}catch(e){t={gpx:{wpt:[]}}}return t}function d(e){let{data:t}=e,n=[];const r=Math.max(...t),o=Math.min(...t),i=r-o;let l=0;return t.forEach((e=>{const r=(e-o)/i*100,c={width:"".concat(300/t.length,"px"),height:"".concat(r+.1,"%")},u=a.createElement("div",{key:l,style:c,className:"dataPoint"});n.push(u),l++})),a.createElement("div",{key:"graph",className:"graphContainer"},n)}function p(e){let{onFileLoaded:t}=e;const{t:n}=(0,i.$G)(),r=a.useRef(null),o=a.useRef(null);return a.useEffect((()=>{r.current&&r.current.addEventListener("click",(()=>{o.current&&o.current.click()}),!1),o.current&&o.current.addEventListener("change",(e=>{var n;const a=null===(n=(null==e?void 0:e.target).files)||void 0===n?void 0:n[0],r=new FileReader;r.onload=()=>{var e;t((null===(e=r.result)||void 0===e?void 0:e.toString())||"")},a&&r.readAsText(a)}))}),[]),a.createElement(a.Fragment,null,a.createElement("input",{ref:o,title:"inputFile",type:"file",id:"fileElem",multiple:!0,accept:".gpx",style:{display:"none"}}),a.createElement("button",{ref:r,title:"buttonInputFile",id:"fileSelect",type:"button"},n("gpxupload")))}function m(e){let{gpx:t,onFileResolved:n}=e;const[o,l,c]=function(e,t){const n=a.useRef(null),[o,l]=a.useState(a.createElement(a.Fragment,null)),{t:c}=(0,i.$G)();function d(t){try{let o=s(t);const i=r=>{var i;const u=function(e){return{lat:Number(e.gpx.trk?e.gpx.trk.trkseg.trkpt[0]["@_lat"]:e.gpx.wpt[0]["@_lat"]),lon:Number(e.gpx.trk?e.gpx.trk.trkseg.trkpt[0]["@_lon"]:e.gpx.wpt[0]["@_lon"])}}(o),s={distance:(d=r.target).get_distance(),time:d.get_total_time(),movingTime:d.get_total_time(),speed:d.get_total_speed(),elevationMin:d.get_elevation_min(),elevationMax:d.get_elevation_max()};var d;null===(i=n.current)||void 0===i||i.fitBounds(r.target.getBounds()),l(function(e){return a.createElement("div",{className:"extraGpxInfoContainer rounded rounded3"},a.createElement("span",{className:"bold"},c("distancia")),a.createElement("span",null,": ".concat((e.distance/1e3).toFixed(3)," m")),a.createElement("br",null),a.createElement("span",{className:"bold"},c("tiempo")),a.createElement("span",null,": ".concat((e.time/1e3/60).toFixed(3)," mins")),a.createElement("br",null),a.createElement("span",{className:"bold"},c("tiempomovimiento")),a.createElement("span",null,": ".concat((e.movingTime/1e3/60).toFixed(3)," mins")),a.createElement("br",null),a.createElement("span",{className:"bold"},c("elevacionmin")),a.createElement("span",null,": ".concat(e.elevationMin.toFixed(3)," m")),a.createElement("br",null),a.createElement("span",{className:"bold"},c("elevacionmax")),a.createElement("span",null,": ".concat(e.elevationMax.toFixed(3)," m")),a.createElement("br",null),a.createElement("span",{className:"bold"},c("velocidad")),a.createElement("span",null,": ".concat(e.speed.toFixed(3)," Km/h")),a.createElement("br",null))}(s)),e&&e(t,u)};new r.GPX(t,u).on("loaded",i).addTo(n.current)}catch(t){e&&e("",{lat:0,lon:0},a.createElement(a.Fragment,null))}}return a.useEffect((()=>{n.current=r.map("map").fitWorld(),r.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"© OpenStreetMap"}).addTo(n.current)}),[]),a.useEffect((()=>{t&&t.length&&d(t)}),[t]),[d,function(e){const t=s(e);let n;const a=[];return t&&t.gpx&&(n=t.gpx.trk?t.gpx.trk.trkseg.trkpt:t.gpx.wpt,n.forEach((e=>{a.push(e.ele)}))),a},o]}(n,t),m=l(t||"");return a.createElement("div",{className:"mapContainer"},n&&a.createElement(p,{onFileLoaded:o}),a.createElement("div",{id:"map",title:"routeMap",className:"map"}),m.length?a.createElement(d,{data:m}):a.createElement(a.Fragment,null),c)}l.ZP.use(c.Z).use(i.Db).init({resources:{en:{translation:{gpxupload:"Upload a GPX file",distancia:"Distance",velocidad:"Speed",tiempo:"Time",tiempomovimiento:"Movement time",elevacionmin:"Elevation min",elevacionmax:"Elevation max"}},es:{translation:{gpxupload:"Sube un fichero GPX",distancia:"Distancia",velocidad:"Velocidad",tiempo:"Tiempo",tiempomovimiento:"Tiempo en movimiento",elevacionmin:"Elevación min",elevacionmax:"Elevación max"}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}}),function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('.map{border:4px solid #142733;border-radius:14px;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.05);box-shadow:0 10px 20px rgba(0,0,0,.1),0 3px 6px rgba(0,0,0,.05);height:250px;max-width:405px;width:99%}.graphContainer{background-image:-webkit-gradient(linear,left top,left bottom,from(#112031),to(#152d35));background-image:linear-gradient(#112031,#152d35);border-radius:15px 15px 0 0;height:50px;margin:10px auto 0;padding:10px 10px 0;width:300px}.graphContainer div:first-of-type:before{color:#777;content:"elevation";display:block;font-size:.6em;left:-10px;position:relative;top:40px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.graphContainer .dataPoint{background-color:hsla(64,46%,88%,.8);border-radius:0 0 2px 2px;float:left;left:11px;-webkit-transform:rotate(180deg) translate(-100%,-50px);transform:rotate(180deg) translate(-100%,-50px);-webkit-transform-origin:0 0;transform-origin:0 0;z-index:1000}.graphContainer .bold{font-weight:700}.extraGpxInfoContainer{font-size:.8em;text-align:left}'),r.icon({iconUrl:"/marker-icon-end.png",iconSize:[19,31],iconAnchor:[9,0]});const f=r.icon({iconUrl:"/marker-icon.png",iconSize:[19,31],iconAnchor:[10,0],shadowUrl:"/marker-shadow.png",shadowSize:[31,31]}),g={color:"#444",fillColor:"#447",fillOpacity:.2,radius:25e3},v=[[41.29,1.7],[41.79,2.3]];function b(e){let{onMapClick:t,points:n}=e;return function(e,t){const n=a.useRef([]),o=a.useRef(null);function i(e){n.current.forEach(((t,n)=>{(0===n&&e||n>0)&&t.remove()}))}a.useEffect((()=>{const t=r.map("mappicker").fitBounds(v);return r.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"© OpenStreetMap"}).addTo(t),t.on("click",(t=>{!function(t){var a,l;const c=null===(a=o.current)||void 0===a?void 0:a.getBounds(),u=(null==c?void 0:c.getNorthEast().lat)-(null==c?void 0:c.getSouthWest().lat);i(!0),n.current=[],g.radius=50332.5*u;const s=r.circle([t.latlng.lat,t.latlng.lng],g).addTo(o.current);n.current.push(s),e(t.latlng,null===(l=o.current)||void 0===l?void 0:l.getBounds())}(t)})),o.current=t,()=>{t.remove()}}),[]),a.useEffect((()=>{!function(){let e={lat:-90,lon:-180},a={lat:90,lon:180};i(!1),t.length>0&&t.forEach((t=>{var i,l;n.current.push(r.marker([t.point.lat,t.point.lon],{icon:f}).bindPopup(t.content).openPopup().addTo(o.current)),i=t.point,l=e,i.lat>l.lat&&(l.lat=i.lat),i.lon>l.lon&&(l.lon=i.lon),e=l,a=function(e,t){return e.lat<t.lat&&(t.lat=e.lat),e.lon<t.lon&&(t.lon=e.lon),t}(t.point,a)}))}()}),[t])}(t,n),a.createElement("div",{className:"mapContainer"},a.createElement("div",{id:"mappicker",title:"mapPointPicker",className:"map"}))}},33397:(e,t,n)=>{n.d(t,{Z:()=>f});var a=n(8081),r=n.n(a),o=n(23645),i=n.n(o),l=n(61667),c=n.n(l),u=new URL(n(37211),n.b),s=new URL(n(74485),n.b),d=i()(r()),p=c()(u),m=c()(s);d.push([e.id,`.routeLoveContainer{float:right}.loveIcon{width:25px;height:23px;display:block;background-size:contain;background-position:top;margin:8px 5px;cursor:pointer}.loved{background-image:url(${p})}.noloved{background-image:url(${m})}`,""]);const f=d},40838:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(8081),r=n.n(a),o=n(23645),i=n.n(o)()(r());i.push([e.id,".routesManagement{text-align:left;padding:15px}.routesManagement textarea{height:320px}.routesManagement .description{white-space:pre-line}.routesManagement .name{font-weight:bold}.routesManagement .routesSection{margin-bottom:15px}.routesManagement .routesSection label{margin-top:10px;display:block;font-weight:bold}.routesManagement .routesSection .value{display:inline;font-size:.9em}.routesManagement .routesSection .ispublic{display:block;font-size:.7em}.routesManagement .youtube{margin-top:15px}.routesManagement .mapRoute{width:95%;min-height:400px;margin:15px auto 0 auto;display:block}.routesManagement .sharerContainer{text-align:center}.routesManagement .editButton{float:right;font-size:.8em}.routesManagement .routeListItem{margin-top:15px;white-space:pre-line}.routesManagement .backButton{text-align:center}.routesManagement #map{width:99%;height:250px;max-width:405px;margin:0 auto}",""]);const l=i},80779:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(8081),r=n.n(a),o=n(23645),i=n.n(o)()(r());i.push([e.id,".youtube>iframe{padding:0px;width:104%;position:relative;left:-2%}.video-responsive{height:0;overflow:hidden;padding-bottom:56.25%;padding-top:30px;position:relative}.video-responsive iframe,.video-responsive object,.video-responsive embed{height:100%;left:0;position:absolute;top:0;width:100%}",""]);const l=i},15642:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(93379),r=n.n(a),o=n(7795),i=n.n(o),l=n(90569),c=n.n(l),u=n(3565),s=n.n(u),d=n(19216),p=n.n(d),m=n(44589),f=n.n(m),g=n(33397),v={};v.styleTagTransform=f(),v.setAttributes=s(),v.insert=c().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),r()(g.Z,v);const b=g.Z&&g.Z.locals?g.Z.locals:void 0},17020:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(93379),r=n.n(a),o=n(7795),i=n.n(o),l=n(90569),c=n.n(l),u=n(3565),s=n.n(u),d=n(19216),p=n.n(d),m=n(44589),f=n.n(m),g=n(40838),v={};v.styleTagTransform=f(),v.setAttributes=s(),v.insert=c().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),r()(g.Z,v);const b=g.Z&&g.Z.locals?g.Z.locals:void 0},48408:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(9226)),c=i(n(66367));n(15642),t.default=function(e){var t=e.rid,n=e.onLove,a=(0,c.default)(t,n),r=a[0],o=a[1];return l.createElement("span",{onClick:o,className:"routeLoveContainer"},l.createElement("span",{title:"love",className:r?"loveIcon loved":"loveIcon noloved"}))}},66367:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(9226));t.default=function(e,t){var n=i.useState(null),a=n[0],r=n[1],o=i.useState(!1),l=o[0],c=o[1],u=window.crawlear.fb,s=window.crawlear&&window.crawlear.user&&window.crawlear.user.uid;return i.useEffect((function(){s&&u.getRouteLove(window.crawlear.user.uid,e,(function(e,t){c(e),r(t)}),(function(){}))}),[]),[l,function(n){s&&(t&&t(!l),l?u.unloveRoute(a,(function(){r(null)}),(function(){})):u.loveRoute(window.crawlear.user.uid,e,(function(e){r(e)}),(function(){})),c(!l))}]}},66692:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(9226)),c=n(93082),u=i(n(57718)),s=i(n(651)),d=n(14357),p=i(n(48408)),m=i(n(46622));n(15483),n(70481),n(17020),t.default=function(e){var t=e.route,n=e.onBackClick,a=e.onEditClick,r=(0,c.useTranslation)().t,o=window.crawlear&&window.crawlear.user&&window.crawlear.user.uid,i=o&&t.uids.find((function(e){return e===window.crawlear.user.uid}));return i||t.isPublic?l.createElement("div",{className:"routesManagement rounded rounded2"},l.createElement("div",{className:"routesSection rounded rounded1"},!i&&o?l.createElement(p.default,{rid:t.rid||""}):l.createElement(l.Fragment,null),i&&a?l.createElement("div",{className:"editButton",onClick:a},"[ ",r("description.editar")," ]"):l.createElement(l.Fragment,null),l.createElement("div",{className:"value name"},t.name," "),l.createElement("div",{className:"value ispublic"},t.isPublic?r("description.publico"):""," ")),l.createElement(d.GpxRouteMap,{gpx:t.gpx.data}),t.youtubeVideo?l.createElement("div",{className:"routesSection"},l.createElement("div",{className:"value"},l.createElement(m.default,{url:t.youtubeVideo}))):l.createElement(l.Fragment,null),l.createElement(s.default,{url:"routeViewer?rid=".concat(t.rid),text:r("content.shareruta"),headerText:""}),l.createElement("div",{className:"routesSection"},l.createElement("div",{className:"value description"},t.description," ")),l.createElement("div",{className:"routesSection"},l.createElement("div",{className:"bold"},r("description.escala")),l.createElement("div",{className:"value"},t.scale," ")),l.createElement("div",{className:"routesSection"},l.createElement("div",{className:"bold"},r("description.dificultad")),l.createElement("div",{className:"value"},t.dificulty," ")),l.createElement("div",{className:"routesSection"},l.createElement("div",{className:"bold"},r("description.puntoencuentro")),l.createElement(u.default,{url:t.locationMapUrl})),l.createElement("div",{className:"routesSection backButton"},n?l.createElement("button",{onClick:n},r("description.atras")):l.createElement(l.Fragment,null))):l.createElement(l.Fragment,null,r("description.nopublico"))}},57718:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(9226)),l=n(93082);t.default=function(e){var t=e.url,n=(0,l.useTranslation)().t;return i.createElement("a",{href:t,rel:"noreferrer",target:"_blank"},n("description.vergooglemaps"))}},37211:(e,t,n)=>{e.exports=n.p+"5fa8cf9d5f1053d68b47.png"},74485:(e,t,n)=>{e.exports=n.p+"89c994ae763a73467c04.png"},15483:(e,t,n)=>{e.exports=n.p+"c998e011b7971a9b035e.png"},70481:(e,t,n)=>{e.exports=n.p+"183472eefa1734f461b7.png"}}]);