"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[9222],{14876:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".newGameContainer{margin-top:25px;width:95%}.newGameContainer .newGame{margin-bottom:25px;text-align:left;padding:15px 26px}.newGameContainer .newGame a{font-size:16px;margin-left:10px}.newGameContainer .newGameRow{padding:5px;font-size:.9em}.newGameContainer .newGameNameInput{max-width:164px}.newGameButton{margin:0 0 45px 0}.viewProfileLink{font-size:.8em;margin:0 auto 25px auto;border-radius:15px;padding:5px;width:70%}.profileHelper{margin-top:0;padding:15px;border:1px dotted #fff;font-size:.8em}",""]);const s=i},68689:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".gameRequestsContainer{margin-bottom:25px;width:95%;display:inline-block}.gameRequestsContainer .gameRequestGameName{margin-bottom:15px}.gameRequestsContainer .gameRequestsItem{text-align:center;margin-bottom:15px}.gameRequestsContainer .acceptButton{margin:10px}.gameRequestsContainer .acceptButton img{width:25px}.gameRequestsContainer .rejectButton{margin:10px}.gameRequestsContainer .rejectButton img{width:25px}",""]);const s=i},86220:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var a=n(6108),r=n(96540),o=n(38791),i=n(75237),s=n(47767),m=n(13907),c=n(82155),l=n(56812),d=n(65656),u=n(28641),g=n(83767),p=n(98533);const f=function(e){let{game:t,gameProgression:n}=e;const{t:a}=(0,m.B)(["main"]),o=[];let i=0;return t&&(o.push(r.createElement(d.A,{key:"header",game:t})),t.players.forEach((e=>{let s,m=[],c=0;e.zones.forEach(((o,i)=>{const l=e.group;if(n&&n[l]&&n[l][e.id]&&n[l][e.id][c]&&n[l][e.id][c].data){let o=[];const d=n[l][e.id][c];"done"===d.status?o.push(r.createElement(u.A,{gameType:t.gameType,key:"progressRow".concat(c),gameProgression:d})):"repair"===d.status&&o.push(a("points.reparacion").toUpperCase()),(0,p.kI)(t,e.id,i)&&(s=r.createElement("img",{src:g,alt:"fiasco"})),m.push(r.createElement("div",{key:c,className:"gameProgressionInfoItem"},r.createElement("div",{className:"bold"},a("description.zona")," ",c+1," ",s),o))}c++})),m.length>0&&o.push(r.createElement("div",{key:i+c,className:"gameProgressionItem rounded rounded1"},r.createElement("img",{src:e.avatar,alt:"player avatar"}),r.createElement("div",null,m))),i++}))),r.createElement(r.Fragment,null,o)};var w=n(48298);const E=function({game:e,inGameProgression:t}){const[n,a]=r.useState(t),o=window.crawlear.fb;let i;return r.useEffect((()=>{n||o.getGameProgressionOnce(e.gid,((e,t)=>{a(Object.assign({},t))}),(()=>{}))}),[o,e.gid,n]),i=n?r.createElement(f,{game:e,gameProgression:n}):r.createElement(w.A,null),i};function v(e){return e.gid}function h(e){let t=r.createElement(r.Fragment,null),n="";return t=e.gameStatus===c.hE||e.gameStatus===c.r0?r.createElement(E,{game:e}):r.createElement(l.A,{game:e}),(0,p.SS)(e.owner)&&(n="(D) "),{title:`${n}${e.name} - ${e.date}`,content:t}}var G=n(89159);var b=n(85072),x=n.n(b),y=n(97825),C=n.n(y),A=n(77659),k=n.n(A),R=n(55056),N=n.n(R),I=n(10540),B=n.n(I),S=n(41113),q=n.n(S),F=n(68689),L={};L.styleTagTransform=q(),L.setAttributes=N(),L.insert=k().bind(null,"head"),L.domAPI=C(),L.insertStyleElement=B(),x()(F.A,L),F.A&&F.A.locals&&F.A.locals;const P=n.p+"151dfdbca9628136ddd6.png",j=n.p+"d334398033a12c43b910.png",T=function({user:e}){const{t}=(0,m.B)(["main"]),n=window.crawlear.fb;let a=[];const[o]=function(e){const t=window.crawlear.fb,[n,a]=r.useState(new Map),o=r.useCallback(((e,t)=>{a((n=>{const a=new Map(n);return a.set(e,t),a}))}),[]),i=r.useCallback((e=>{a((t=>{const n=new Map(t);return n.delete(e),n}))}),[]);return r.useEffect((()=>{0===n.size&&t.getUserGameRequests(e,o,i)}),[t,e,o,i,n]),[n]}(e.uid);return o&&Array.from(o.keys()).forEach((i=>{var s,m;a.push(r.createElement("div",{key:i,className:"gameRequestsItem smallText"},r.createElement("span",{className:"gameRequestsFrom"},t("description.peticionde"),": ",r.createElement("span",{className:"bold"},null===(s=o.get(i))||void 0===s?void 0:s.fromName)),r.createElement("div",{className:"gameRequestGameName"},t("description.parajuego"),": ",r.createElement("span",{className:"bold"},null===(m=o.get(i))||void 0===m?void 0:m.gameName)),r.createElement("span",{className:"acceptButton",onClick:()=>{n.acceptGameRequest(e.uid,i)}},r.createElement("img",{src:P,alt:"like icon"})),r.createElement("span",{className:"rejectButton",onClick:()=>{n.rejectGameRequest(e.uid,i)}},r.createElement("img",{src:j,alt:"dislike icon"}))))})),a.length>0?r.createElement("div",{className:"gameRequestsContainer rounded rounded1"},r.createElement("div",{className:"headerText bold"},t("description.peticionesdejuego")),a):r.createElement(r.Fragment,null)};var O=n(55038);function z(e,t,n){return a=this,r=void 0,i=function*(){const a=window.crawlear.fb;let[r,o]=(0,O.CL)(e,t,((e,n)=>e.gid===t));if(r){const t=[...e],i=window.crawlear.user.uid;r&&r.uids.indexOf(i)>=0&&(r=yield a.removeIdFromGame(r,i,"uids")),r&&r.jids.indexOf(i)>=0&&(r=yield a.removeIdFromGame(r,i,"jids")),r&&r.owner.indexOf(i)>=0&&(r=yield a.removeIdFromGame(r,i,"owner")),r&&0===r.uids.length&&r&&0===r.jids.length&&(yield a.removeGame(r.gid)),t.splice(o,1),n(t)}},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{m(i.next(e))}catch(e){t(e)}}function s(e){try{m(i.throw(e))}catch(e){t(e)}}function m(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,s)}m((i=i.apply(a,r||[])).next())}));var a,r,o,i}const U=function(){const[e,t]=r.useState([]),[n,a]=r.useState([]),[o,i]=r.useState([]),[s,m]=r.useState([]),c=window.crawlear.fb,l=r.useCallback((()=>{const e=window.crawlear.fb;e.getGamesFromUser(window.crawlear.user.uid,!1,(e=>{m((t=>[...t,...e]))})),e.getGamesFromJudge(window.crawlear.user.uid,!1,(e=>{m((t=>[...t,...e]))}))}),[]);return r.useEffect((()=>{window.document.body.classList.remove("playing")}),[]),r.useEffect((()=>{window.crawlear.fbBase.isUserLogged()&&l()}),[l]),r.useEffect((()=>{!function(e){const n=[],r=[];e.forEach((e=>{e.jids.indexOf(window.crawlear.user.uid)>=0||e.owner.indexOf(window.crawlear.user.uid)>=0?n.push(e):e.uids.indexOf(window.crawlear.user.uid)>=0&&r.push(e)})),t(r),a(n)}(s)}),[s]),[e,n=>{z(e,n,t)},n,e=>{z(n,e,a)},o,e=>{z(o,e,i)},function(){c.getFinishedGamesFromUid(window.crawlear.user.uid,(e=>{i((t=>[...t,...e]))}))}]},D=function({isLoading:e,onLoadData:t}){const{t:n}=(0,m.B)(["main"]);return e?r.createElement(w.A,null):r.createElement("button",{title:"loadButton",onClick:t},n("description.cargar"))},M=function({storedGames:e,onRemoveStoredGames:t,onConfigureGames:n,onLoadPreviousGames:a}){let o;const{t:i}=(0,m.B)(["main"]),[s,c]=r.useState(!1),l={transform:h,key:v};return e.length>0?(s&&c(!1),o=r.createElement(G.A,{title:i("description.partidasprevias"),data:e,transformer:l,readOnly:!0,onRemoveItem:e=>{t(e)},onConfigureItem:t=>{n(e,t)}})):o=r.createElement("div",{className:"gameList rounded rounded3 centerText"},r.createElement("div",{className:"headerText bold"},i("description.partidasprevias")),r.createElement(D,{isLoading:s,onLoadData:()=>{c(!0),a()}})),r.createElement(r.Fragment,null," ",o," ")};var $=n(14876),_={};_.styleTagTransform=q(),_.setAttributes=N(),_.insert=k().bind(null,"head"),_.domAPI=C(),_.insertStyleElement=B(),x()($.A,_),$.A&&$.A.locals&&$.A.locals;const H=function({onConfigureGames:e,onGamePlay:t}){const{t:n}=(0,m.B)(["main"]),a=(0,s.Zp)(),o={transform:h,key:v},[i,c,l,d,u,g,p]=U();return r.createElement(r.Fragment,null,r.createElement("div",{className:"headerText bold sectionTitle"},n("description.secciondejuego")),r.createElement(T,{user:window.crawlear.user}),r.createElement(G.A,{data:i,readOnly:!0,transformer:o,onRemoveItem:e=>{c(e)},onConfigureItem:t=>{e(i,t)},title:n("description.partidascomopiloto")}),r.createElement(G.A,{data:l,title:n("description.partidasdejuez"),readOnly:!1,transformer:o,onItemAction:e=>{window.document.body.classList.add("playing"),t(l,e)},onConfigureItem:t=>{e(l,t)},onRemoveItem:e=>{d(e)}}),r.createElement("button",{className:"newGameButton importantNote",onClick:function(){a("/gameconfigurator")}},n("description.crearjuego")),r.createElement(M,{storedGames:u,onRemoveStoredGames:g,onConfigureGames:e,onLoadPreviousGames:p}))};var J=n(57019);const Z=(0,a.A)((function(){const[e,t]=r.useState(0),[n,s]=r.useState({}),m=(0,a.A)(J.default);function c(e,n,a){const[r]=(0,O.CL)(e,n,((e,t)=>e.gid===t));r&&(window.scrollTo(0,0),t(a),s(r))}return r.useEffect((()=>(o.A.pageview("/completegame/"),window.document.body.classList.add("game"),()=>{window.document.body.classList.remove("game")})),[]),r.createElement(r.Fragment,null,0===e?r.createElement(H,{onConfigureGames:function(e,t){c(e,t,2)},onGamePlay:function(e,t){c(e,t,1)}}):1===e?r.createElement(i.default,{inGame:n,onBackButtonClick:function(){window.scrollTo(0,0),t(0),s({})}}):2===e?r.createElement(m,{from:"/gameconfigurator",to:"/",preconfiguredGame:n}):r.createElement(r.Fragment,null))}))}}]);