"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[36],{65647:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(96540),r=a(47767),i=a(788),o=a(18492),l=a(85072),s=a.n(l),c=a(97825),u=a.n(c),m=a(77659),d=a.n(m),p=a(55056),g=a.n(p),f=a(10540),h=a.n(f),y=a(41113),v=a.n(y),E=a(57488),x={};x.styleTagTransform=v(),x.setAttributes=g(),x.insert=d().bind(null,"head"),x.domAPI=u(),x.insertStyleElement=h(),s()(E.A,x),E.A&&E.A.locals&&E.A.locals;const T=function(e){let{onGameTypeChange:t,selectedGameType:a=0,selectedPointsType:r=0}=e;const{t:i}=(0,o.B)(["main"]),l=[i("gametype.aecar"),i("gametype.rey"),i("gametype.isrcc"),i("gametype.levante124"),i("gametype.copaespana"),i("gametype.minicrawlerpassion"),i("gametype.generic")],s=[n.createElement("div",null,i("gametype.modojuegoarcar")),n.createElement("div",null,i("gametype.modojuegorey")),n.createElement("div",null,i("gametype.modojuegoisrcc")),n.createElement("div",null,i("gametype.modojuegolevante124")),n.createElement("div",null,i("gametype.modojuegocopaespana")),n.createElement("div",null,i("gametype.modojuegominicrawlerpassion")),n.createElement("div",null,i("gametype.modojuegogeneric"))],[c,u]=n.useState({gameType:a}),m=[];return l.forEach(((e,t)=>{m.push(n.createElement("option",{key:t,value:t},l[t]))})),n.createElement(n.Fragment,null,n.createElement("div",{className:"gameType rounded1 rounded"},n.createElement("label",{htmlFor:"gameTypeSelect",className:"headerText bold"},i("gametype.modojuego"),n.createElement("select",{id:"gameTypeSelect",defaultValue:a,onChange:function(e){const a=e.target.selectedIndex;t&&t(a),u({gameType:a})}},m)),n.createElement("div",{className:"gameSelectText smallText"},s[c.gameType])))};var b=a(96436),w={};w.styleTagTransform=v(),w.setAttributes=g(),w.insert=d().bind(null,"head"),w.domAPI=u(),w.insertStyleElement=h(),s()(b.A,w),b.A&&b.A.locals&&b.A.locals;const C=function(e){let{player:t,i:a,onRemovePlayer:r,onClickPlayer:i,onGroupChange:l,maxGroups:s,editMode:c,isForJudge:u,onGameDirectorChange:m}=e;const{t:d}=(0,o.B)(["main"]),p=[];if(c){const e=[];for(let t=0;t<s;t++)e.push(n.createElement("option",{value:t},d("description.grupo")," ",t+1));p.push(n.createElement("button",{className:"buttonControlTextMinus",id:a,onClick:function(e){e.stopPropagation(),r&&r(e)}},"-")),p.push(n.createElement("div",null,n.createElement("select",{value:t.group,onChange:function(e){const a=e.target.selectedIndex;l&&l(t.id,a)}},e))),u&&p.push(n.createElement(n.Fragment,null,n.createElement("input",{type:"checkbox",onChange:function(e){m&&m(t.id,e.target.checked)}}),n.createElement("span",{className:"PlayerItemGameDirector"},d("description.directordepartida"))))}return n.createElement("li",{key:a,onClick:function(){i&&i(t.id)},className:"closed importantNote rounded playerListItem",value:t.name},n.createElement("div",{className:"playerBox"},n.createElement("img",{referrerPolicy:"no-referrer",src:t.avatar,alt:"avatar"}),n.createElement("div",{className:"textOverflow"},t.name),p))};var P=a(81156),A=a(38449),G={};G.styleTagTransform=v(),G.setAttributes=g(),G.insert=d().bind(null,"head"),G.domAPI=u(),G.insertStyleElement=h(),s()(A.A,G),A.A&&A.A.locals&&A.A.locals;const N=a.p+"78b7bb4a554381a9ba80.png",S=function(e){let{onUserSeachPlayerAdd:t,onUserClick:a,onPlusAddUserClick:r,mainText:i,secondaryText:l,iconSend:s,children:c}=e;const u=window.crawlear.fb,m=window.crawlear.fbBase,{t:d}=(0,o.B)(["main"]),[p,g]=n.useState(""),[f,h]=n.useState([]),y=n.useRef(),v=n.useRef();function E(e){const a=e.target,n=a.getAttribute("data-uid"),r=a.getAttribute("data-displayname"),i=a.getAttribute("data-photourl");h([]),g(""),t&&t({uid:n,displayName:r,photoURL:i})}function x(e){const t=e.target.nextElementSibling.getAttribute("data-uid");a&&a(t)}const T=[];let b,w=0;return f.length>0&&(T.push(n.createElement("div",{key:w,className:"userSearchResultsText smallText"},l)),w++),f.forEach((e=>{let a=s;t&&e.uid===window.crawlear.user.uid&&(a=N),T.push(n.createElement("div",{className:"bold userSearchItem",key:w},n.createElement("span",{onClick:x,className:"userSearchResult textOverflow"},e.displayName),n.createElement("img",{src:a,alt:"send icon","data-uid":e.uid,"data-displayname":e.displayName,"data-photourl":e.photoURL,onClick:E}))),w++})),r&&(b=n.createElement("button",{className:"buttonControlTextPlus",onClick:()=>{const e=v.current.value;h([]),g(""),r({uid:"",displayName:e})}},"+")),n.createElement("div",{className:"userSearchContainer rounded rounded3"},!P.isOffline||r?n.createElement(n.Fragment,null,n.createElement("div",{className:"userSearchText smallText"},i),n.createElement("input",{id:Date.now(),ref:v,className:"userSearchName",onChange:function(e){const t=e.target.value;g(t),!P.isOffline&&m.isUserLogged()&&(t.length>0?u.userSearch(t,(e=>{h(e)}),(()=>{})):h([]))},value:p})):n.createElement(n.Fragment,null),b,c,n.createElement("div",{ref:y,className:"resultsContainer"},T))},k=a.p+"9f5743cc8ab0daaa6f24.png",_=function(e){let{onUserSeachPlayerAdd:t,gameName:a,isForJudge:r}=e;const i=window.crawlear.fb,l=window.crawlear.fbBase,{t:s}=(0,o.B)(["main"]),c=n.useRef(0),[u,m]=n.useState(0),d=[];return c.current>0&&d.push(n.createElement("div",{key:0},c.current," ",s("description.peticionespendientes"))),n.createElement(S,{onUserSeachPlayerAdd:function(e){let{uid:n,displayName:r,photoURL:o}=e;if(n&&(n===window.crawlear.user.uid||window.confirm(s("content.peticionjuegoconfirmacion"))))if(n===window.crawlear.user.uid){const e=window.crawlear.user;t({uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,group:0})}else i.setUserGameRequest(window.crawlear.user.uid,window.crawlear.user.displayName,n,a,((e,a)=>{"pending"===a?(c.current+=1,m(u+1)):"accepted"===a?(t({uid:n,displayName:r,photoURL:o,group:0}),c.current-=1,m(u-1)):(c.current-=1,m(u-1))}))},onPlusAddUserClick:r?void 0:t,mainText:l.isUserLogged()?s("content.usuariodesistema"):s("content.usuarionosistema"),secondaryText:"".concat(s("content.enviorequest"),". ").concat(s("content.enviorequest2")),iconSend:k},d)};var j=a(38791),M=a(35275),O={};O.styleTagTransform=v(),O.setAttributes=g(),O.insert=d().bind(null,"head"),O.domAPI=u(),O.insertStyleElement=h(),s()(M.A,O),M.A&&M.A.locals&&M.A.locals;const I=function(e){let{inPlayers:t,onPlayerNumerChange:a,onGameDirectorChange:r,gameName:i,isForJudge:l,maxGroups:s}=e;const[c,u]=n.useState(t||[]),{t:m}=(0,o.B)(["main"]);function d(e){j.default.event("menu","removePlayer",c[e.target.id].name),delete c[e.target.id];const t=c.filter((e=>e));u(t),a&&a(t)}function p(e,t){const a=[...c];a[e].group=t,u(a)}function g(e,t){r&&r(e,t)}n.useEffect((()=>{a&&a(c)}),[c]);let f=c.length?m("description.jugadores"):m("description.nojugadores");return l&&(f=c.length?m("description.jueces"):m("description.nojueces")),n.createElement(n.Fragment,null,n.createElement("div",{className:"players rounded rounded1"},n.createElement("div",{className:"headerText bold"},m(l?"description.jueces":"description.jugadores")),n.createElement(_,{isForJudge:l,onUserSeachPlayerAdd:function(e){const t=e.displayName;!t||0===t.trim().length||c.find((t=>t.uid===e.uid&&e.uid.length>0))||l&&!e.uid||(c.push({id:c.length,uid:e.uid||"",name:t,avatar:e.photoURL||"".concat("https://eu.ui-avatars.com/api/?background=345B63&color=FFFFFF&name=").concat(t),group:0,time:0,points:0,battery:!1}),j.default.event("menu","addPlayer",t),a&&a(c))},gameName:i}),n.createElement("div",{className:"headerText"},m(l?"description.juecesenpartida":"description.usuariosenpartida")),n.createElement("ul",{className:"playersList"},0===c.length?f:c.map(((e,t)=>n.createElement(C,{key:t,player:e,i:t,onGameDirectorChange:g,maxGroups:s,onGroupChange:p,editMode:!0,isForJudge:l,onRemovePlayer:d}))))))};var R=a(91487),F=a(66287),U={};U.styleTagTransform=v(),U.setAttributes=g(),U.insert=d().bind(null,"head"),U.domAPI=u(),U.insertStyleElement=h(),s()(F.A,U),F.A&&F.A.locals&&F.A.locals;const L=function(e){let{onMaxTimeChange:t,minutes:a,seconds:r}=e;const i=[a,r];function o(e,a){const n=[...i];n[a]=e,e=function(e){const t=Number(e[0])||0;return 1e3*(Number(e[1])||0)+60*t*1e3}(n),t&&t(e)}return n.createElement("div",{className:"pickerContainer rounded rounded2"},n.createElement(R.A,{value:i[0],initialValue:0,minValue:0,maxValue:60,callback:e=>{o(e,0)}}),n.createElement("div",{className:"maxTimePickerContainer--separator"},"m"),n.createElement(R.A,{value:i[1],initialValue:0,minValue:0,maxValue:60,callback:e=>{o(e,1)}}),n.createElement("div",{className:"maxTimePickerContainer--separator"},"s"))};var V=a(55038);const B=function(e){let{onMaxTimeChange:t,onMaxPointsChange:a,showTimePicker:r,time:i,points:l}=e;const{t:s}=(0,o.B)(["main"]),c=V.default.millisToTime(i);let u=n.createElement(n.Fragment,null);return r&&(u=n.createElement(n.Fragment,null,n.createElement("p",null,s("content.maxTimeText1")),n.createElement(L,{onMaxTimeChange:t,onMaxPointsChange:a,minutes:c.m,seconds:c.s,millis:c.mm}))),n.createElement("div",null,u,n.createElement("p",null,s("content.maxTimeText2")),n.createElement("div",{className:"pickerContainer rounded rounded2"},n.createElement(R.A,{value:l,minValue:0,initialValue:0,callback:e=>{a(e)}})))},D=function(e){let{onZonesChange:t,value:a=1}=e;const{t:r}=(0,o.B)(["main"]);return n.createElement("div",null,n.createElement("p",null,r("content.seleccionZonas"),":"),n.createElement("div",{className:"pickerContainer rounded rounded2"},n.createElement(R.A,{value:a,minValue:1,maxValue:40,callback:e=>{t(e)},initialValue:1})))},z=function(e){let{onGroupsChange:t,value:a,minValue:r,maxValue:i}=e;const{t:l}=(0,o.B)(["main"]);return P.isOffline?n.createElement(n.Fragment,null):n.createElement("div",null,n.createElement("p",null,l("content.selecciongrupos"),":"),n.createElement("div",{className:"pickerContainer horizontalScrollContainer rounded rounded2"},n.createElement(R.A,{minValue:r||1,maxValue:i||10,value:a,callback:e=>{t(e)},initialValue:1})))},Y=function(e){let{onGatesChange:t,zones:a,value:r,minValue:i,maxValue:l}=e;const{t:s}=(0,o.B)(["main"]),c=[];for(let e=0;e<a;e++)c.push(n.createElement("div",{key:"pickerContainer".concat(e)},n.createElement("div",{key:e,className:"zoneName"},s("description.zona")," ",e+1,":"),n.createElement("br",{key:"br".concat(e)}),n.createElement(R.A,{key:"picker".concat(e),minValue:i||1,maxValue:l||40,value:r,callback:a=>{t(a,e)},initialValue:1})));return n.createElement("div",null,n.createElement("p",null,s("content.seleccionPuertas"),":"),n.createElement("div",{className:"gatesPickerContainer pickerContainer horizontalScrollContainer rounded rounded2"},c))};var J=a(17985),K=a(55711),Z=a(12996),q=a.n(Z),W=a(93899),H=a.n(W),Q=a(82953),X={};X.styleTagTransform=v(),X.setAttributes=g(),X.insert=d().bind(null,"head"),X.domAPI=u(),X.insertStyleElement=h(),s()(Q.A,X),Q.A&&Q.A.locals&&Q.A.locals;const $=function(e){let{preconfiguredGame:t,onGameCreated:a}=e;const{t:l}=(0,o.B)(["main"]),s=[],{isUserLoged:c}=n.useContext(K.F);if(n.useEffect((()=>{j.default.pageview("/gameconfigurator")}),[]),!c&&!P.isOffline)return n.createElement(r.C5,{state:{from:"/gameconfigurator"},to:{pathname:"/"}});const[u,m,d,p,g,f,h,y,v,E,x,b,w,C,A,G,N]=H()({preconfiguredGame:t,onGameCreated:a});return s.push(n.createElement(B,{key:0,mode:u.pointsType,onMaxPointsChange:y,onMaxTimeChange:v,time:u.maxTime,points:u.maxPoints,showTimePicker:!0})),u.gameType!==i.GAME_TYPE_KING&&(s.push(n.createElement(D,{key:1,game:u,value:u.zones,onZonesChange:E,onGatesChange:x,onMaxPointsChange:y,onMaxTimeChange:v})),s.push(n.createElement(Y,{key:2,zones:u.zones,value:10,onGatesChange:x})),s.push(n.createElement(z,{key:3,onGroupsChange:w,value:1,minValue:1,maxValue:10})),P.isOffline||s.push(n.createElement(I,{key:4,isForJudge:!0,maxGroups:d,inPlayers:u.judges,gameName:u.name,onGameDirectorChange:A,onPlayerNumerChange:f}))),n.createElement(n.Fragment,null,n.createElement(J.default,{message:m}),n.createElement("div",{className:"newGameContainer rounded rounded1"},n.createElement("div",{className:"newGame"},n.createElement("div",{className:"headerText bold"},l("description.nuevaPartida")),n.createElement("div",{className:"newGameRow"},n.createElement("span",{className:""},l("description.nombre")),": ",n.createElement("input",{value:u.name,className:"newGameNameInput",type:"text",onChange:b})),n.createElement("div",{className:"newGameRow"},n.createElement("span",{className:""},l("description.fecha")),": ",u.date.toLocaleString()),n.createElement("div",{className:"newGameRow"},n.createElement("span",{className:""},l("description.esPublica")),": ",n.createElement("input",{type:"checkbox",checked:u.isPublic,onChange:C})),n.createElement("div",{className:"newGameRow"},n.createElement("span",{className:""},l("description.localizacion")),":",n.createElement(q(),{onLocationResolved:g})))),n.createElement(T,{selectedGameType:u.gameType,selectedPointsType:u.pointsType,onGameTypeChange:e=>{p(e)}}),s,n.createElement(I,{gameName:u.name,isForJudge:!1,inPlayers:u.players,maxGroups:d,onPlayerNumerChange:e=>{h&&h(e)}}),n.createElement("input",{type:"checkbox",onChange:G}),l("description.ordenRamdomJugadores"),n.createElement("p",null,n.createElement("button",{className:"importantNote",onClick:()=>{N(d,u)}},l("description.crearjuego")),n.createElement("button",{onClick:()=>{window.location.reload()}},l("description.atras"))))}},82953:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(31601),r=a.n(n),i=a(76314),o=a.n(i)()(r());o.push([e.id,".gatesPickerContainer .picker,.gatesPickerContainer .zoneName{margin:0 15px}",""]);const l=o},57488:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(31601),r=a.n(n),i=a(76314),o=a.n(i)()(r());o.push([e.id,".gameType{margin:25px 0}.gameSelectText{line-height:1.5;font-size:16px;padding:25px;text-align:left;margin-bottom:15px;text-align:justify}",""]);const l=o},66287:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(31601),r=a.n(n),i=a(76314),o=a.n(i)()(r());o.push([e.id,".pickerContainer{display:flex;font-size:18px;padding:15px;margin:15px}.maxTimePickerContainer--separator{max-width:40px;height:112px;line-height:112px}",""]);const l=o},35275:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(31601),r=a.n(n),i=a(76314),o=a.n(i)()(r());o.push([e.id,".players{margin-bottom:25px;padding-bottom:15px}.playersList{margin:10px;padding:0}.playerListItem{margin-bottom:10px;line-height:42px;text-align:right;padding-right:10px}",""]);const l=o},96436:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(31601),r=a.n(n),i=a(76314),o=a.n(i)()(r());o.push([e.id,".playerListItem.closed{width:auto;height:155px;overflow:hidden}.pickerContainer.handicapBox{margin:5px;padding:25px}.playerBox .textOverflow{max-width:190px;display:inline-block}.playerBox button{float:right}.handicapBox .handicapLabel{width:50%;text-align:center;line-height:6}.textOverflow{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]);const l=o},38449:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(31601),r=a.n(n),i=a(76314),o=a.n(i)()(r());o.push([e.id,".userSearchContainer img{margin:5px 0 5px 5px}.userSearchContainer .userSearchResultsText{margin-bottom:15px}.userSearchContainer .userSearchText{padding:25px}.userSearchContainer .resultsContainer{border:1px solid;width:85%;border-radius:14px;padding:15px;margin-top:15px}.userSearchContainer .resultsContainer .userSearchItem{text-align:right}.userSearchContainer .resultsContainer .userSearchItem .userSearchResult{max-width:230px;display:block;float:left}.userSearchContainer .resultsContainer .userSearchItem button{float:left;margin:0 0 0 5px}.userSearchContainer .resultsContainer:empty{border:0px solid}",""]);const l=o},36236:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=a(42578),r=a(46662),i=a(3442),o=a(96154),l=a(43841),s=a(98784),c=a(90598),u=a(788),m={getMaxTimeAndPointsFromGameType:function(e){var t=0,a=0;switch(e){case u.GAME_TYPE_AECAR:t=n.AecarGameScores.maxPoints,a=n.AecarGameScores.maxTime;break;case u.GAME_TYPE_KING:t=l.KingGameScores.maxPoints,a=l.KingGameScores.maxTime;break;case u.GAME_TYPE_ISRCC:t=r.IsrccGameScores.maxPoints,a=r.IsrccGameScores.maxTime;break;case u.GAME_TYPE_LEVANTE:t=i.Levante124GameScores.maxPoints,a=i.Levante124GameScores.maxTime;break;case u.GAME_TYPE_COPAESPANA:t=o.RegionalZonaRcGameScores.maxPoints,a=o.RegionalZonaRcGameScores.maxTime;break;case u.GAME_TYPE_MINICRAWLERPASSION:t=s.MiniCrawlerPassionGameScores.maxPoints,a=s.MiniCrawlerPassionGameScores.maxTime;break;case u.GAME_TYPE_GENERIC:t=c.GenericGameScores.maxPoints,a=c.GenericGameScores.maxTime;break;default:t=0,a=0}return[a,t]}};t.default=m},12996:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,r)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(a(96540)),s=o(a(56554)),c=o(a(55038)),u=a(32418);t.default=function(e){var t,a=e.onLocationResolved,n=l.useState(0),r=n[0],i=n[1],o=l.useState({latitude:0,longitude:0}),m=o[0],d=o[1],p=(0,u.useTranslation)(["main"]).t;return navigator.geolocation?0===r?t=l.createElement("a",{className:"bold",href:"https://crawlear.com",onClick:function(e){e.preventDefault(),navigator.geolocation?(i(2),navigator.geolocation.getCurrentPosition((function(e){var t={latitude:e.coords.latitude,longitude:e.coords.longitude};a(t),i(1),d(t)}),(function(){a({}),i(0)}))):i(0)}},p("description.obtener")):2===r?t=l.createElement(s.default,null):1===r&&(t=l.createElement(l.Fragment,null,l.createElement("span",null,"(","".concat(m.latitude,",").concat(m.longitude),")"),l.createElement("a",{href:c.default.getMapsURL(m.latitude,m.longitude),rel:"noreferrer",target:"_blank"},p("description.vergooglemaps")))):t=l.createElement("div",{className:""},p("content.nogeolocation")),t}},93899:function(e,t,a){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,r)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&r(t,e,a);return i(t,e),t},l=this&&this.__spreadArray||function(e,t,a){if(a||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(a(96540)),u=a(788),m=a(788),d=s(a(36236)),p=a(81156),g=a(84976),f=a(32418),h=s(a(38791)),y=s(a(55038));t.default=function(e){var t=e.preconfiguredGame,a=e.onGameCreated,r=c.useState((function(){var e=t||new u.Game("",(new Date).toLocaleDateString(),{latitude:0,longitude:0},!0,m.GAME_TYPE_LEVANTE,[],[],6e5,40,new Array(1).fill(10),1,0,[],[],[]);return e.date=(new Date).toLocaleDateString(),e})),i=r[0],o=r[1],s=(0,g.useNavigate)(),v=c.useState(""),E=v[0],x=v[1],T=c.useState(!1),b=T[0],w=T[1],C=c.useState(1),P=C[0],A=C[1],G=(0,f.useTranslation)(["main"]).t,N=window.crawlear.fb;function S(e){var t=n({},i),a="addJudge";i.judges.length>e.length&&(a="removeJudge"),h.default.event("menu",a,e.length),t.judges=l([],e,!0),p.isOffline&&!t.owner.length&&t.owner.push(m.OFFLINE_USER_UID),o(t),x("")}return c.useEffect((function(){window.scrollTo(0,0),p.isOffline&&S([u.OfflinePlayer])}),[]),[i,E,P,function(e){var t,a=n({},i);h.default.event("menu","playModeChange",e),a.gameType=e,t=d.default.getMaxTimeAndPointsFromGameType(a.gameType),a.maxTime=t[0],a.maxPoints=t[1],o(a)},function(e){if(e.latitude&&e.longitude){var t=n({},i);t.location=e,o(t)}else x(G("error.nogeolocation"))},S,function(e){var t=n({},i),a="addPlayer";i.players.length>e.length&&(a="removePlayer"),h.default.event("menu",a,e.length),t.players=l([],e,!0),o(t),x("")},function(e){var t=n({},i);h.default.event("menu","maxPointsSet",e),t.maxPoints=e,o(t)},function(e){var t=n({},i);t.maxTime=e,h.default.event("menu","maxTimeSet",e),o(t)},function(e){var t=n({},i);i.zones<e?t.gates.push(10):t.gates.pop(),t.zones=e,h.default.event("menu","zonesSet",e),o(t)},function(e,t){var a=n({},i);a.gates[t]=e,h.default.event("menu","gateSet",e),o(a)},function(e){var t=n({},i),a=e.target.value;a&&(t.name=a,o(t),x(""))},function(e){A(e)},function(e){var t=n({},i);t.isPublic=e.target.value,o(t)},function(e,t){var a=i.judges[e].uid,r=n({},i);if(t&&!r.owner.find((function(e){return e===a})))r.owner.push(a),o(r);else if(!t&&r.owner.find((function(e){return e===a}))){var l=r.owner.indexOf(a);r.owner.splice(l,1),o(r)}},function(e){var t=e.target.checked;w(t)},function(e,t){var r=function(e,t){for(var a=new Array(e).fill(0),n=0;n<t.players.length;n++)a[t.players[n].group]++;return void 0===a.find((function(e){return 0===e}))}(e,t);if(window.scrollTo(0,0),t.name&&t.name.length)if(r)if(t.judges.length||t.gameType===m.GAME_TYPE_KING)if(t.players.length)if(t.gameType===m.GAME_TYPE_KING||t.owner.length){if(t.gameType!==m.GAME_TYPE_KING&&r||t.gameType===m.GAME_TYPE_KING){var i=n({},t);t.gameType===m.GAME_TYPE_KING&&(i.judges.push(n({},window.crawlear.user)),i.zones=1,i.gates=new Array(1).fill(1)),i.uids=y.default.getUidsFromUsers(i.players),i.jids=y.default.getUidsFromUsers(i.judges),b&&function(e){if(e.players.length){var t=l([],e.players,!0);t=t.sort((function(e,t){return Math.random()-.5})),e.players=t,u.GameUtils.redoPlayersIds(e)}}(i),u.GameUtils.init(i,u.GameUtils.getGameTypeControlTextValuesInit(i.gameType),u.GameUtils.getGameTypeFiascoControlTextValuesInit(i.gameType),!0),p.isOffline&&a?a(i):N.setGame(i,(function(e){i.gid=e.gid,N.createGameProgression(i),o(i),s("/game")}),(function(){}))}}else x(G("error.nodirectordepartida"));else x(G("error.nojugadores"));else x(G("error.nojueces"));else x(G("error.rellenargrupos"));else x(G("error.nonombre"))}]}}}]);