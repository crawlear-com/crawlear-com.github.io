"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[4569],{8871:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".totalValue{font-size:26px}.totalTimeContainer{margin:10px;padding:10px;font-size:.8em}.repairButton{display:block;margin:10px auto}.generic .gateProgressionContainer{width:26%;float:left;margin:0 10px 0 10px}.generic .gatePoints{padding:0px;width:18px}.generic .controlTextText{width:auto}.gateProgressionContainer .buttonControlTextPlus,.gateProgressionContainer .buttonControlTextMinus{width:35px;height:35px}.gatesContainer{margin:10px;padding:10px;font-size:.8em}.player{padding-bottom:10px}.pointsText{display:inline-block}.fiascoBox{font-size:17px;width:65px;padding:10px;float:left;margin:10px}.fiascoBox .importantNote{margin-bottom:15px}.info{font-size:.8em}.controlTextContainer .timerContainer{float:none;margin:0 auto}",""]);const s=o},9571:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var r=n(96540),a=n(18492),i=n(1126),o=n.n(i),s=n(13233),l=n(98533),c=n(10057),u=n.n(c),d=n(43841),m=n(85072),p=n.n(m),f=n(97825),g=n.n(f),b=n(77659),v=n.n(b),h=n(55056),_=n.n(h),y=n(10540),E=n.n(y),T=n(41113),P=n.n(T),O=n(54631),x={};x.styleTagTransform=P(),x.setAttributes=_(),x.insert=v().bind(null,"head"),x.domAPI=g(),x.insertStyleElement=E(),p()(O.A,x),O.A&&O.A.locals&&O.A.locals;const S=function(e){let{onGameEnd:t}=e;const{t:n}=(0,a.B)(["main"]);let i=[];const[c,m,p]=u()({onGameEnd:t}),f=c.game;i.push(r.createElement(s.default,{key:"tmC",courtesyTime:0,startTime:0,label:n("description.tiempo"),maxTime:f.maxTime})),i.push(r.createElement("div",{key:0},n("description.ordenruta"),":"));for(let e=0;e<f.players.length;e++){let t="";(0,l.isPointsFiasco)(f,c.order[e].zones[0])&&(t="blink foreColorRed"),i.push(r.createElement("div",{key:e+1},r.createElement("div",{className:`controlTextContainerQueue rounded bold ${t}`},c.order[e].name,": ",c.order[e].zones[0].totalPoints," ptos")))}i.push(r.createElement("p",{key:f.players.length+1},n("description.puntos").toUpperCase(),":"));for(let e=0;e<f.players.length;e++){let t,a=f.players[e],s=a.zones[0];i.push(r.createElement("div",{key:f.players.length+e+2,className:"playerInfo"},r.createElement("div",{className:"headerPlayer importantNote rounded2 rounded"},r.createElement("div",{className:"bold"},a.name),n("description.total"),": ",s.totalPoints,t),r.createElement("div",{className:"controlTextContainer rounded rounded1"},o()({controlTextValuesString:"controlTextValues",steps:d.KingGameScores.steps,maxValues:d.KingGameScores.maxValues,texts:d.KingGameScores.texts,zone:0,player:e,onValueChange:m}))))}return i.push(r.createElement("button",{key:2*f.players.length+2,className:"importantNote",onClick:p},n("description.fin"))),r.createElement("div",{key:2*f.players.length+3,className:"gameContainer"},i)}},10057:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(n(96540)),u=l(n(38791)),d=n(43841),m=n(32418),p=n(98533),f=n(91642);t.default=function(e){var t=e.onGameEnd,n=(0,m.useTranslation)(["main"]).t,a=c.useContext(f.GameContext).game,i=c.useState((function(){return d.KingGameScores.texts=d.KingGameScores.texts.map((function(e){return n(e)})),function(e){var t={game:e,order:s([],e.players,!0)};(0,p.init)(t.game,(0,p.getGameTypeControlTextValuesInit)(t.game.gameType),(0,p.getGameTypeFiascoControlTextValuesInit)(t.game.gameType),!1);for(var n=0;n<t.game.players.length;n++)t.game.players[n].zones[0].gateProgressionData[0].controlTextValues=new Array(d.KingGameScores.steps.length).fill(0);return t}(a)})),o=i[0],l=i[1];return c.useEffect((function(){u.default.pageview("/kinggame/")}),[]),[o,function(e,t,n){var a,i,c,u=r({},o),d=u.game.players,m=d[n].zones[0],p=m.gateProgressionData[0];p.controlTextValues=s([],p.controlTextValues,!0),p.controlTextValues[t]+=e,m.totalPoints+=e,m.points+=e,u.order=(a=u.order.findIndex((function(e){return e.id===d[n].id})),i=u.order,(c=s([],i,!0)).push(c.splice(a,1)[0]),c),l(u)},function(){t&&t(a)}]}},11792:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=n(75442);t.default=function(e,t){var n={millis:e||0,timer:0,maxTime:t,state:s.TimerStates.Pause,timeStart:Date.now()},r=o.useReducer(s.TimerStateChangeReducer,n);return[r[0],r[1]]}},13233:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var r=n(96540),a=n(18492),i=n(55038),o=n(56802),s=n.n(o),l=n(75442),c=n(85072),u=n.n(c),d=n(97825),m=n.n(d),p=n(77659),f=n.n(p),g=n(55056),b=n.n(g),v=n(10540),h=n.n(v),_=n(41113),y=n.n(_),E=n(94160),T={};T.styleTagTransform=y(),T.setAttributes=b(),T.insert=f().bind(null,"head"),T.domAPI=m(),T.insertStyleElement=h(),u()(E.A,T),E.A&&E.A.locals&&E.A.locals;const P=function(e){let{startTime:t,forceAction:n,label:o,onTimerChange:c,courtesyTime:u,maxTime:d,onPointBecauseLastMinute:m,onTimeFiasco:p}=e;const{t:f}=(0,a.B)(["main"]),g=r.useRef(null),[b,v,h]=s()(t,d,u,c,m,p,g),_=(0,i.millisToTime)(b.millis);return r.useEffect((()=>{n===l.TimerStates.Stop&&h(),n===l.TimerStates.Pause&&b.state===l.TimerStates.Play&&v(b)}),[n,b,v,h]),r.createElement("div",{ref:g,className:"timerContainer"},r.createElement("div",{className:"timerLabel"},(o||f("description.tiempo")).toUpperCase(),":"),r.createElement("div",{className:"timer"},(0,i.printTime)(_)),r.createElement("button",{className:"timerPlayButton",onClick:()=>{v(b)}}),r.createElement("button",{onClick:h,className:"resetButton"}))}},13384:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=n(32418),c=n(91642),u=n(55038),d=n(98533),m=o(n(38791));t.default=function(e){var t=e.zoneIndex,n=e.playerIndex,r=s.createElement(s.Fragment,null),a=(0,l.useTranslation)(["main"]).t,i=s.useContext(c.GameContext).game,o=i.players[n],p=o.zones[t];return(0,d.isFiasco)(i,n,t)&&(m.default.event("play","fiasco",o.name),r=s.createElement("div",{className:"fiascoBox rounded importantNote"},"FiASCO!")),s.createElement(s.Fragment,null,s.createElement("div",{className:"playersList"},s.createElement("div",{className:"playerListItem importantNote rounded"},s.createElement("img",{src:o.avatar,alt:"avatar"}),o.name)),s.createElement("div",{className:"controlTextContainer rounded rounded2"},s.createElement("div",{className:"smallText"},a("description.zona"),": ",t+1),s.createElement("div",{className:"smallText"},a("description.puertas"),": ",i.gates[t]),s.createElement("div",{className:"smallText"},"max ",a("description.tiempo"),": ",(0,u.printTime)((0,u.millisToTime)(i.maxTime))),s.createElement("div",{className:"smallText"},"max ",a("description.puntos"),": ",i.maxPoints),s.createElement("div",{className:"bold pointsText"},a("description.total"),": ",p.totalPoints),r))}},15420:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=n(32418),l=n(79887),c=n(58e3);t.default=function(e){var t=o.useState(null),n=t[0],r=t[1],a=o.useState(-1),i=a[0],u=a[1],d=o.useState(""),m=d[0],p=d[1],f=o.useContext(l.GameProgressionContext)[0],g=(0,s.useTranslation)(["main"]).t;return[n,i,m,f,function(e,t){u(t),r(e),p("")},function(){if(n&&-1!==i){var t=n.id,r=n.group,a=f[r][t][i];a.status===c.STATUS_WAITING&&window.confirm(g("content.quieresempezarzona"))||a.status===c.STATUS_DONE&&window.confirm(g("content.quiereseditarpartida"))||a.status===c.STATUS_PLAYING&&window.confirm(g("content.seguroeditarpartidaenjuego"))?(p(""),e(n,i)):a.status===c.STATUS_PLAYING?p(g("error.juegoencurso")):a.status===c.STATUS_REPAIR&&p(g("error.reparacionencurso"))}}]}},17643:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".directorRequestContainer{margin-top:15px;border:1px solid red;border-radius:15px}",""]);const s=o},19160:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".repairTimerContainer .timerContainer{padding:0}",""]);const s=o},21123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={listenEvent:function(e,t,n){e.addEventListener(t,n)},sendEvent:function(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}};t.default=n},24569:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(96540),a=n(18492),i=n(58e3),o=n(83006),s=n.n(o),l=n(32081),c=n(40038),u=n.n(c),d=n(82155),m=n.n(d),p=n(85072),f=n.n(p),g=n(97825),b=n.n(g),v=n(77659),h=n.n(v),_=n(55056),y=n.n(_),E=n(10540),T=n.n(E),P=n(41113),O=n.n(P),x=n(68945),S={};S.styleTagTransform=O(),S.setAttributes=y(),S.insert=h().bind(null,"head"),S.domAPI=b(),S.insertStyleElement=T(),f()(x.A,S),x.A&&x.A.locals&&x.A.locals;const w=function(e){let{inGame:t,onBackButtonClick:n}=e,o=r.createElement(r.Fragment,null);const{t:c}=(0,a.B)(["main"]),p=(0,i.getGameExtras)(t.gameType),[f,g,b,v,h,_,y,E,T,P]=m()(t,p),O=(0,i.getGameContent)(g.gameType,h.id,_),[x]=r.useState((()=>(0,i.getGroupFromJid)(g,window.crawlear.user.uid)));return f===d.GAME_STATUS_CREATED?o=r.createElement(u(),{game:g,onBeginGame:y,onGameEnd:T,onBackButtonClick:n,onClosePlayButtonClick:E,jidGroup:x,gameProgression:b,setGameProgression:v}):f===d.GAME_STATUS_PLAYING?o=r.createElement(s(),{player:h.id,zone:_,game:g,gameExtras:p,onGameEnd:T,onRepair:P},O):f===d.GAME_STATUS_FINISHED&&(o=r.createElement("div",{className:"gameList"},r.createElement(l.default,{game:g}),r.createElement("button",{className:"backButton",onClick:n},c("description.atras")))),o}},28641:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(18492),a=n(96540),i=n(2665),o=n.n(i),s=n(55038),l=n(58e3),c=n(98533);const u=function(e){let{gameType:t,gameProgression:n}=e;const{t:i}=(0,r.B)(["main"]);if(n.data){const{points:e,totalPoints:r,time:u,gateFails:d,gateProgression:m,simpathyPoints:p,handicap:f,bonitification:g}=n.data;let[b,v]=(0,l.getAllGameTexts)(t,i);return a.createElement(a.Fragment,null,a.createElement("ul",null,a.createElement("li",null,i("description.puntos"),": ",a.createElement("span",{className:"bold"},e)),m?a.createElement("li",null,i("description.avancepuerta"),": ",a.createElement("span",{className:"bold"},m)):a.createElement(a.Fragment,null),void 0!==d&&void 0!==g?a.createElement(a.Fragment,null,a.createElement("li",null,i("description.fallospuerta"),": ",a.createElement("span",{className:"bold"},d)),a.createElement("li",null,i("description.bonificacion"),": ",a.createElement("span",{className:"bold"},-2*g))):a.createElement(a.Fragment,null),void 0!==p?a.createElement("li",null,i("description.portiempo"),": ",a.createElement("span",{className:"bold"},p)):a.createElement(a.Fragment,null),void 0!==f?a.createElement("li",null,i("description.handicap"),": ",a.createElement("span",{className:"bold"},f)):a.createElement(a.Fragment,null),a.createElement("li",null,i("description.total"),": ",a.createElement("span",{className:"bold"},r)),a.createElement("li",null,i("description.tiempo"),": ",a.createElement("span",{className:"bold"},(0,s.printTime)((0,s.millisToTime)(u))))),a.createElement(o(),{controlTextValues:n.data.gateProgressionData?(0,c.sumControlTextValues)(n.data.gateProgressionData):n.data.controlTextValues,texts:b}),n.data.fiascoControlTextValues&&n.data.fiascoControlTextValues.filter((e=>e>0)).length>0?a.createElement(a.Fragment,null,a.createElement("div",{className:"fiascosText left bold"},i("points.fiascos"),":"),a.createElement(o(),{controlTextValues:n.data.fiascoControlTextValues,texts:v})):a.createElement(a.Fragment,null))}return a.createElement(a.Fragment,null)}},33783:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=n(32418);t.default=function(e){for(var t=e.numZones,n=e.gameProgression,r=(0,s.useTranslation)(["main"]).t,a=[],i=function(e){var t=[];Object.entries(n).forEach((function(n,a){var i=0;Object.entries(n[1]).forEach((function(t,n){t[1]&&t[1][e]&&"done"===t[1][e].status&&t[1][e].data&&i++})),i===Object.entries(n[1]).length&&t.push(o.createElement("span",{key:"dG".concat(e),className:"directorGroup"},r("description.grupo")," ",a+1))})),a.push(o.createElement("div",{key:"dZ".concat(e),className:"directorZone horizontalScrolling"},r("description.zona")," ",e+1,": ",t))},l=0;l<t;l++)i(l);return o.createElement(o.Fragment,null,[a])}},35153:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=o(n(96540)),u=l(n(51605)),d=n(98533),m=n(75730),p=l(n(38791)),f=n(91642);function g(e,t){var n={tickTime:0,forceAction:"",game:e};return(0,d.init)(n.game,(0,d.getGameTypeControlTextValuesInit)(n.game.gameType),(0,d.getGameTypeFiascoControlTextValuesInit)(n.game.gameType),t),n}t.default=function(e,t,n,a){var i=new u.default,o=c.useContext(f.GameContext),l=o.game,b=o.gameExtras,v=c.useState((function(){return window.scrollTo(0,0),g(l,!1)})),h=v[0],_=v[1],y=h.game.players[n].zones[a];return[h,function(e){var t=r({},h);if(!e){var i=t.game.players[n].zones[a];i.simpathyPoints=0,b.onTimerChange(i)}y.time=e,_(r(r({},t),{tickTime:e,forceAction:"play"}))},function(e,t){var o=r({},h),l=o.game,c=l.players[n].zones[a],u=c.gateProgressionData[c.gateProgression];(l.maxPoints<=c.points&&l.maxPoints>0||l.maxTime<=h.tickTime&&l.maxTime>0)&&!(c.points+e<=l.maxPoints&&0===c.fiascoControlTextValues.filter((function(e){return e>0})).length)||(u.controlTextValues=s([],u.controlTextValues,!0),u.controlTextValues[t]+=e,c.points+=e,c.gateProgression<l.gates[a]&&(u.gatePoints+=e),i.sendMessage(m.MSG_POINTS,c.points),b.onChangeScore(c),_(o),(0,d.isFiasco)(o.game,n,a)&&_(r(r({},h),{forceAction:"pause"})))},function(){var e=r({},h);window.scrollTo(0,0),p.default.event("play","reset",e.game.players[n].name),(e=g(e.game,!0)).forceAction="stop",_((function(t){return r(r({},t),e)}))},function(){var t=r({},h),i=t.game,o=i.players;window.scrollTo(0,0),b.onEndPlayer(i,h.tickTime,n,a),t.forceAction="stop",_(t),p.default.event("play","endPlayer",o[n].name),document.body.classList.remove((0,d.getGameTypeBodyClassName)(l.gameType)),e(t.game)},function(e){var t=r({},h),o=t.game.players[n].zones[a];o.gateProgression=e,i.sendMessage(m.MSG_GATES,o.gateProgression),e===t.game.gates[a]&&(t.forceAction="pause"),b.onGateProgressionChange(o),_(t)},function(e,t){var i=r({},h),o=i.game.players[n].zones[a];o.fiascoControlTextValues=s([],o.fiascoControlTextValues,!0),o.fiascoControlTextValues[t]+=e,o.fiascoControlTextValues[t]>0&&(i.forceAction="pause"),b.onFiascoChangeScore(),_(i)},function(){var e=r({},h),t=e.game.players[n].zones[a];t.simpathyPoints++,b.onPointBecauseLastMinute(t),_(e)},function(){var e=r({},h);_(r(r({},e),{tickTime:l.maxTime+l.courtesyTime,forceAction:"pause"}))},function(){var e=r({},h);e.game.players[n].zones[a].time=h.tickTime,e.forceAction="stop",_(e),t&&t(n,a)}]}},40038:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=n(788),c=o(n(83006)),u=n(79887),d=n(43841),m=o(n(42927));t.default=function(e){var t=e.game,n=e.onBeginGame,r=e.onGameEnd,a=e.onBackButtonClick,i=e.onClosePlayButtonClick,o=e.jidGroup,p=e.gameProgression,f=e.setGameProgression;return s.createElement(s.Fragment,null),t.gameType===l.GAME_TYPE_KING?s.createElement(c.default,{game:t,onGameEnd:r,gameExtras:d.gameExtras}):s.createElement(u.GameProgressionContext.Provider,{value:[p,f]},s.createElement(m.default,{game:t,jidGroup:o,onBeginGame:n,onBackButtonClick:a,onCloseButonClick:i}))}},41417:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(85072),a=n.n(r),i=n(97825),o=n.n(i),s=n(77659),l=n.n(s),c=n(55056),u=n.n(c),d=n(10540),m=n.n(d),p=n(41113),f=n.n(p),g=n(55748),b={};b.styleTagTransform=f(),b.setAttributes=u(),b.insert=l().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=m(),a()(g.A,b);const v=g.A&&g.A.locals?g.A.locals:void 0},42927:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=n(32418),c=n(98533),u=o(n(69411)),d=o(n(62729)),m=o(n(81397)),p=o(n(22020)),f=n(58e3),g=o(n(15420)),b=o(n(70705));t.default=function(e){var t=e.game,n=e.jidGroup,r=e.onBeginGame,a=e.onBackButtonClick,i=e.onCloseButonClick,o=(0,l.useTranslation)(["main"]).t,v=(0,g.default)(r),h=v[0],_=v[1],y=v[2],E=v[3],T=v[4],P=v[5];return s.createElement(s.Fragment,null,s.createElement(d.default,{game:t,gameProgression:E}),s.createElement(p.default,{message:y}),s.createElement("div",{className:"trackJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},o("description.juezdepista")),s.createElement(m.default,{onZoneClick:T,game:t,jidGroup:n}),s.createElement(p.default,{message:y}),s.createElement(b.default,{t:o,game:t,player:h,zone:_,jidGroup:n,onBeginPlayClick:P})),s.createElement("div",{className:"tendJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},o("description.juezdecarpa")),s.createElement(u.default,{gameProgression:E,gid:t.gid,players:t.players,onRepairEnd:f.onRepairEnd})),s.createElement("button",{className:"backButton",onClick:a},o("description.atras")),(0,c.isCurrentUserIsOwner)(t.owner)&&(0,f.isGroupGameFinished)(t,E,n)?s.createElement("button",{className:"closeButton importantNote",onClick:function(){i(t)}},o("description.cerrarpartida")):s.createElement(s.Fragment,null))}},51605:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(21123)),i=function(){function e(){this.container=document.querySelector(".AppMainContainer")}return e.prototype.listenMessages=function(e,t){a.default.listenEvent(this.container,e,t)},e.prototype.sendMessage=function(e,t){a.default.sendEvent(this.container,e,t)},e}();t.default=i},54631:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".controlTextContainerQueue{background-color:#ffa602;border-radius:15px;margin:10px;font-size:15px;padding:5px}",""]);const s=o},54953:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(96540),a=n(18492),i=n(13233),o=n(85072),s=n.n(o),l=n(97825),c=n.n(l),u=n(77659),d=n.n(u),m=n(55056),p=n.n(m),f=n(10540),g=n.n(f),b=n(41113),v=n.n(b),h=n(19160),_={};_.styleTagTransform=v(),_.setAttributes=p(),_.insert=d().bind(null,"head"),_.domAPI=c(),_.insertStyleElement=g(),s()(h.A,_),h.A&&h.A.locals&&h.A.locals;const y=function(e){let{onTimeFiasco:t,onRepairTimerChange:n}=e;const{t:o}=(0,a.B)(["main"]);return r.createElement("div",{className:"repairTimeContainer"},r.createElement(i.default,{courtesyTime:0,label:o("points.reparacion"),onTimeFiasco:t,onTimerChange:n,maxTime:18e5}))}},55748:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".rc-slider{width:80%;height:47px;margin:15px auto}.rc-slider-rail{background-color:#333}.rc-slider-track{background-color:#aaa}.rc-slider-dot{border-color:#666}.rc-slider-handle,.rc-slider-dot.rc-slider-dot-active{border-color:#fff;border-top-left-radius:0px;border-bottom-left-radius:0px;border-top-right-radius:75px;border-bottom-right-radius:75px}.rc-slider-mark-text{color:#000;padding-bottom:50%}body.lightMode .rc-slider-handle{background-color:#333}body.lightMode .rc-slider-rail{background-color:#333}body.lightMode .rc-slider-track{background-color:#aaa}body.lightMode .rc-slider-dot{border-color:#666}",""]);const s=o},56802:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var l=o(n(96540)),c=s(n(51605)),u=n(75730),d=s(n(11792)),m=n(75442),p=n(55038),f=s(n(38791));t.default=function(e,t,n,a,i,o,s){var g=l.useMemo((function(){return new c.default}),[]),b=l.useRef(e||0),v=(0,d.default)(e,t),h=v[0],_=v[1];return[h,function(e){if(s&&s.current.classList.toggle("play"),e.state===m.TimerStates.Pause||e.state===m.TimerStates.Stop){var t=Date.now(),l=window.setInterval((function(){!function(e){b.current<e.maxTime?(b.current=Date.now()-e.timeStart+e.millis,a&&a(b.current),_({type:m.TimerStates.Update,payload:{millis:b.current}}),Date.now()%2==0&&g.sendMessage(u.MSG_TIME,(0,p.printTime)((0,p.millisToTime)(b.current)))):function(e,t,n,r){return e&&t>0&&n>=t&&n<t+r||0===t}(i,e.maxTime,b.current,n)?(b.current=Date.now()-e.timeStart,a&&a(b.current),_({type:m.TimerStates.Update,payload:{millis:b.current}}),e.maxTime>0&&s&&!s.current.classList.contains("blink")&&s.current.classList.add("blink"),e.maxTime>0&&(e.maxTime+b.current)%1e4==0&&i()):(s&&s.current.classList.toggle("blink"),s&&s.current.classList.toggle("foreColorRed"),o&&o()),g.sendMessage(u.MSG_TIME,(0,p.printTime)((0,p.millisToTime)(b.current)))}(r(r({},e),{timeStart:t}))}),10);f.default.event("play","timePlay",""),s&&s.current.classList.remove("blink"),g.sendMessage(u.MSG_START,{}),e.timer&&window.clearInterval(e.timer),_({type:m.TimerStates.Play,payload:{millis:b.current,timer:l,timeStart:t}})}else f.default.event("play","timePause",""),g.sendMessage(u.MSG_STOP,{}),e.timer&&window.clearInterval(e.timer),_({type:m.TimerStates.Pause,payload:{millis:b.current}})},function(){b.current=0,s&&s.current.classList.contains("play")&&s.current.classList.toggle("play"),h.timer&&clearInterval(h.timer),s&&s.current.classList.remove("blink"),f.default.event("play","timeStop",""),_({type:m.TimerStates.Stop}),a&&a(b.current),g.sendMessage(u.MSG_STOP,{})}]}},57725:(e,t,n)=>{e.exports=n.p+"c3934397bbea4f4b413d.png"},58349:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=n(55038),c=o(n(96276)),u=o(n(13233)),d=n(32418),m=n(91642);t.default=function(e){var t=e.playerZone,n=e.forceAction,r=e.setRepairStatus,a=e.onTimerChange,i=e.onTimeFiasco,o=e.onPointBecauseLastMinute,p=(0,d.useTranslation)(["main"]).t,f=s.useContext(m.GameContext).game;return s.createElement("div",{className:"controlTextContainer rounded rounded2"},(0,l.isIphone)()?s.createElement(s.Fragment,null):s.createElement(c.default,null),f.courtesyTime>0?s.createElement("div",{className:"pointsText"},p("description.puntos")," ",p("description.portiempo"),": ",t.simpathyPoints):s.createElement(s.Fragment,null),s.createElement("button",{className:"repairButton importantNote",onClick:r},p("description.iniciarreparacion")),s.createElement(u.default,{courtesyTime:f.courtesyTime,startTime:t.time,label:p("description.tiempo"),forceAction:n,onTimerChange:a,onTimeFiasco:i,onPointBecauseLastMinute:o,maxTime:f.maxTime}))}},58931:(e,t,n)=>{e.exports=n.p+"7df5afd41f704db43dad.png"},61767:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540));t.default=function(e,t){var n=window.crawlear.fb,r=o.useState(new Map),a=r[0],i=r[1];return o.useEffect((function(){function t(e,t){"pending"===t.status&&i((function(n){var r=new Map(n);return r.set(e,t),r}))}0===a.size&&n.getDirectorPresenceRequest(e,t,t)}),[n,e,a]),[a,function(r){if(window.confirm(t("content.aceptarpresencia"))){var o=new Map(a);o.delete(r),i(o),n.acceptDirectorPresenceRequest(e,r)}}]}},62729:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(96540),a=n(18492),i=n(33783),o=n.n(i),s=n(61767),l=n.n(s),c=n(98533),u=n(85072),d=n.n(u),m=n(97825),p=n.n(m),f=n(77659),g=n.n(f),b=n(55056),v=n.n(b),h=n(10540),_=n.n(h),y=n(41113),E=n.n(y),T=n(17643),P={};P.styleTagTransform=E(),P.setAttributes=v(),P.insert=g().bind(null,"head"),P.domAPI=p(),P.insertStyleElement=_(),d()(T.A,P),T.A&&T.A.locals&&T.A.locals;const O=function(e){let{game:t,gameProgression:n}=e;const{t:i}=(0,a.B)(["main"]),[s,u]=l()(t.gid,i),d=[];return(0,c.isCurrentUserIsOwner)(t.owner)?(d.push(r.createElement("div",{key:"zC",className:""},i("content.zonascompletadas"))),d.push(r.createElement(o(),{key:t.name,gameProgression:n,numZones:t.zones})),d.push(r.createElement("p",{key:"pdp",className:"bold"},i("description.peticionesdepresencia"),":")),s||d.push(r.createElement("p",{key:"npsp",className:""},i("description.nopeticionespresencia"))),s&&Array.from(s.keys()).forEach(((e,t)=>{const n=s.get(e);d.push(r.createElement("div",{key:`dR${t}`,className:"directorRequestContainer blink"},r.createElement("div",null,r.createElement("div",null,i("description.de")," ",n.fromName),r.createElement("div",null,i("description.zona"),": ",n.zone+1),r.createElement("div",null,i("description.jugador"),": ",n.playerName),r.createElement("div",null,i("description.estado"),": ",n.status)),r.createElement("div",null,r.createElement("button",{onClick:()=>{u(e)}},i("description.aceptar")))))})),r.createElement("div",{key:"dP",className:"directorContainer rounded rounded3"},r.createElement("div",{className:"bold"},i("description.directordepartida")),r.createElement("br",null),r.createElement(r.Fragment,null,[d]))):r.createElement(r.Fragment,null)}},68945:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".gameProgressionItem{padding:15px;font-size:.7em;display:flex;margin-bottom:10px}.gameProgressionItem .gameProgressionItemHeader{max-width:25%}.gameProgressionItem img{display:block;max-width:90px;max-height:45px;width:auto;height:auto;border-radius:15px}.gameProgressionItem .rounded{background-image:none;margin:8px;box-shadow:none}.tendJudgeContainer{margin-top:15px}.directorContainer{margin-bottom:15px}.directorGroup{background-color:green;color:#fff;border-radius:8px;padding:3px;font-size:.8em;margin-right:5px}.directorZone{margin:5px 0}.gatePoints{padding:5px;border-radius:15px;color:#fff}",""]);const s=o},69411:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=n(32418),c=o(n(78178));n(84381),t.default=function(e){var t=e.gameProgression,n=e.gid,r=e.players,a=e.onRepairEnd,i=(0,l.useTranslation)(["main"]).t,o=[];return t&&Object.entries(t).forEach((function(e){Object.entries(e[1]).forEach((function(t){Object.entries(t[1]).forEach((function(i,l){if("repair"===i[1].status){var u=r[t[0]];o.push(s.createElement(c.default,{key:u.name,setTime:i[1].repairData.setTime,gid:n,playerId:u.id,group:Number(e[0]),zoneIndex:l,zone:i[1],onRepairEnd:a,playerAvatar:u.avatar}))}}))}))})),s.createElement("div",{className:"repairProgressionContainer"},o.length?o:i("description.nohayreparaciones"))}},70705:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=n(98533),c=o(n(70849));t.default=function(e){var t=e.game,n=e.player,r=e.zone,a=e.jidGroup,i=e.onBeginPlayClick,o=e.t;if(t.jids.find((function(e){return e===window.crawlear.user.uid}))){var u=s.createElement(s.Fragment,null);return(n&&n.group===a||(0,l.isCurrentUserIsOwner)(t.owner))&&(u=s.createElement("button",{onClick:i,className:"playButton importantNote"},o("description.empezar"))),s.createElement(s.Fragment,null,o("description.jugadorseleccionado"),": ",n?n.name:""," ",s.createElement("br",null),o("description.zonaseleccionada"),": ",-1!==r?r+1:"",s.createElement("br",null),u,s.createElement(c.default,{game:t,zone:r,playerName:n&&n.name,fromName:window.crawlear.user.displayName}))}return s.createElement(s.Fragment,null)}},70849:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(96540),a=n(18492),i=n(98533);const o=function(e){let{game:t,playerName:n,fromName:o,zone:s}=e;const{t:l}=(0,a.B)(["main"]),c=window.crawlear.fb,u=[],d=t.gid,m=[],[p,f]=r.useState({});function g(e,t){if("pending"===e.status){const n={...p};n[t]=e,f(n)}else if("accepted"===e.status){const e={...p};delete e[t],f(e)}}return d&&n&&o&&s>=0&&!(0,i.isCurrentUserIsOwner)(t.owner)&&0===Object.entries(p).length&&u.push(r.createElement("button",{key:n,onClick:function(){window.confirm(l("content.quieresenviarpeticiondepresencia"))&&c.setDirectorPresenceRequest(d,s,n,o,g)}},l("description.reclamarpresencia"))),Object.keys(p).forEach(((e,t)=>{m.push(r.createElement("div",{key:`${n}${t}`},p[e].status))})),r.createElement("div",{className:"presenceButtonContainer"},u,m)}},75442:function(e,t){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TimerStateChangeReducer=t.TimerStates=void 0,function(e){e.Play="play",e.Stop="stop",e.Pause="pause",e.Update="update"}(n=t.TimerStates||(t.TimerStates={})),t.TimerStateChangeReducer=function(e,t){var a=r({},e),i=t.payload||{};switch(t.type){case n.Pause:a.state=n.Pause,a.timer=0;break;case n.Stop:a.state=n.Stop,a.millis=0,a.timer=0;break;case n.Play:a.state=n.Play,a.millis=i.millis,a.timer=i.timer,a.timeStart=i.timeStart;break;case n.Update:a.millis=t.payload.millis}return a}},75730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MSG_TIME=t.MSG_STOP=t.MSG_START=t.MSG_POINTS=t.MSG_GATES=void 0,t.MSG_GATES="BT_GATES",t.MSG_POINTS="BT_POINTS",t.MSG_START="BT_START",t.MSG_STOP="BT_STOP",t.MSG_TIME="BT_TIME";var n=function(){function e(){this.device={},this.timeCharacteristic={},this.timeValueCharacteristic={},this.pointsCharacteristic={},this.gatesCharacteristic={}}return e.prototype.discoverDevice=function(e){var t=this;navigator.bluetooth.requestDevice({filters:[{name:"CrawlearBluetoothDevice"},{services:["3feb1e8a-3981-4045-ad39-b225135013a0"]}]}).then((function(n){return t.device=n,e&&e(n),n.gatt&&n.gatt.connect()})).then((function(e){return e&&e.getPrimaryService("3feb1e8a-3981-4045-ad39-b225135013a0")})).then((function(e){var t=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8"),n=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b1"),r=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b2"),a=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b3");return Promise.all([t,n,r,a])})).then((function(e){var n=e[0],r=e[1],a=e[2],i=e[3];t.timeCharacteristic=n,t.timeValueCharacteristic=r,t.pointsCharacteristic=a,t.gatesCharacteristic=i})).catch((function(e){console.error(e)}))},e.prototype.sendTime=function(e){this.timeValueCharacteristic&&this.timeValueCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendPoints=function(e){this.pointsCharacteristic&&this.pointsCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendGates=function(e){this.gatesCharacteristic&&this.gatesCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendStart=function(){if(this.timeCharacteristic){var e=Uint8Array.of(1);this.timeCharacteristic.writeValue(e)}},e.prototype.sendStop=function(){if(this.timeCharacteristic){var e=Uint8Array.of(0);this.timeCharacteristic.writeValue(e)}},e}();t.default=n},78178:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=o(n(54953)),c=n(32418);t.default=function(e){var t=e.setTime,n=e.gid,r=e.playerId,a=e.group,i=e.zoneIndex,o=e.zone,u=e.onRepairEnd,d=e.playerAvatar,m=(0,c.useTranslation)(["main"]).t,p=new Date(t).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});return s.createElement("div",{key:r,className:"repairProgressionItem rounded rounded2"},s.createElement("div",{className:"repairProgressionItemHead"},s.createElement("img",{src:d,alt:"player avatar"}),s.createElement("span",{className:"repairProgressionItemZone"},m("description.zona"),": ",i+1),s.createElement("span",{className:"gameProgressionItemHour"},m("description.enreparaciondesde")," ",p)),s.createElement(l.default,{onTimeFiasco:function(){},onRepairTimerChange:function(){}}),s.createElement("button",{onClick:function(){!function(e,t,n,r,a){window.confirm(m("content.finalizarreparacion"))&&u&&u(e,t,n,r,a)}(n,r,a,i,o)},className:"importantNote"},m("description.fin")))}},79887:(e,t,n)=>{n.r(t),n.d(t,{GameProgressionContext:()=>r});const r=n(96540).createContext()},79888:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.status=void 0;var o,s=i(n(96540)),l=n(79887);!function(e){e.waiting="waiting",e.playing="playing",e.repair="repair",e.done="done"}(o||(o={})),t.status=o,t.default=function(e,t,n){var r=s.useState(-1),a=r[0],i=r[1],c=s.useState(-1),u=c[0],d=c[1],m=s.useContext(l.GameProgressionContext)[0];function p(){e(-1,-1),d(-1),i(-1)}return[function(){var e=new Array(n.zones).fill(!1);return m&&Object.entries(m).forEach((function(t,n){Object.entries(t[1]).forEach((function(t,n){Object.entries(t[1]).forEach((function(t,n){"playing"===t[1].status&&!e[n]&&(e[n]=!0)}))}))})),function(e){var n=[];return e.forEach((function(e,r){var a=[];a.push(s.createElement("span",{key:r},t("description.zona")," ",r+1,": ")),e?a.push(s.createElement("span",{key:"dG".concat(r),className:"directorGroup colorRed"},t("description.ocupado"))):a.push(s.createElement("span",{key:"div".concat(r)},s.createElement("span",{className:"directorGroup"},t("description.libre")),s.createElement("br",null))),n.push(s.createElement("div",{key:"dZ".concat(r),className:"directorZone"},a))})),s.createElement("div",{className:""},n)}(e)},function(t,n){var r,s=t.target,l=Number(null===(r=s.closest("[data-zone]"))||void 0===r?void 0:r.getAttribute("data-zone")),c=m[n.group][n.id][l].status;a===l&&u===n.id?p():c===o.waiting||c===o.done||c===o.playing?(d(n.id),i(l),e(n,l)):p()},function(e,t,n){var r;switch(t){case o.waiting:r=e(n?"description.reparacionfinalizada":"description.waiting");break;case o.done:r=e("description.done");break;case o.repair:r=e("description.repair");break;case o.playing:r=e("description.playing");break;default:r=e("description.waiting")}return r},m,u,a]}},81397:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(96540),a=n(18492),i=n(28641),o=n(98533),s=n(79888),l=n.n(s),c=n(91224),u=n.n(c);const d=function(e){let{game:t,jidGroup:n,onZoneClick:s}=e;const{t:c}=(0,a.B)(["main"]),[d,m,p,f,g,b]=l()(s,c,t),v=[];let h=0;return v.push(r.createElement("div",{key:"eZ",className:""},c("content.estadozona"))),v.push(r.createElement("div",{key:"nAz"},d())),v.push(r.createElement("p",{key:"header"},c("content.seleccionapilotoyzona"),":")),t.players.forEach((e=>{let a=[],s=0;if(e.group===n||(0,o.isCurrentUserIsOwner)(t.owner)){if(a=r.createElement(u(),{zoneIndex:s,zones:e.zones,selectedPlayer:g,selectedZone:b,player:e,gameProgression:f,prepareOnClick:m,resolveGameStatus:p}),v.push(r.createElement("div",{key:`${e.name}${h}${s}`,className:"gameProgressionItem rounded rounded1"},r.createElement("div",{className:"gameProgressionItemHeader"},r.createElement("img",{src:e.avatar,alt:"player avatar"}),e.name," ",r.createElement("br",null),c("description.grupo")," ",e.group+1),r.createElement("div",{className:"horizontalScrollContainer"},a))),g>=0&&b>=0){const n=f[e.group][g][b];e.id===g&&n.data&&v.push(r.createElement("div",{key:`${h+s}Info`,className:"gameProgressionInfoItem smallText rounded rounded2"},r.createElement(i.A,{gameType:t.gameType,gameProgression:n})))}s++,h++}})),r.createElement(r.Fragment,null,v)}},82155:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_STATUS_FINISHED=t.GAME_STATUS_PLAYING=t.GAME_STATUS_CREATED=void 0;var s=o(n(96540)),l=n(9371),c=n(58e3),u=n(32418),d=n(98533),m=n(58e3),p=n(55038);t.GAME_STATUS_CREATED=0,t.GAME_STATUS_PLAYING=1,t.GAME_STATUS_FINISHED=2,t.default=function(e,n){var a=s.useState(t.GAME_STATUS_CREATED),i=a[0],o=a[1],f=s.useState(!1),g=f[0],b=f[1],v=s.useState(e),h=v[0],_=v[1],y=s.useState([]),E=y[0],T=y[1],P=s.useRef([]),O=s.useState(-1),x=O[0],S=O[1],w=window.crawlear.fb,C=(0,u.useTranslation)(["main"]).t,j=s.useState({name:"",avatar:"",group:0,id:0,zones:[],uid:""}),M=j[0],A=j[1];return s.useEffect((function(){var e=function(e,t){var n={};n[e]=t,_((0,c.updateGameFromProgression)(t,h)),P.current=r(r({},P.current),n),T(r(r({},P.current),n))};g||(l.isOffline?T((0,d.createGameProgression)(h.zones,h.players.length)):window.crawlear.fb.getGameProgression(h.gid,(function(){}),(function(){}),e,e),b(!0))}),[h,g]),[i,h,E,T,M,x,function(e,n){var r=e.id,a=e.group;o(t.GAME_STATUS_PLAYING),A(e),S(n),E[a][r][n].status=m.STATUS_PLAYING,T(E),w.setGameProgression(h.gid,r,a,n,E[a][r][n])},function(e,a){if((0,c.isGroupGameFinished)(e,E,a)&&window.confirm(C("content.cerrarpartida"))&&!l.isOffline)w.getGameResult(e,(function(e){var a=r({},e);a.gameStatus=2,n.onGameEnd(a),a=(0,p.getOrderedGameResult)(a),w.updateGame(a),w.removeGameProgression(a.gid),_(a),o(t.GAME_STATUS_FINISHED)}),(function(){}));else if(l.isOffline){var i=(0,p.getOrderedGameResult)(e);_((0,d.getGameResult)(i,E)),o(t.GAME_STATUS_FINISHED)}},function(e){if((0,c.isIndividualGame)(h))n.onGameEnd(h),(l=(0,p.getOrderedGameResult)(h)).gameStatus=2,w.updateGame(l),w.removeGameProgression(l.gid),w.removeDirectorPresenceRequest(l.gid),o(t.GAME_STATUS_FINISHED),_(l);else{var a=M.id,i=M.group,s=r({},E),l=r({},h);s[i][a][x].status=m.STATUS_DONE,s[i][a][x].data=e.players[a].zones[x],!s[i][a][x].data.judgedBy&&(s[i][a][x].data.judgedBy=[]),s[i][a][x].data.judgedBy.push(window.crawlear.user.uid),T(s),l.players[a].zones[x]=s[i][a][x].data,w.setGameProgression(l.gid,a,i,x,s[i][a][x]),o(t.GAME_STATUS_CREATED),_(l)}},function(e,n){var a=r({},E),i=h.players[e],s=i.group,l=i.id;a[s][e][n].status=m.STATUS_REPAIR,a[s][e][n].repairData={setTime:(new Date).getTime()},a[s][e][n].data=i.zones[n],T(a),w.setGameProgression(h.gid,l,s,n,a[s][l][n]),o(t.GAME_STATUS_CREATED)}]}},83006:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(96540)),l=o(n(9571)),c=o(n(88373)),u=n(91642);t.default=function(e){var t=e.game,n=e.player,r=e.zone,a=e.onGameEnd,i=e.onRepair,o=e.gameExtras,d=e.children,m=s.useState(t),p=m[0],f=[],g={game:p,setGame:m[1],gameExtras:o};return s.useEffect((function(){o.doPageView()}),[o]),1!==p.gameType?f.push(s.createElement(c.default,{key:1,onGameEnd:function(e){a(e)},onRepair:i,playerIndex:n,zoneIndex:r},d)):f.push(s.createElement(l.default,{key:0,onGameEnd:function(e){a(e)}})),s.createElement(u.GameContext.Provider,{value:g},f)}},84381:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(85072),a=n.n(r),i=n(97825),o=n.n(i),s=n(77659),l=n.n(s),c=n(55056),u=n.n(c),d=n(10540),m=n.n(d),p=n(41113),f=n.n(p),g=n(98146),b={};b.styleTagTransform=f(),b.setAttributes=u(),b.insert=l().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=m(),a()(g.A,b);const v=g.A&&g.A.locals?g.A.locals:void 0},88373:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(96540),a=n(18492),i=n(35153),o=n.n(i),s=n(13384),l=n.n(s),c=n(58349),u=n.n(c),d=n(99006),m=n.n(d),p=n(85072),f=n.n(p),g=n(97825),b=n.n(g),v=n(77659),h=n.n(v),_=n(55056),y=n.n(_),E=n(10540),T=n.n(E),P=n(41113),O=n.n(P),x=n(8871),S={};S.styleTagTransform=O(),S.setAttributes=y(),S.insert=h().bind(null,"head"),S.domAPI=b(),S.insertStyleElement=T(),f()(x.A,S),x.A&&x.A.locals&&x.A.locals;const w=function(e){let{children:t,onGameEnd:n,onRepair:i,playerIndex:s,zoneIndex:c}=e;const{t:d}=(0,a.B)(["main"]),p=[],[f,g,b,v,h,_,y,E,T,P]=o()(n,i,s,c),O=f.game,x=O.players[s],S=x.zones[c];return t.length&&(p.push(r.cloneElement(t[0],{onValueChange:b})),t[2]?(p.push(r.cloneElement(t[1],{onValueChange:y})),p.push(r.cloneElement(t[2]))):p.push(r.cloneElement(t[1])),t[3]&&p.push(r.cloneElement(t[3]))),r.createElement("div",{className:"gameContainer"},r.createElement(l(),{playerIndex:s,zoneIndex:c}),r.createElement(u(),{playerZone:S,forceAction:f.forceAction,setRepairStatus:P,onTimerChange:g,onTimeFiasco:T,onPointBecauseLastMinute:E}),r.createElement(m(),{playerIndex:s,zoneIndex:c,onGateProgressionChange:_}),r.createElement("div",{className:"controlTextContainer rounded rounded2"},p[2],S.gateProgression<O.gates[c]?p[0]:r.createElement(r.Fragment,null),S.gateProgression<O.gates[c]?p[1]:r.createElement(r.Fragment,null)),p[3],r.createElement("button",{onClick:v,className:"resetButton"},d("description.reset")),r.createElement("button",{className:"importantNote",onClick:()=>{h()}},d("description.finjugador")," (",x.name,")"),r.createElement("p",null))}},89805:(e,t,n)=>{e.exports=n.p+"4e8d84bf42ab7e35ed38.png"},91224:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=n(79888),l=n(32418);t.default=function(e){var t=e.zoneIndex,n=e.zones,r=e.selectedPlayer,a=e.selectedZone,i=e.player,c=e.gameProgression,u=e.prepareOnClick,d=e.resolveGameStatus,m=(0,l.useTranslation)(["main"]).t;return n.map((function(e,n){var l=i.id===r&&t===a?"colorGrey rounded":"rounded";if(c&&c[i.group]&&c[i.group][i.id]){var p=c[i.group][i.id][t].status,f=c[i.group][i.id][t].data;return p===s.status.playing?l+=" colorOrange":p===s.status.repair?l+=" colorRed":p===s.status.done?l+=" colorGreen":p===s.status.waiting&&f&&(l+=" colorClearGrey"),o.createElement("span",{"data-zone":t,key:"zone".concat(i.name).concat(t).concat(n),onClick:function(t){u(t,i,e)},className:l},m("description.zona")," ",t+1,o.createElement("br",null),o.createElement("div",null,m("description.estado"),":"),o.createElement("div",null,d(m,p,f)))}return o.createElement("span",{key:"zone".concat(i.name).concat(t).concat(n)})}))}},94160:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i),s=n(4417),l=n.n(s),c=new URL(n(89805),n.b),u=new URL(n(58931),n.b),d=new URL(n(57725),n.b),m=o()(a()),p=l()(c),f=l()(u),g=l()(d);m.push([e.id,`.timerContainer{font-size:.8em;width:43%;margin:0 auto}.timerContainer button{width:36px;height:48px;background-repeat:no-repeat;background-size:25px;background-position:center;margin:5px 11px}.timerContainer .timer{border:1px solid;border-radius:15px;max-width:163px;margin:0 auto}.timerContainer .timerPlayButton{background-image:url(${p})}.timerContainer .resetButton{background-image:url(${f})}.timerContainer.play .timerPlayButton{background-image:url(${g})}body.lightMode .playButton{background-color:#a0bcc2}`,""]);const b=m},96276:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(96540),a=n(51605),i=n.n(a),o=n(75730);const s=function(){const[e,t]=r.useState(0),[n,a]=r.useState({}),s=new(i()),l=new o.default;function c(e){a(e),t(1),s.listenMessages(o.MSG_START,u),s.listenMessages(o.MSG_STOP,d),s.listenMessages(o.MSG_TIME,m),s.listenMessages(o.MSG_POINTS,p),s.listenMessages(o.MSG_GATES,f)}function u(){l.sendStart()}function d(){l.sendStop()}function m(e){l.sendTime(e.detail)}function p(e){l.sendPoints(e.detail)}function f(e){l.sendGates(e.detail)}return 0===e?r.createElement("div",{className:"controlText",onClick:function(){l.discoverDevice(c)}},"Discover Bluetooth Device"):r.createElement("div",{className:"controlText"},n.name)}},98146:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(31601),a=n.n(r),i=n(76314),o=n.n(i)()(a());o.push([e.id,".repairProgressionContainer{margin:25px}.repairProgressionItem{margin:10px}.repairProgressionItem .repairProgressionItemHead{font-size:.8em}.repairProgressionItem .repairProgressionItemHead{text-align:left}.repairProgressionItem img{border-radius:15px;margin-right:15px;display:inline-block;max-width:40px}.repairProgressionItem .timerContainer{margin:0 auto;width:100%}.gameProgressionItemHour{margin:0 10px}",""]);const s=o},99006:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(96540)),s=i(n(89839)),l=n(32418),c=n(91642);n(99567),n(41417),t.default=function(e){var t=e.playerIndex,n=e.zoneIndex,r=e.onGateProgressionChange,a=(0,l.useTranslation)(["main"]).t,i=o.useContext(c.GameContext),u=i.game,d=i.gameExtras,m=(0,s.createSliderWithTooltip)(s.default);function p(e){var a="gatesPlusButton"===e.target.id,i=u.players[t].zones[n],o=u.gates[n];a?i.gateProgression<o&&r(i.gateProgression+1):i.gateProgression>0&&r(i.gateProgression-1)}var f=u.players[t].zones[n];return o.createElement("div",{className:"gateProgressionContainer controlTextContainer info rounded rounded2"},a("description.avancepuerta"),": ",f.gateProgression,o.createElement("button",{id:"gatesPlusButton",onClick:p,className:"buttonControlTextPlus"},"+"),o.createElement("button",{id:"gatesMinusButton",onClick:p,className:"buttonControlTextMinus"},"-"),o.createElement(m,{step:1,min:0,max:u.gates[n],dots:!0,value:f.gateProgression,onChange:r,marks:d.generateSliderMarksFromGates(f.gateProgressionData,f.gateProgression),tipFormatter:function(e){return f.gateProgression<u.gates[n]?String(e).concat("-").concat(f.gateProgressionData[f.gateProgression].gatePoints):"-"}}))}}}]);