"use strict";(self.webpackChunkcrawlear_com=self.webpackChunkcrawlear_com||[]).push([[3311],{81397:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(96540),r=n(18492),o=n(28641),i=n(788),s=n(79887);const l="waiting",c="playing",u="done",d=function(e){let{game:t,jidGroup:n,onZoneClick:d}=e;const{t:m}=(0,r.B)(["main"]),[p,f]=a.useState(-1),[g,E]=a.useState(-1),T=a.useRef(),[h,v]=a.useContext(s.GameProgressionContext),b=[];let y=0;function _(){d(-1,-1),E(-1),f(-1)}return b.push(a.createElement("div",{key:"eZ",className:""},m("content.estadozona"))),b.push(a.createElement("div",{key:"nAz"},function(){const e=new Array(t.zones).fill(!1);return h&&Object.entries(h).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{Object.entries(t[1]).forEach(((t,n)=>{"playing"===t[1].status&&!e[n]&&(e[n]=!0)}))}))})),function(e){const t=[];return e.forEach(((e,n)=>{const r=[];r.push(a.createElement("span",{key:n},m("description.zona")," ",n+1,": ")),e?r.push(a.createElement("span",{key:"dG".concat(n),className:"directorGroup colorRed"},m("description.ocupado"))):r.push(a.createElement("span",{key:"div".concat(n)},a.createElement("span",{className:"directorGroup"},m("description.libre")),a.createElement("br",null))),t.push(a.createElement("div",{key:"dZ".concat(n),className:"directorZone"},r))})),a.createElement("div",{className:""},t)}(e)}())),b.push(a.createElement("p",{key:"header"},m("content.seleccionapilotoyzona"),":")),t.players.forEach(((e,r)=>{let s,v=[],x=0;(e.group===n||i.GameUtils.isCurrentUserIsOwner(t.owner))&&(e.zones.forEach((t=>{s=e.id===g&&x===p?"colorGrey rounded":"rounded",h&&h[e.group]&&h[e.group][e.id]&&(h[e.group][e.id][x].status!==l?h[e.group][e.id][x].status===c?s+=" colorOrange":"repair"===h[e.group][e.id][x].status?s+=" colorRed":h[e.group][e.id][x].status===u&&(s+=" colorGreen"):h[e.group][e.id][x].data&&(s+=" colorClearGrey"),v.push(a.createElement("span",{"data-zone":x,onClick:t=>{!function(e,t){const n=Number(e.target.closest("[data-zone]").getAttribute("data-zone")),a=h[t.group][t.id][n].status;p===n&&g===t.id?_():a===l||a===u||a===c?(E(t.id),f(n),d(t,n)):_()}(t,e)},key:x+1,className:s},a.createElement("div",null,m("description.zona")," ",x+1),a.createElement("br",null),a.createElement("div",null,m("description.estado"),":"),a.createElement("div",null,function(e,t,n){let a;switch(t){case"waiting":a=e(n?"description.reparacionfinalizada":"description.waiting");break;case"done":a=e("description.done");break;case"repair":a=e("description.repair");break;case"playing":a=e("description.playing");break;default:a=e("description.waiting")}return a}(m,h[e.group][e.id][x].status,h[e.group][e.id][x].data))))),x++})),b.push(a.createElement("div",{key:y+x,className:"gameProgressionItem rounded rounded1"},a.createElement("div",null,a.createElement("img",{src:e.avatar,alt:"player avatar"}),e.name," ",a.createElement("br",null),m("description.grupo")," ",e.group+1),a.createElement("div",{className:"horizontalScrollContainer"},v))),g>=0&&p>=0&&e.id===g&&h[e.group][g][p].data&&b.push(a.createElement("div",{key:"".concat(y+x,"Info"),className:"gameProgressionInfoItem smallText rounded rounded2"},a.createElement(o.A,{gameType:t.gameType,innerRef:T,gameProgression:h[e.group][g][p]}))),y++)})),a.createElement(a.Fragment,null,b)}},67439:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var a=n(96540),r=n(18492),o=n(85072),i=n.n(o),s=n(97825),l=n.n(s),c=n(77659),u=n.n(c),d=n(55056),m=n.n(d),p=n(10540),f=n.n(p),g=n(41113),E=n.n(g),T=n(9545),h={};h.styleTagTransform=E(),h.setAttributes=m(),h.insert=u().bind(null,"head"),h.domAPI=l(),h.insertStyleElement=f(),i()(T.A,h),T.A&&T.A.locals&&T.A.locals;const v=function(e){let{game:t,gameProgression:n}=e;const{t:o}=(0,r.B)(["main"]),i=window.crawlear.fb,s=a.useRef(),[l,c]=a.useState({}),u=[];function d(e,t){if("pending"===t.status){const n={};n[e]=t,s.current={...s.current,...n},c(s.current)}}function m(e,t){if("pending"===t.status){const n={};n[e]=t,s.current={...s.current,...n},c(s.current)}}u.push(a.createElement("div",{key:"zC",className:""},o("content.zonascompletadas"))),a.useEffect((()=>{i.getDirectorPresenceRequest(t.gid,d,m)}),[]);for(let e=0;e<t.zones;e++){let t=[];Object.entries(n).forEach(((n,r)=>{let i=0;Object.entries(n[1]).forEach(((t,n)=>{t[1]&&t[1][e]&&"done"===t[1][e].status&&t[1][e].data&&i++})),i===Object.entries(n[1]).length&&t.push(a.createElement("span",{key:"dG".concat(e),className:"directorGroup"},o("description.grupo")," ",r+1))})),u.push(a.createElement("div",{key:"dZ".concat(e),className:"directorZone horizontalScrolling"},o("description.zona")," ",e+1,": ",t))}return u.push(a.createElement("p",{key:"pdp",className:"bold"},o("description.peticionesdepresencia"),":")),s.current||u.push(a.createElement("p",{key:"npsp",className:""},o("description.nopeticionespresencia"))),s.current&&Object.keys(s.current).forEach(((e,n)=>{const r=s.current[e];u.push(a.createElement("div",{key:"dR".concat(n),className:"directorRequestContainer blink"},a.createElement("div",null,a.createElement("div",null,o("description.de")," ",r.fromName),a.createElement("div",null,o("description.zona"),": ",r.zone+1),a.createElement("div",null,o("description.jugador"),": ",r.playerName),a.createElement("div",null,o("description.estado"),": ",r.status)),a.createElement("div",null,a.createElement("button",{onClick:()=>{!function(e){if(window.confirm(o("content.aceptarpresencia"))){const n={...s.current};delete n[e],c(n),s.current=n,i.acceptDirectorPresenceRequest(t.gid,e)}}(e)}},o("description.aceptar")))))})),a.createElement(a.Fragment,null,[u])}},28641:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(18492),r=n(96540),o=n(815),i=n(55038),s=n(42578),l=n(77267),c=n(3442),u=n(46662),d=n(98784),m=n(90598),p=n(788);const f=function(e){let{gameType:t,gameProgression:n}=e;const{t:f}=(0,a.B)(["main"]);if(n.data){const e=n.data.points,a=n.data.totalPoints,g=n.data.time,E=n.data.gatesWithFail,T=n.data.gateProgression,h=n.data.simpathyPoints,v=n.data.handicap,b=n.data.gatesWithBonification;let y=i.default.tokenToTexts(f,s.AecarGameScores.texts),_=i.default.tokenToTexts(f,s.AecarGameScores.fiascoTexts);return t===p.GAME_TYPE_ISRCC&&(y=i.default.tokenToTexts(f,u.IsrccGameScores.texts),_=i.default.tokenToTexts(f,u.IsrccGameScores.fiascoTexts)),t===p.GAME_TYPE_LEVANTE&&(y=i.default.tokenToTexts(f,c.Levante124GameScores.texts),_=i.default.tokenToTexts(f,c.Levante124GameScores.fiascoTexts)),t===p.GAME_TYPE_COPAESPANA&&(y=i.default.tokenToTexts(f,l.RegionalZonaRcGameScores.texts),_=i.default.tokenToTexts(f,l.RegionalZonaRcGameScores.fiascoTexts)),t===p.GAME_TYPE_MINICRAWLERPASSION&&(y=i.default.tokenToTexts(f,d.MiniCrawlerPassionGameScores.texts),_=i.default.tokenToTexts(f,d.MiniCrawlerPassionGameScores.fiascoTexts)),t===p.GAME_TYPE_GENERIC&&(y=i.default.tokenToTexts(f,m.GenericGameScores.texts),_=i.default.tokenToTexts(f,m.GenericGameScores.fiascoTexts)),r.createElement(r.Fragment,null,r.createElement("ul",null,r.createElement("li",null,f("description.puntos"),": ",r.createElement("span",{className:"bold"},e)),T?r.createElement("li",null,f("description.avancepuerta"),": ",r.createElement("span",{className:"bold"},T)):r.createElement(r.Fragment,null),void 0!==typeof E&&void 0!==typeof b?r.createElement(r.Fragment,null,r.createElement("li",null,f("description.fallospuerta"),": ",r.createElement("span",{className:"bold"},E)),r.createElement("li",null,f("description.bonificacion"),": ",r.createElement("span",{className:"bold"},-2*b))):r.createElement(r.Fragment,null),void 0!==typeof h?r.createElement("li",null,f("description.portiempo"),": ",r.createElement("span",{className:"bold"},h)):r.createElement(r.Fragment,null),void 0!==typeof v?r.createElement("li",null,f("description.handicap"),": ",r.createElement("span",{className:"bold"},v)):r.createElement(r.Fragment,null),r.createElement("li",null,f("description.total"),": ",r.createElement("span",{className:"bold"},a)),r.createElement("li",null,f("description.tiempo"),": ",r.createElement("span",{className:"bold"},i.default.printTime(i.default.millisToTime(g))))),r.createElement(o.A,{controlTextValues:n.data.gateProgressionData?p.GameUtils.sumControlTextValues(n.data.gateProgressionData):n.data.controlTextValues,texts:y}),n.data.fiascoControlTextValues&&n.data.fiascoControlTextValues.filter((e=>e>0)).length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"fiascosText left bold"},f("points.fiascos"),":"),r.createElement(o.A,{controlTextValues:n.data.fiascoControlTextValues,texts:_})):r.createElement(r.Fragment,null))}return r.createElement(r.Fragment,null)}},79887:(e,t,n)=>{n.r(t),n.d(t,{GameProgressionContext:()=>a});const a=n(96540).createContext()},73311:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var a=n(96540),r=n(18492),o=n(99512),i=n.n(o),s=n(42927),l=n.n(s),c=n(15403),u=n(90498),d=n(788),m=n(10057),p=n.n(m),f=n(43841),g=n(85072),E=n.n(g),T=n(97825),h=n.n(T),v=n(77659),b=n.n(v),y=n(55056),_=n.n(y),x=n(10540),P=n.n(x),A=n(41113),G=n.n(A),S=n(93922),C={};C.styleTagTransform=G(),C.setAttributes=_(),C.insert=b().bind(null,"head"),C.domAPI=h(),C.insertStyleElement=P(),E()(S.A,C),S.A&&S.A.locals&&S.A.locals;const N=function(e){let{onGameEnd:t}=e;const{t:n}=(0,r.B)(["main"]);let o=[];const[i,s,l]=p()({onGameEnd:t}),m=i.game;o.push(a.createElement(u.default,{key:"tmC",courtesyTime:0,startTime:0,label:n("description.tiempo"),maxTime:m.maxTime})),o.push(a.createElement("div",{key:0},n("description.ordenruta"),":"));for(let e=0;e<m.players.length;e++){let t="";d.GameUtils.isPointsFiasco(m,i.order[e].zones[0])&&(t="blink foreColorRed"),o.push(a.createElement("div",{key:e+1},a.createElement("div",{className:"controlTextContainerQueue rounded bold ".concat(t)},i.order[e].name,": ",i.order[e].zones[0].totalPoints," ptos")))}o.push(a.createElement("p",{key:m.players.length+1},n("description.puntos").toUpperCase(),":"));for(let e=0;e<m.players.length;e++){let t,r=m.players[e],i=r.zones[0];o.push(a.createElement("div",{key:m.players.length+e+2,className:"playerInfo"},a.createElement("div",{className:"headerPlayer importantNote rounded2 rounded"},a.createElement("div",{className:"bold"},r.name),n("description.total"),": ",i.totalPoints,t),a.createElement("div",{className:"controlTextContainer rounded rounded1"},(0,c.A)({controlTextValuesString:"controlTextValues",steps:f.KingGameScores.steps,maxValues:f.KingGameScores.maxValues,texts:f.KingGameScores.texts,zone:0,player:e,onValueChange:s}))))}return o.push(a.createElement("button",{key:2*m.players.length+2,className:"importantNote",onClick:l},n("description.fin"))),a.createElement("div",{key:2*m.players.length+3,className:"gameContainer"},o)};var M=n(35153),O=n.n(M),w=n(13384),I=n.n(w),k=n(58349),j=n.n(k),R=n(99006),z=n.n(R),B=n(18282),D={};D.styleTagTransform=G(),D.setAttributes=_(),D.insert=b().bind(null,"head"),D.domAPI=h(),D.insertStyleElement=P(),E()(B.A,D),B.A&&B.A.locals&&B.A.locals;const U=function(e){let{children:t,onGameEnd:n,onRepair:o,playerIndex:i,zoneIndex:s}=e;const{t:l}=(0,r.B)(["main"]),c=[],[u,d,m,p,f,g,E,T,h,v]=O()(n,o,i,s),b=u.game,y=b.players[i],_=y.zones[s];return t.length&&(c.push(a.cloneElement(t[0],{onValueChange:m})),t[2]?(c.push(a.cloneElement(t[1],{onValueChange:E})),c.push(a.cloneElement(t[2]))):c.push(a.cloneElement(t[1])),t[3]&&c.push(a.cloneElement(t[3]))),a.createElement("div",{className:"gameContainer"},a.createElement(I(),{playerIndex:i,zoneIndex:s}),a.createElement(j(),{playerZone:_,forceAction:u.forceAction,setRepairStatus:v,onTimerChange:d,onTimeFiasco:h,onPointBecauseLastMinute:T}),a.createElement(z(),{playerIndex:i,zoneIndex:s,onGateProgressionChange:g}),a.createElement("div",{className:"controlTextContainer rounded rounded2"},c[2],_.gateProgression<b.gates[s]?c[0]:a.createElement(a.Fragment,null),_.gateProgression<b.gates[s]?c[1]:a.createElement(a.Fragment,null)),c[3],a.createElement("button",{onClick:p,className:"resetButton"},l("description.reset")),a.createElement("button",{className:"importantNote",onClick:()=>{f()}},l("description.finjugador")," (",y.name,")"),a.createElement("p",null))};var F=n(91642);const V=function(e){let{game:t,player:n,zone:r,onGameEnd:o,onRepair:i,gameExtras:s,children:l}=e;const[c,u]=a.useState(t),d=[];return a.useEffect((()=>{s.doPageView()}),[]),1!==c.gameType?d.push(a.createElement(U,{key:1,onGameEnd:e=>{o(e)},onRepair:i,playerIndex:n,zoneIndex:r},l)):d.push(a.createElement(N,{key:0,onGameEnd:e=>{o(e)},onRepair:i})),a.createElement(F.GameContext.Provider,{value:{game:c,setGame:u,gameExtras:s}},d)};var L=n(79887),Y=n(41504),Z=n(82155),q=n.n(Z),H=n(34552),W={};W.styleTagTransform=G(),W.setAttributes=_(),W.insert=b().bind(null,"head"),W.domAPI=h(),W.insertStyleElement=P(),E()(H.A,W),H.A&&H.A.locals&&H.A.locals;const K=function(e){let{inGame:t,onBackButtonClick:n}=e,o=a.createElement(a.Fragment,null);const{t:s}=(0,r.B)(["main"]),c=i().getGameExtras(t.gameType),[u,m,p,f,g,E,T,h,v,b]=q()(t,c),y=i().getGameContent(m.gameType,g.id,E),[_]=a.useState((()=>i().getGroupFromJid(m,window.crawlear.user.uid)));return u===Z.GAME_STATUS_CREATED?o=m.gameType===d.GAME_TYPE_KING?a.createElement(V,{game:m,onGameEnd:v,gameExtras:c}):a.createElement(L.GameProgressionContext.Provider,{value:[p,f]},a.createElement(l(),{game:m,gameProgression:p,jidGroup:_,onBeginGame:T,onBackButtonClick:n,onCloseButonClick:h})):u===Z.GAME_STATUS_PLAYING?o=a.createElement(V,{player:g.id,zone:E,game:m,gameExtras:c,onGameEnd:v,onRepair:b},y):u===Z.GAME_STATUS_FINISHED&&(o=a.createElement("div",{className:"gameList"},a.createElement(Y.default,{game:m}),a.createElement("button",{className:"backButton",onClick:n},s("description.atras")))),o}},96276:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var a=n(96540),r=n(51605),o=n.n(r),i=n(75730);const s=function(){const[e,t]=a.useState(0),[n,r]=a.useState({}),s=new(o()),l=new i.default;function c(e){r(e),t(1),s.listenMessages(i.MSG_START,u),s.listenMessages(i.MSG_STOP,d),s.listenMessages(i.MSG_TIME,m),s.listenMessages(i.MSG_POINTS,p),s.listenMessages(i.MSG_GATES,f)}function u(){l.sendStart()}function d(){l.sendStop()}function m(e){l.sendTime(e.detail)}function p(e){l.sendPoints(e.detail)}function f(e){l.sendGates(e.detail)}return 0===e?a.createElement("div",{className:"controlText",onClick:function(){l.discoverDevice(c)}},"Discover Bluetooth Device"):a.createElement("div",{className:"controlText"},n.name)}},70849:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var a=n(96540),r=n(18492),o=n(788);const i=function(e){let{game:t,playerName:n,fromName:i,zone:s}=e;const{t:l}=(0,r.B)(["main"]),c=window.crawlear.fb,u=[],d=t.gid,m=[],[p,f]=a.useState({});function g(e,t){if("pending"===e.status){const n={...p};n[t]=e,f(n)}else if("accepted"===e.status){const e={...p};delete e[t],f(e)}}return d&&n&&i&&s>=0&&!o.GameUtils.isCurrentUserIsOwner(t.owner)&&0===Object.entries(p).length&&u.push(a.createElement("button",{onClick:function(){window.confirm(l("content.quieresenviarpeticiondepresencia"))&&c.setDirectorPresenceRequest(d,s,n,i,g)}},l("description.reclamarpresencia"))),Object.keys(p).forEach(((e,t)=>{m.push(a.createElement("div",null,p[e].status))})),a.createElement("div",{className:"presenceButtonContainer"},u,m)}},85020:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var a=n(96540),r=n(18492),o=n(90498),i=n(85072),s=n.n(i),l=n(97825),c=n.n(l),u=n(77659),d=n.n(u),m=n(55056),p=n.n(m),f=n(10540),g=n.n(f),E=n(41113),T=n.n(E),h=n(52811),v={};v.styleTagTransform=T(),v.setAttributes=p(),v.insert=d().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=g(),s()(h.A,v),h.A&&h.A.locals&&h.A.locals;const b=function(e){let{onTimeFiasco:t,onRepairTimerChange:n}=e;const{t:i}=(0,r.B)(["main"]);return a.createElement("div",{className:"repairTimeContainer"},a.createElement(o.default,{courtesyTime:0,label:i("points.reparacion"),onTimeFiasco:t,onTimerChange:n,maxTime:18e5}))};var y=n(51541),_={};_.styleTagTransform=T(),_.setAttributes=p(),_.insert=d().bind(null,"head"),_.domAPI=c(),_.insertStyleElement=g(),s()(y.A,_),y.A&&y.A.locals&&y.A.locals;const x=function(e){let{gameProgression:t,game:n,onRepairEnd:o}=e;const{t:i}=(0,r.B)(["main"]),s=[];return t&&Object.entries(t).forEach(((e,t)=>{Object.entries(e[1]).forEach(((r,l)=>{Object.entries(r[1]).forEach(((l,c)=>{if("repair"===l[1].status){const u=new Date(l[1].repairData.setTime).toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});s.push(a.createElement("div",{key:c+t,className:"repairProgressionItem rounded rounded2"},a.createElement("div",{className:"repairProgressionItemHead"},a.createElement("img",{src:n.players[r[0]].avatar,alt:"player avatar"}),a.createElement("span",{className:"repairProgressionItemZone"},i("description.zona"),": ",c+1),a.createElement("span",{className:"gameProgressionItemHour"},i("description.enreparaciondesde")," ",u)),a.createElement(b,null),a.createElement("button",{onClick:()=>{!function(e,t,n,a,r){window.confirm(i("content.finalizarreparacion"))&&o&&o(e,t,n,a,r)}(n.gid,n.players[[r[0]]].id,e[0],c,l[1])},className:"importantNote"},i("description.fin"))))}}))}))})),a.createElement("div",{className:"repairProgressionContainer"},s.length?s:i("description.nohayreparaciones"))}},90498:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(96540),r=n(18492),o=n(38791),i=n(55038),s=n(51605),l=n.n(s),c=n(75730),u=n(85072),d=n.n(u),m=n(97825),p=n.n(m),f=n(77659),g=n.n(f),E=n(55056),T=n.n(E),h=n(10540),v=n.n(h),b=n(41113),y=n.n(b),_=n(27313),x={};x.styleTagTransform=y(),x.setAttributes=T(),x.insert=g().bind(null,"head"),x.domAPI=p(),x.insertStyleElement=v(),d()(_.A,x),_.A&&_.A.locals&&_.A.locals;const P="play",A="pause",G="stop",S=function(e){let{startTime:t,forceAction:n,label:s,onTimerChange:u,courtesyTime:d,maxTime:m,onPointBecauseLastMinute:p,onTimeFiasco:f}=e;const{t:g}=(0,r.B)(["main"]),E=a.useRef(null),T=a.useRef(t||0),h=new(l()),[v,b]=a.useState((()=>({millis:t||0,timer:null,maxTime:m,state:A,timeStart:Date.now()}))),y=i.default.millisToTime(v.millis);function _(){T.current=0,v.timer&&clearInterval(v.timer),E.current.classList.remove("blink"),b({maxTime:v.maxTime,millis:0,timer:null,state:G}),u&&u(T.current),E.current.classList.contains("play")&&E.current.classList.toggle("play")}function x(){E.current.classList.toggle("play"),v.state===A||v.state===G?(v.state=P,o.default.event("play","timePlay",""),E.current.classList.remove("blink")):(v.state=A,o.default.event("play","timePause","")),b((e=>({...e,state:v.state})))}return a.useEffect((()=>{n===G&&_(),n===A&&v.state===P&&x()}),[n]),a.useEffect((()=>{const e={...v};e.state===P?(e.timer&&clearInterval(e.timer),e.millis=T.current,e.timer=setInterval((()=>{!function(e){T.current<e.maxTime?(T.current=Date.now()-e.timeStart+e.millis,u&&u(T.current),b((e=>({...e,millis:T.current}))),Date.now()%2==0&&h.sendMessage(c.MSG_TIME,i.default.printTime(i.default.millisToTime(T.current)))):p&&e.maxTime>0&&T.current>=e.maxTime&&T.current<e.maxTime+d||0===e.maxTime?(T.current=Date.now()-e.timeStart,u&&u(T.current),b((e=>({...e,millis:T.current}))),e.maxTime>0&&!E.current.classList.contains("blink")&&E.current.classList.add("blink"),e.maxTime>0&&(e.maxTime+T.current)%1e4==0&&p()):(E.current.classList.toggle("blink"),E.current.classList.toggle("foreColorRed"),x(),f&&f())}(e)}),10),e.timeStart=Date.now(),h.sendMessage(c.MSG_START,{}),b((t=>({...t,...e})))):e.state===A?(e.timer&&clearInterval(v.timer),e.timer=null,h.sendMessage(c.MSG_STOP,{}),b((t=>({...t,...e})))):(e.millis=0,T.current=0,e.timer&&clearInterval(v.timer),e.timer=null,h.sendMessage(c.MSG_STOP,{}),b((t=>({...t,...e})))),h.sendMessage(c.MSG_TIME,i.default.printTime(i.default.millisToTime(T.current)))}),[v.state]),a.createElement("div",{ref:E,className:"timerContainer"},a.createElement("div",{className:"timerLabel"},(s||g("description.tiempo")).toUpperCase(),":"),a.createElement("div",{className:"timer"},i.default.printTime(y)),a.createElement("button",{className:"timerPlayButton",onClick:x}),a.createElement("button",{onClick:_,className:"resetButton"}))}},18282:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".totalValue{font-size:26px}.totalTimeContainer{margin:10px;padding:10px;font-size:.8em}.repairButton{display:block;margin:10px auto}.generic .gateProgressionContainer{width:26%;float:left;margin:0 10px 0 10px}.generic .gatePoints{padding:0px;width:18px}.generic .controlTextText{width:auto}.gateProgressionContainer .buttonControlTextPlus,.gateProgressionContainer .buttonControlTextMinus{width:35px;height:35px}.gatesContainer{margin:10px;padding:10px;font-size:.8em}.player{padding-bottom:10px}.pointsText{display:inline-block}.fiascoBox{font-size:17px;width:65px;padding:10px;float:left;margin:10px}.fiascoBox .importantNote{margin-bottom:15px}.info{font-size:.8em}.controlTextContainer .timerContainer{float:none;margin:0 auto}",""]);const s=i},34552:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".gameProgressionItem{padding:15px;font-size:.7em;display:flex;margin-bottom:10px}.gameProgressionItem img{display:block;max-width:90px;max-height:45px;width:auto;height:auto;border-radius:15px}.gameProgressionItem .rounded{background-image:none;margin:8px;box-shadow:none}.tendJudgeContainer{margin-top:15px}.directorContainer{margin-bottom:15px}.directorGroup{background-color:green;color:#fff;border-radius:8px;padding:3px;font-size:.8em;margin-right:5px}.directorZone{margin:5px 0}.gatePoints{padding:5px;border-radius:15px;color:#fff}",""]);const s=i},93922:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".controlTextContainerQueue{background-color:#ffa602;border-radius:15px;margin:10px;font-size:15px;padding:5px}",""]);const s=i},51541:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".repairProgressionContainer{margin:25px}.repairProgressionItem{margin:10px}.repairProgressionItem .repairProgressionItemHead{font-size:.8em}.repairProgressionItem .repairProgressionItemHead{text-align:left}.repairProgressionItem img{border-radius:15px;margin-right:15px;display:inline-block;max-width:40px}.repairProgressionItem .timerContainer{margin:0 auto;width:100%}.gameProgressionItemHour{margin:0 10px}",""]);const s=i},52811:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".repairTimerContainer .timerContainer{padding:0}",""]);const s=i},27313:(e,t,n)=>{n.d(t,{A:()=>E});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(89805),n.b),u=new URL(n(58931),n.b),d=new URL(n(57725),n.b),m=i()(r()),p=l()(c),f=l()(u),g=l()(d);m.push([e.id,`.timerContainer{font-size:.8em;width:43%;margin:0 auto}.timerContainer button{width:36px;height:48px;background-repeat:no-repeat;background-size:25px;background-position:center;margin:5px 11px}.timerContainer .timer{border:1px solid;border-radius:15px;max-width:163px;margin:0 auto}.timerContainer .timerPlayButton{background-image:url(${p})}.timerContainer .resetButton{background-image:url(${f})}.timerContainer.play .timerPlayButton{background-image:url(${g})}body.lightMode .playButton{background-color:#a0bcc2}`,""]);const E=m},19905:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".rc-slider{width:80%;height:47px;margin:15px auto}.generic .rc-slider{height:61px;width:61%;min-height:325px;margin:15px auto}.rc-slider-rail{background-color:#333}.rc-slider-track{background-color:#aaa}.rc-slider-dot{border-color:#666}.rc-slider-handle,.rc-slider-dot.rc-slider-dot-active{border-color:#fff;border-top-left-radius:0px;border-bottom-left-radius:0px;border-top-right-radius:75px;border-bottom-right-radius:75px}.rc-slider-mark-text{color:#000;padding-bottom:50%}body.lightMode .rc-slider-handle{background-color:#333}body.lightMode .rc-slider-rail{background-color:#333}body.lightMode .rc-slider-track{background-color:#aaa}body.lightMode .rc-slider-dot{border-color:#666}",""]);const s=i},9545:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(31601),r=n.n(a),o=n(76314),i=n.n(o)()(r());i.push([e.id,".directorRequestContainer{margin-top:15px;border:1px solid red;border-radius:15px}",""]);const s=i},2512:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(85072),r=n.n(a),o=n(97825),i=n.n(o),s=n(77659),l=n.n(s),c=n(55056),u=n.n(c),d=n(10540),m=n.n(d),p=n(41113),f=n.n(p),g=n(19905),E={};E.styleTagTransform=f(),E.setAttributes=u(),E.insert=l().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=m(),r()(g.A,E);const T=g.A&&g.A.locals?g.A.locals:void 0},51605:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(21123)),o=function(){function e(){this.container=document.querySelector(".AppMainContainer")}return e.prototype.listenMessages=function(e,t){r.default.listenEvent(this.container,e,t)},e.prototype.sendMessage=function(e,t){r.default.sendEvent(this.container,e,t)},e}();t.default=o},21123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={listenEvent:function(e,t,n){e.addEventListener(t,n)},sendEvent:function(e,t,n){e.dispatchEvent(new CustomEvent(t,{detail:n}))}};t.default=n},75730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MSG_TIME=t.MSG_STOP=t.MSG_START=t.MSG_POINTS=t.MSG_GATES=void 0,t.MSG_GATES="BT_GATES",t.MSG_POINTS="BT_POINTS",t.MSG_START="BT_START",t.MSG_STOP="BT_STOP",t.MSG_TIME="BT_TIME";var n=function(){function e(){this.device={},this.timeCharacteristic={},this.timeValueCharacteristic={},this.pointsCharacteristic={},this.gatesCharacteristic={}}return e.prototype.discoverDevice=function(e){var t=this;navigator.bluetooth.requestDevice({filters:[{name:"CrawlearBluetoothDevice"},{services:["3feb1e8a-3981-4045-ad39-b225135013a0"]}]}).then((function(n){return t.device=n,e&&e(n),n.gatt&&n.gatt.connect()})).then((function(e){return e&&e.getPrimaryService("3feb1e8a-3981-4045-ad39-b225135013a0")})).then((function(e){var t=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8"),n=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b1"),a=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b2"),r=e&&e.getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b25b3");return Promise.all([t,n,a,r])})).then((function(e){var n=e[0],a=e[1],r=e[2],o=e[3];t.timeCharacteristic=n,t.timeValueCharacteristic=a,t.pointsCharacteristic=r,t.gatesCharacteristic=o})).catch((function(e){console.error(e)}))},e.prototype.sendTime=function(e){this.timeValueCharacteristic&&this.timeValueCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendPoints=function(e){this.pointsCharacteristic&&this.pointsCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendGates=function(e){this.gatesCharacteristic&&this.gatesCharacteristic.writeValue((new TextEncoder).encode(e))},e.prototype.sendStart=function(){if(this.timeCharacteristic){var e=Uint8Array.of(1);this.timeCharacteristic.writeValue(e)}},e.prototype.sendStop=function(){if(this.timeCharacteristic){var e=Uint8Array.of(0);this.timeCharacteristic.writeValue(e)}},e}();t.default=n},99512:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.STATUS_DONE=t.STATUS_REPAIR=t.STATUS_PLAYING=t.STATUS_WAITING=void 0;var r=n(788),o=n(42578),i=n(46662),s=n(3442),l=n(77267),c=n(98784),u=n(90598),d=n(43841),m={isIndividualGame:function(e){return e.gameType===r.GAME_TYPE_KING},isGroupGameFinished:function(e,n,a){var r=!0;return!!m.isIndividualGame(e)||(Object.entries(n).forEach((function(e){Number(e[0])===a&&Object.entries(e[1]).forEach((function(e){Object.entries(e[1]).forEach((function(e){e[1].status!==t.STATUS_WAITING&&e[1].status!==t.STATUS_REPAIR&&e[1].status!==t.STATUS_PLAYING||(r=!1)}))}))})),r)},onRepairEnd:function(e,n,a,r,o){var i,s=null===(i=window.crawlear)||void 0===i?void 0:i.fb;o.status=t.STATUS_WAITING,delete o.repairData,s.setGameProgression(e,n,a,r,o)},updateGameFromProgression:function(e,t){var n=a({},t);return Object.entries(e).forEach((function(e){Object.entries(e[1]).forEach((function(t){t[1].data&&(n.players[e[0]].zones[t[0]]=t[1].data)}))})),n},getGroupFromJid:function(e,t){var n=e.judges.find((function(e){return e.uid===t}));return n?n.group:0},getGameExtras:function(e){var t;return e===r.GAME_TYPE_AECAR?t=o.gameExtras:e===r.GAME_TYPE_ISRCC?t=i.gameExtras:e===r.GAME_TYPE_LEVANTE?t=s.gameExtras:e===r.GAME_TYPE_COPAESPANA?t=l.gameExtras:e===r.GAME_TYPE_KING?t=d.gameExtras:e===r.GAME_TYPE_MINICRAWLERPASSION?t=c.gameExtras:e===r.GAME_TYPE_GENERIC&&(t=u.gameExtras),t},getGameContent:function(e,t,n){var a,d;return e===r.GAME_TYPE_AECAR?a=o.getGameContent:e===r.GAME_TYPE_ISRCC?a=i.getGameContent:e===r.GAME_TYPE_LEVANTE?a=s.getGameContent:e===r.GAME_TYPE_COPAESPANA?a=l.getGameContent:e===r.GAME_TYPE_KING||(e===r.GAME_TYPE_MINICRAWLERPASSION?a=c.getGameContent:e===r.GAME_TYPE_GENERIC&&(a=u.getGameContent)),a&&(d=a(t,n)),d}};t.STATUS_WAITING="waiting",t.STATUS_PLAYING="playing",t.STATUS_REPAIR="repair",t.STATUS_DONE="done",t.default=m},42927:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(96540)),l=n(32418),c=n(788),u=i(n(70849)),d=i(n(85020)),m=i(n(67439)),p=i(n(81397)),f=i(n(34816)),g=i(n(99512)),E=i(n(15420));t.default=function(e){var t,n=e.game,a=e.jidGroup,r=e.onBeginGame,o=e.onBackButtonClick,i=e.onCloseButonClick,T=[],h=c.GameUtils.isCurrentUserIsOwner(n.owner),v=(0,l.useTranslation)(["main"]).t,b=(0,E.default)(r),y=b[0],_=b[1],x=b[2],P=b[3],A=b[4],G=b[5];if(h&&T.push(s.createElement("div",{key:"dP",className:"directorContainer rounded rounded3"},s.createElement("div",{className:"bold"},v("description.directordepartida")),s.createElement("br",null),s.createElement(m.default,{game:n,gameProgression:P}))),n.jids.find((function(e){return e===window.crawlear.user.uid}))){var S=s.createElement(s.Fragment,null);(y&&y.group===a||h)&&(S=s.createElement("button",{onClick:G,className:"playButton importantNote"},v("description.empezar"))),t=s.createElement(s.Fragment,null,v("description.jugadorseleccionado"),": ",y?y.name:""," ",s.createElement("br",null),v("description.zonaseleccionada"),": ",-1!==_?_+1:"",s.createElement("br",null),S,s.createElement(u.default,{game:n,zone:_,playerName:y&&y.name,fromName:window.crawlear.user.displayName}))}return s.createElement(s.Fragment,null,T,s.createElement(f.default,{message:x}),s.createElement("div",{className:"trackJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},v("description.juezdepista")),s.createElement(p.default,{onZoneClick:A,game:n,jidGroup:a}),s.createElement(f.default,{message:x}),t),s.createElement("div",{className:"tendJudgeContainer rounded rounded3"},s.createElement("div",{className:"bold"},v("description.juezdecarpa")),s.createElement(d.default,{gameProgression:P,game:n,onRepairEnd:g.default.onRepairEnd})),s.createElement("button",{className:"backButton",onClick:o},v("description.atras")),c.GameUtils.isCurrentUserIsOwner(n.owner)&&g.default.isGroupGameFinished(n,P,a)?s.createElement("button",{className:"closeButton importantNote",onClick:function(){i(n)}},v("description.cerrarpartida")):s.createElement(s.Fragment,null))}},99006:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(96540)),s=o(n(1397)),l=n(32418),c=n(788),u=n(91642);n(49722),n(2512),t.default=function(e){var t=e.playerIndex,n=e.zoneIndex,a=e.onGateProgressionChange,r=(0,l.useTranslation)(["main"]).t,o=i.useContext(u.GameContext),d=o.game,m=o.gameExtras,p=(0,s.createSliderWithTooltip)(s.default);function f(e){var r="gatesPlusButton"===e.target.id,o=d.players[t].zones[n],i=d.gates[n];r?o.gateProgression<i&&a(o.gateProgression+1):o.gateProgression>0&&a(o.gateProgression-1)}var g=d.players[t].zones[n];return i.createElement("div",{className:"gateProgressionContainer controlTextContainer info rounded rounded2"},r("description.avancepuerta"),": ",g.gateProgression,i.createElement("button",{id:"gatesPlusButton",onClick:f,className:"buttonControlTextPlus"},"+"),i.createElement("button",{id:"gatesMinusButton",onClick:f,className:"buttonControlTextMinus"},"-"),i.createElement(p,{step:1,min:0,max:d.gates[n],dots:!0,vertical:d.gameType===c.GAME_TYPE_GENERIC,value:g.gateProgression,onChange:a,marks:m.generateSliderMarksFromGates(g.gateProgressionData,g.gateProgression),tipFormatter:function(e){return g.gateProgression<d.gates[n]?String(e).concat("-").concat(g.gateProgressionData[g.gateProgression].gatePoints):"-"}}))}},13384:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(96540)),l=n(32418),c=n(91642),u=i(n(55038)),d=n(788),m=i(n(38791));t.default=function(e){var t=e.zoneIndex,n=e.playerIndex,a=s.createElement(s.Fragment,null),r=(0,l.useTranslation)(["main"]).t,o=s.useContext(c.GameContext).game,i=o.players[n],p=i.zones[t];return d.GameUtils.isFiasco(o,n,t)&&(m.default.event("play","fiasco",i.name),a=s.createElement("div",{className:"fiascoBox rounded importantNote"},"FiASCO!")),s.createElement(s.Fragment,null,s.createElement("div",{className:"playersList"},s.createElement("div",{className:"playerListItem importantNote rounded"},s.createElement("img",{src:i.avatar,alt:"avatar"}),i.name)),s.createElement("div",{className:"controlTextContainer rounded rounded2"},s.createElement("div",{className:"smallText"},r("description.zona"),": ",t+1),s.createElement("div",{className:"smallText"},r("description.puertas"),": ",o.gates[t]),s.createElement("div",{className:"smallText"},"max ",r("description.tiempo"),": ",u.default.printTime(u.default.millisToTime(o.maxTime))),s.createElement("div",{className:"smallText"},"max ",r("description.puntos"),": ",o.maxPoints),s.createElement("div",{className:"bold pointsText"},r("description.total"),": ",p.totalPoints),a))}},58349:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n(96540)),l=i(n(55038)),c=i(n(96276)),u=i(n(90498)),d=n(32418),m=n(91642);t.default=function(e){var t=e.playerZone,n=e.forceAction,a=e.setRepairStatus,r=e.onTimerChange,o=e.onTimeFiasco,i=e.onPointBecauseLastMinute,p=(0,d.useTranslation)(["main"]).t,f=s.useContext(m.GameContext).game;return s.createElement("div",{className:"controlTextContainer rounded rounded2"},l.default.isIphone()?s.createElement(s.Fragment,null):s.createElement(c.default,null),f.courtesyTime>0?s.createElement("div",{className:"pointsText"},p("description.puntos")," ",p("description.portiempo"),": ",t.simpathyPoints):s.createElement(s.Fragment,null),s.createElement("button",{className:"repairButton importantNote",onClick:a},p("description.iniciarreparacion")),s.createElement(u.default,{courtesyTime:f.courtesyTime,startTime:t.time,label:p("description.tiempo"),forceAction:n,onTimerChange:r,onTimeFiasco:o,onPointBecauseLastMinute:i,maxTime:f.maxTime}))}},35153:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(96540)),u=l(n(51605)),d=n(788),m=n(75730),p=l(n(38791)),f=n(91642);function g(e,t){var n={tickTime:0,forceAction:"",game:e};return d.GameUtils.init(n.game,d.GameUtils.getGameTypeControlTextValuesInit(n.game.gameType),d.GameUtils.getGameTypeFiascoControlTextValuesInit(n.game.gameType),t),n}t.default=function(e,t,n,r){var o=new u.default,i=c.useContext(f.GameContext),l=i.game,E=i.gameExtras,T=c.useState((function(){return window.scrollTo(0,0),g(l,!1)})),h=T[0],v=T[1],b=h.game.players[n].zones[r];return c.useEffect((function(){var e=h.game.players[n].zones[r];v(a(a({},h),{tickTime:e.time,forceAction:"play"})),document.body.classList.add(d.GameUtils.getGameTypeBodyClassName(l.gameType))}),[]),[h,function(e){var t=a({},h);if(!e){var o=t.game.players[n].zones[r];o.simpathyPoints=0,E.onTimerChange(o)}b.time=e,v(a(a({},t),{tickTime:e,forceAction:"play"}))},function(e,t){var i=a({},h),l=i.game,c=l.players[n].zones[r],u=c.gateProgressionData[c.gateProgression];(l.maxPoints<=c.points&&l.maxPoints>0||l.maxTime<=h.tickTime&&l.maxTime>0)&&!(c.points+e<=l.maxPoints&&0===c.fiascoControlTextValues.filter((function(e){return e>0})).length)||(u.controlTextValues=s([],u.controlTextValues,!0),u.controlTextValues[t]+=e,c.points+=e,c.gateProgression<l.gates[r]&&(u.gatePoints+=e),o.sendMessage(m.MSG_POINTS,c.points),E.onChangeScore(c),v(i),d.GameUtils.isFiasco(i.game,n,r)&&v(a(a({},h),{forceAction:"pause"})))},function(){var e=a({},h);window.scrollTo(0,0),p.default.event("play","reset",e.game.players[n].name),(e=g(e.game,!0)).forceAction="stop",v((function(t){return a(a({},t),e)}))},function(){var t=a({},h),o=t.game,i=o.players;window.scrollTo(0,0),E.onEndPlayer(o,h.tickTime,n,r),t.forceAction="stop",v(t),p.default.event("play","endPlayer",i[n].name),document.body.classList.remove(d.GameUtils.getGameTypeBodyClassName(l.gameType)),e(t.game)},function(e){var t=a({},h),i=t.game.players[n].zones[r];i.gateProgression=e,o.sendMessage(m.MSG_GATES,i.gateProgression),e===t.game.gates[r]&&(t.forceAction="pause"),E.onGateProgressionChange(i),v(t)},function(e,t){var o=a({},h),i=o.game.players[n].zones[r];i.fiascoControlTextValues=s([],i.fiascoControlTextValues,!0),i.fiascoControlTextValues[t]+=e,i.fiascoControlTextValues[t]>0&&(o.forceAction="pause"),E.onFiascoChangeScore(),v(o)},function(){var e=a({},h),t=e.game.players[n].zones[r];t.simpathyPoints++,E.onPointBecauseLastMinute(t),v(e)},function(){var e=a({},h);v(a(a({},e),{tickTime:l.maxTime+l.courtesyTime,forceAction:"pause"}))},function(){var e=a({},h);e.game.players[n].zones[r].time=h.tickTime,e.forceAction="stop",v(e),t&&t(n,r)}]}},82155:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GAME_STATUS_FINISHED=t.GAME_STATUS_PLAYING=t.GAME_STATUS_CREATED=void 0;var l=i(n(96540)),c=n(6932),u=s(n(99512)),d=n(32418),m=n(788),p=n(99512),f=s(n(55038));t.GAME_STATUS_CREATED=0,t.GAME_STATUS_PLAYING=1,t.GAME_STATUS_FINISHED=2,t.default=function(e,n){var r=l.useState(t.GAME_STATUS_CREATED),o=r[0],i=r[1],s=l.useState(e),g=s[0],E=s[1],T=l.useState([]),h=T[0],v=T[1],b=l.useRef([]),y=l.useState(-1),_=y[0],x=y[1],P=window.crawlear.fb,A=(0,d.useTranslation)(["main"]).t,G=l.useState({name:"",avatar:"",group:0,id:0,zones:[],uid:""}),S=G[0],C=G[1];return l.useEffect((function(){c.isOffline?v(m.GameUtils.createGameProgression(g.zones,g.players.length)):P.getGameProgression(g.gid,(function(){}),(function(){}),(function(e,t){var n={};n[e]=t,E(u.default.updateGameFromProgression(t,g)),b.current=a(a({},b.current),n),v(a(a({},b.current),n))}),(function(e,t){var n={};n[e]=t,E(u.default.updateGameFromProgression(t,g)),b.current=a(a({},b.current),n),v(a(a({},b.current),n))}))}),[]),[o,g,h,v,S,_,function(e,n){var a=e.id,r=e.group;i(t.GAME_STATUS_PLAYING),C(e),x(n),h[r][a][n].status=p.STATUS_PLAYING,v(h),P.setGameProgression(g.gid,a,r,n,h[r][a][n])},function(e,r){if(u.default.isGroupGameFinished(e,h,r)&&window.confirm(A("content.cerrarpartida"))&&!c.isOffline)P.getGameResult(e,(function(e){var r=a({},e);r.gameStatus=2,n.onGameEnd(r),r=f.default.getOrderedGameResult(r),P.updateGame(r),P.removeGameProgression(r.gid),E(r),i(t.GAME_STATUS_FINISHED)}),(function(){}));else if(c.isOffline){var o=f.default.getOrderedGameResult(e);E(m.GameUtils.getGameResult(o,h)),i(t.GAME_STATUS_FINISHED)}},function(e){if(u.default.isIndividualGame(g))n.onGameEnd(g),(l=f.default.getOrderedGameResult(g)).gameStatus=2,P.updateGame(l),P.removeGameProgression(l.gid),P.removeDirectorPresenceRequest(l.gid),i(t.GAME_STATUS_FINISHED),E(l);else{var r=S.id,o=S.group,s=a({},h),l=a({},g);s[o][r][_].status=p.STATUS_DONE,s[o][r][_].data=e.players[r].zones[_],!s[o][r][_].data.judgedBy&&(s[o][r][_].data.judgedBy=[]),s[o][r][_].data.judgedBy.push(window.crawlear.user.uid),v(s),l.players[r].zones[_]=s[o][r][_].data,P.setGameProgression(l.gid,r,o,_,s[o][r][_]),i(t.GAME_STATUS_CREATED),E(l)}},function(e,n){var r=a({},h),o=g.players[e],s=o.group,l=o.id;r[s][e][n].status=p.STATUS_REPAIR,r[s][e][n].repairData={setTime:(new Date).getTime()},r[s][e][n].data=o.zones[n],v(r),P.setGameProgression(g.gid,l,s,n,r[s][l][n]),i(t.GAME_STATUS_CREATED)}]}},15420:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(96540)),s=n(32418),l=n(79887),c=n(99512);t.default=function(e){var t=i.useState(null),n=t[0],a=t[1],r=i.useState(-1),o=r[0],u=r[1],d=i.useState(""),m=d[0],p=d[1],f=i.useContext(l.GameProgressionContext)[0],g=(0,s.useTranslation)(["main"]).t;return[n,o,m,f,function(e,t){u(t),a(e),p("")},function(){if(n&&-1!==o){var t=n.id,a=n.group,r=f[a][t][o];r.status===c.STATUS_WAITING&&window.confirm(g("content.quieresempezarzona"))||r.status===c.STATUS_DONE&&window.confirm(g("content.quiereseditarpartida"))||r.status===c.STATUS_PLAYING&&window.confirm(g("content.seguroeditarpartidaenjuego"))?(p(""),e(n,o)):r.status===c.STATUS_PLAYING?p(g("error.juegoencurso")):r.status===c.STATUS_REPAIR&&p(g("error.reparacionencurso"))}}]}},10057:function(e,t,n){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,o=t.length;r<o;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(96540)),u=l(n(38791)),d=n(43841),m=n(32418),p=n(788),f=n(91642);t.default=function(e){var t=e.onGameEnd,n=(0,m.useTranslation)(["main"]).t,r=c.useContext(f.GameContext).game,o=c.useState((function(){return d.KingGameScores.texts=d.KingGameScores.texts.map((function(e){return n(e)})),function(e){var t={game:e,order:s([],e.players,!0)};p.GameUtils.init(t.game,p.GameUtils.getGameTypeControlTextValuesInit(t.game.gameType),p.GameUtils.getGameTypeFiascoControlTextValuesInit(t.game.gameType),!1);for(var n=0;n<t.game.players.length;n++)t.game.players[n].zones[0].gateProgressionData[0].controlTextValues=new Array(d.KingGameScores.steps.length).fill(0);return t}(r)})),i=o[0],l=o[1];return c.useEffect((function(){u.default.pageview("/kinggame/")}),[]),[i,function(e,t,n){var r,o,c,u=a({},i),d=u.game.players,m=d[n].zones[0],p=m.gateProgressionData[0];p.controlTextValues=s([],p.controlTextValues,!0),p.controlTextValues[t]+=e,m.totalPoints+=e,m.points+=e,u.order=(r=u.order.findIndex((function(e){return e.id===d[n].id})),o=u.order,(c=s([],o,!0)).push(c.splice(r,1)[0]),c),l(u)},function(){t&&t(r)}]}},57725:(e,t,n)=>{e.exports=n.p+"c3934397bbea4f4b413d.png"},89805:(e,t,n)=>{e.exports=n.p+"4e8d84bf42ab7e35ed38.png"},58931:(e,t,n)=>{e.exports=n.p+"7df5afd41f704db43dad.png"}}]);