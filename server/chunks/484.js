exports.id=484,exports.ids=[484],exports.modules={30774:(e,a,n)=>{"use strict";n.d(a,{Z:()=>i});var t=n(10326);n(17577),n(47710);let i=function({message:e}){return!e||e.length<=0?t.jsx(t.Fragment,{}):t.jsx("div",{className:"errorBoxContainer",children:e})}},85928:(e,a,n)=>{"use strict";n.d(a,{Z:()=>i});var t=n(10326);n(17577),n(18283);let i=function(){return t.jsx(t.Fragment,{children:(0,t.jsxs)("div",{className:"spinner",children:[t.jsx("div",{}),t.jsx("div",{}),t.jsx("div",{}),t.jsx("div",{})]})})}},31107:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>z});var t=n(10326),i=n(17577),s=n(30999),r=n(10425);n(27014);let o=function({onGameTypeChange:e,selectedGameType:a=0,selectedPointsType:n=0}){let{t:s}=(0,r.$G)(["main"]),o=[s("gametype.aecar"),s("gametype.rey"),s("gametype.isrcc"),s("gametype.levante124"),s("gametype.copaespana"),s("gametype.minicrawlerpassion"),s("gametype.generic")],l=[t.jsx("div",{children:s("gametype.modojuegoarcar")}),t.jsx("div",{children:s("gametype.modojuegorey")}),t.jsx("div",{children:s("gametype.modojuegoisrcc")}),t.jsx("div",{children:s("gametype.modojuegolevante124")}),t.jsx("div",{children:s("gametype.modojuegocopaespana")}),t.jsx("div",{children:s("gametype.modojuegominicrawlerpassion")}),t.jsx("div",{children:s("gametype.modojuegogeneric")})],[d,c]=i.useState({gameType:a}),u=[];return o.forEach((e,a)=>{u.push(t.jsx("option",{value:a,children:o[a]},a))}),t.jsx(t.Fragment,{children:(0,t.jsxs)("div",{className:"gameType rounded1 rounded",children:[(0,t.jsxs)("label",{htmlFor:"gameTypeSelect",className:"headerText bold",children:[s("gametype.modojuego"),t.jsx("select",{id:"gameTypeSelect",defaultValue:a,onChange:function(a){let n=a.target.selectedIndex;e&&e(n),c({gameType:n})},children:u})]}),t.jsx("div",{className:"gameSelectText smallText",children:l[d.gameType]})]})})};n(79461);let l=function({player:e,i:a,onRemovePlayer:n,onClickPlayer:i,onGroupChange:s,maxGroups:o,editMode:l,isForJudge:d,onGameDirectorChange:c}){let{t:u}=(0,r.$G)(["main"]),m=[];if(l){let i=[];for(let e=0;e<o;e++)i.push((0,t.jsxs)("option",{value:e,children:[u("description.grupo")," ",e+1]}));m.push(t.jsx("button",{className:"buttonControlTextMinus",id:a,onClick:function(e){e.stopPropagation(),n&&n(e)},children:"-"})),m.push(t.jsx("div",{children:t.jsx("select",{value:e.group,onChange:function(a){let n=a.target.selectedIndex;s&&s(e.id,n)},children:i})})),d&&m.push((0,t.jsxs)(t.Fragment,{children:[t.jsx("input",{type:"checkbox",onChange:function(a){c&&c(e.id,a.target.checked)}}),t.jsx("span",{className:"PlayerItemGameDirector",children:u("description.directordepartida")})]}))}return t.jsx("li",{onClick:function(){i&&i(e.id)},className:"closed importantNote rounded playerListItem",value:e.name,children:(0,t.jsxs)("div",{className:"playerBox",children:[t.jsx("img",{referrerPolicy:"no-referrer",src:e.avatar,alt:"avatar"}),t.jsx("div",{className:"textOverflow",children:e.name}),m]})},a)};var d=n(7872);n(17290);let c={src:"/_next/static/media/iconAdd.a91ab472.png",height:17,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAAx0lEQVR42mP48OEDIwMQ3Lp1i+3Hjx8Rv3//Ln/37p0CSOznz59gOYa3b9/yffv2bRpQwQygYO337983fP782Q4sCVXg8+nTp4UfP360Wrx4MRNQshdocsOpU6fYwApev35d+ObNG3MQGyjB8vzZMxYgvxYorghW8OjRI4unT59WPnv2TO/9hw+sQHb2kydP4k+cOMEMVnDlyhX2+/fuRdy/fz/83r17bkA6/e6dOypgyRs3boBdCvWJ6u3bt80uXrjABXUbIwBkDn7Djb8kxwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:7},u=function({onUserSeachPlayerAdd:e,onUserClick:a,onPlusAddUserClick:n,mainText:s,secondaryText:r,iconSend:o,children:l}){let u=window.crawlear.fb,m=window.crawlear.fbBase,[g,p]=i.useState(""),[h,x]=i.useState([]),j=i.useRef(),v=i.useRef();function f(a){let n=a.target,t=n.getAttribute("data-uid"),i=n.getAttribute("data-displayname"),s=n.getAttribute("data-photourl");x([]),p(""),e&&e({uid:t,displayName:i,photoURL:s})}function y(e){let n=e.target.nextElementSibling.getAttribute("data-uid");a&&a(n)}let w=[],T=0,b;return h.length>0&&(w.push(t.jsx("div",{className:"userSearchResultsText smallText",children:r},T)),T++),h.forEach(a=>{let n=o;e&&a.uid===window.crawlear.user.uid&&(n=c),w.push((0,t.jsxs)("div",{className:"bold userSearchItem",children:[t.jsx("span",{onClick:y,className:"userSearchResult textOverflow",children:a.displayName}),t.jsx("img",{src:n,alt:"send icon","data-uid":a.uid,"data-displayname":a.displayName,"data-photourl":a.photoURL,onClick:f})]},T)),T++}),n&&(b=t.jsx("button",{className:"buttonControlTextPlus",onClick:()=>{let e=v.current.value;x([]),p(""),n({uid:"",displayName:e})},children:"+"})),(0,t.jsxs)("div",{className:"userSearchContainer rounded rounded3",children:[!d.s||n?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"userSearchText smallText",children:s}),t.jsx("input",{id:Date.now(),ref:v,className:"userSearchName",onChange:function(e){let a=e.target.value;p(a),!d.s&&m.isUserLogged()&&(a.length>0?u.userSearch(a,e=>{x(e)},()=>{}):x([]))},value:g})]}):t.jsx(t.Fragment,{}),b,l,t.jsx("div",{ref:j,className:"resultsContainer",children:w})]})},m={src:"/_next/static/media/iconSend.82deb4fe.png",height:17,width:20,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAQAAACfUMTVAAAAbElEQVR42mXBoQ5AQACA4T8Jgk2iSIpgU80DXOFtbILoLQ2TCObS7W63u+K67+PHxX70i5/DxY8uRjdmUsIWtlDCTLpBVu8AT/3U8A6y4ipvASYyEdziKjnTo9+7vQ27oz9TYE22fMvCfE3gA5MbL8eNMHDZAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7},g=function({onUserSeachPlayerAdd:e,gameName:a,isForJudge:n}){let s=window.crawlear.fb,o=window.crawlear.fbBase,{t:l}=(0,r.$G)(["main"]),d=i.useRef(0),[c,g]=i.useState(0),p=[];return d.current>0&&p.push((0,t.jsxs)("div",{children:[d.current," ",l("description.peticionespendientes")]},0)),t.jsx(u,{onUserSeachPlayerAdd:function({uid:n,displayName:t,photoURL:i}){if(n&&(n===window.crawlear.user.uid||window.confirm(l("content.peticionjuegoconfirmacion")))){if(n===window.crawlear.user.uid){let a=window.crawlear.user;e({uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,group:0})}else s.setUserGameRequest(window.crawlear.user.uid,window.crawlear.user.displayName,n,a,(a,s)=>{"pending"===s?(d.current+=1,g(c+1)):("accepted"===s&&e({uid:n,displayName:t,photoURL:i,group:0}),d.current-=1,g(c-1))})}},onPlusAddUserClick:n?void 0:e,mainText:o.isUserLogged()?l("content.usuariodesistema"):l("content.usuarionosistema"),secondaryText:`${l("content.enviorequest")}. ${l("content.enviorequest2")}`,iconSend:m,children:p})};var p=n(28186);n(44501);let h=function({inPlayers:e,onPlayerNumerChange:a,onGameDirectorChange:n,gameName:s,isForJudge:o,maxGroups:d}){let[c,u]=i.useState(e||[]),{t:m}=(0,r.$G)(["main"]);function h(e){p.Z.event("menu","removePlayer",c[e.target.id].name),delete c[e.target.id];let n=c.filter(e=>e);u(n),a&&a(n)}function x(e,a){let n=[...c];n[e].group=a,u(n)}function j(e,a){n&&n(e,a)}i.useEffect(()=>{a&&a(c)},[c]);let v=m(c.length?"description.jugadores":"description.nojugadores");return o&&(v=m(c.length?"description.jueces":"description.nojueces")),t.jsx(t.Fragment,{children:(0,t.jsxs)("div",{className:"players rounded rounded1",children:[t.jsx("div",{className:"headerText bold",children:m(o?"description.jueces":"description.jugadores")}),t.jsx(g,{isForJudge:o,onUserSeachPlayerAdd:function(e){let n=e.displayName;!(!n||0===n.trim().length||c.find(a=>a.uid===e.uid&&e.uid.length>0))&&(!o||e.uid)&&(c.push({id:c.length,uid:e.uid||"",name:n,avatar:e.photoURL||`https://eu.ui-avatars.com/api/?background=345B63&color=FFFFFF&name=${n}`,group:0,time:0,points:0,battery:!1}),p.Z.event("menu","addPlayer",n),a&&a(c))},gameName:s}),t.jsx("div",{className:"headerText",children:m(o?"description.juecesenpartida":"description.usuariosenpartida")}),t.jsx("ul",{className:"playersList",children:0===c.length?v:c.map((e,a)=>t.jsx(l,{player:e,i:a,onGameDirectorChange:j,maxGroups:d,onGroupChange:x,editMode:!0,isForJudge:o,onRemovePlayer:h},a))})]})})};var x=n(89243);n(62568);let j=function({onMaxTimeChange:e,minutes:a,seconds:n}){let i=[a,n];function s(a,n){let t=[...i];t[n]=a,a=function(e){let a=Number(e[0])||0;return 1e3*(Number(e[1])||0)+6e4*a}(t),e&&e(a)}return(0,t.jsxs)("div",{className:"pickerContainer rounded rounded2",children:[t.jsx(x.Z,{value:i[0],initialValue:0,minValue:0,maxValue:60,callback:e=>{s(e,0)}}),t.jsx("div",{className:"maxTimePickerContainer--separator",children:"m"}),t.jsx(x.Z,{value:i[1],initialValue:0,minValue:0,maxValue:60,callback:e=>{s(e,1)}}),t.jsx("div",{className:"maxTimePickerContainer--separator",children:"s"})]})};var v=n(87428);let f=function({onMaxTimeChange:e,onMaxPointsChange:a,showTimePicker:n,time:i,points:s}){let{t:o}=(0,r.$G)(["main"]),l=v.Z.millisToTime(i),d=t.jsx(t.Fragment,{});return n&&(d=(0,t.jsxs)(t.Fragment,{children:[t.jsx("p",{children:o("content.maxTimeText1")}),t.jsx(j,{onMaxTimeChange:e,minutes:l.m,seconds:l.s})]})),(0,t.jsxs)("div",{children:[d,t.jsx("p",{children:o("content.maxTimeText2")}),t.jsx("div",{className:"pickerContainer rounded rounded2",children:t.jsx(x.Z,{value:s,minValue:0,initialValue:0,callback:e=>{a(e)}})})]})},y=function({onZonesChange:e,value:a=1}){let{t:n}=(0,r.$G)(["main"]);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[n("content.seleccionZonas"),":"]}),t.jsx("div",{className:"pickerContainer rounded rounded2",children:t.jsx(x.Z,{value:a,minValue:1,maxValue:40,callback:a=>{e(a)},initialValue:1})})]})},w=function({onGroupsChange:e,value:a,minValue:n,maxValue:i}){let{t:s}=(0,r.$G)(["main"]);return d.s?t.jsx(t.Fragment,{}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[s("content.selecciongrupos"),":"]}),t.jsx("div",{className:"pickerContainer horizontalScrollContainer rounded rounded2",children:t.jsx(x.Z,{minValue:n||1,maxValue:i||10,value:a,callback:a=>{e(a)},initialValue:1})})]})},T=function({onGatesChange:e,zones:a,value:n,minValue:i,maxValue:s}){let{t:o}=(0,r.$G)(["main"]),l=[];for(let r=0;r<a;r++)l.push((0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"zoneName",children:[o("description.zona")," ",r+1,":"]},r),t.jsx("br",{},`br${r}`),t.jsx(x.Z,{minValue:i||1,maxValue:s||40,value:n,callback:a=>{e(a,r)},initialValue:1},`picker${r}`)]},`pickerContainer${r}`));return(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:[o("content.seleccionPuertas"),":"]}),t.jsx("div",{className:"gatesPickerContainer pickerContainer horizontalScrollContainer rounded rounded2",children:l})]})};var b=n(30774),A=n(85928);let N=function({onLocationResolved:e}){let a;let[n,s]=i.useState(0),[o,l]=i.useState({latitude:0,longitude:0}),{t:d}=(0,r.$G)(["main"]);return navigator.geolocation?0===n?a=t.jsx("a",{className:"bold",href:"https://crawlear.com",onClick:function(a){a.preventDefault(),navigator.geolocation?(s(2),navigator.geolocation.getCurrentPosition(a=>{let n={latitude:a.coords.latitude,longitude:a.coords.longitude};e(n),s(1),l(n)},()=>{e({}),s(0)})):s(0)},children:d("description.obtener")}):2===n?a=t.jsx(A.Z,{}):1===n&&(a=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["(",`${o.latitude},${o.longitude}`,")"]}),t.jsx("a",{href:v.Z.getMapsURL(o.latitude,o.longitude),rel:"noreferrer",target:"_blank",children:d("description.vergooglemaps")})]})):a=t.jsx("div",{className:"",children:d("content.nogeolocation")}),a};var C=n(60892),k=n(23784),P=n(41917),G=n(63854),S=n(19541),R=n(14895),U=n(37005);let F={getMaxTimeAndPointsFromGameType:e=>{let a=0,n=0;switch(e){case s.oP:a=C.zR.maxPoints,n=C.zR.maxTime;break;case s.te:a=S.wG.maxPoints,n=S.wG.maxTime;break;case s.UZ:a=k.nz.maxPoints,n=k.nz.maxTime;break;case s.HF:a=P.$z.maxPoints,n=P.$z.maxTime;break;case s.uG:a=G.UC.maxPoints,n=G.UC.maxTime;break;case s.Jo:a=R.Kp.maxPoints,n=R.Kp.maxTime;break;case s.Oh:a=U.GQ.maxPoints,n=U.GQ.maxTime;break;default:a=0,n=0}return[n,a]}};var V=n(35047);let Z=function({preconfiguredGame:e,onGameCreated:a}){let[n,t]=i.useState(()=>{let a=e||new s.lA("",new Date().toLocaleDateString(),{latitude:0,longitude:0},!0,s.HF,[],[],6e5,40,[,].fill(10),1,0,[],[],[]);return a.date=new Date().toLocaleDateString(),a}),o=(0,V.useRouter)(),[l,c]=i.useState(""),[u,m]=i.useState(!1),[g,h]=i.useState(1),{t:x}=(0,r.$G)(["main"]),j=window.crawlear.fb;function f(e){let a={...n},i="addJudge";n.judges.length>e.length&&(i="removeJudge"),p.Z.event("menu",i,e.length),a.judges=[...e],d.s&&!a.owner.length&&a.owner.push(s.UU),t(a),c("")}return i.useEffect(()=>{window.scrollTo(0,0),d.s&&f([s.vf])},[]),[n,l,g,function(e){let a={...n};p.Z.event("menu","playModeChange",e),a.gameType=e,[a.maxTime,a.maxPoints]=F.getMaxTimeAndPointsFromGameType(a.gameType),t(a)},function(e){if(e.latitude&&e.longitude){let a={...n};a.location=e,t(a)}else c(x("error.nogeolocation"))},f,function(e){let a={...n},i="addPlayer";n.players.length>e.length&&(i="removePlayer"),p.Z.event("menu",i,e.length),a.players=[...e],t(a),c("")},function(e){let a={...n};p.Z.event("menu","maxPointsSet",e),a.maxPoints=e,t(a)},function(e){let a={...n};a.maxTime=e,p.Z.event("menu","maxTimeSet",e),t(a)},function(e){let a={...n};n.zones<e?a.gates.push(10):a.gates.pop(),a.zones=e,p.Z.event("menu","zonesSet",e),t(a)},function(e,a){let i={...n};i.gates[a]=e,p.Z.event("menu","gateSet",e),t(i)},function(e){let a={...n},i=e.target.value;i&&(a.name=i,t(a),c(""))},function(e){h(e)},function(e){let a={...n};a.isPublic=e.target.value,t(a)},function(e,a){let i=n.judges[e].uid,s={...n};if(a&&!s.owner.find(e=>e===i))s.owner.push(i),t(s);else if(!a&&s.owner.find(e=>e===i)){let e=s.owner.indexOf(i);s.owner.splice(e,1),t(s)}},function(e){m(e.target.checked)},function(e,n){let i=function(e,a){let n=Array(e).fill(0);for(let e=0;e<a.players.length;e++)n[a.players[e].group]++;return void 0===n.find(e=>0===e)}(e,n);if(window.scrollTo(0,0),n.name&&n.name.length){if(i){if(n.judges.length||n.gameType===s.te){if(n.players.length){if(n.gameType===s.te||n.owner.length){if(n.gameType!==s.te&&i||n.gameType===s.te){let e={...n};n.gameType===s.te&&(e.judges.push({...window.crawlear.user}),e.zones=1,e.gates=[,].fill(1)),e.uids=v.Z.getUidsFromUsers(e.players),e.jids=v.Z.getUidsFromUsers(e.judges),u&&function(e){if(e.players.length){let a=[...e.players];a=a.sort((e,a)=>Math.random()-.5),e.players=a,s.zo.redoPlayersIds(e)}}(e),s.zo.init(e,s.zo.getGameTypeControlTextValuesInit(e.gameType),s.zo.getGameTypeFiascoControlTextValuesInit(e.gameType),!0),d.s&&a?a(e):j.setGame(e,a=>{e.gid=a.gid,j.createGameProgression(e),t(e),o.push("/game")},()=>{})}}else c(x("error.nodirectordepartida"))}else c(x("error.nojugadores"))}else c(x("error.nojueces"))}else c(x("error.rellenargrupos"))}else c(x("error.nonombre"))}]};n(69226);let z=function({preconfiguredGame:e,onGameCreated:a}){let{t:n}=(0,r.$G)(["main"]),l=[];i.useEffect(()=>{window.crawlear&&window?.crawlear.user&&window?.crawlear.user.uid||d.s,p.Z.pageview("/gameconfigurator")},[]);let[c,u,m,g,x,j,v,A,C,k,P,G,S,R,U,F,V]=Z({preconfiguredGame:e,onGameCreated:a});return l.push(t.jsx(f,{onMaxPointsChange:A,onMaxTimeChange:C,time:c.maxTime,points:c.maxPoints,showTimePicker:!0},0)),c.gameType===s.te||(l.push(t.jsx(y,{value:c.zones,onZonesChange:k},1)),l.push(t.jsx(T,{zones:c.zones,value:10,onGatesChange:P},2)),l.push(t.jsx(w,{onGroupsChange:S,value:1,minValue:1,maxValue:10},3)),d.s||l.push(t.jsx(h,{isForJudge:!0,maxGroups:m,inPlayers:c.judges,gameName:c.name,onGameDirectorChange:U,onPlayerNumerChange:j},4))),(0,t.jsxs)(t.Fragment,{children:[t.jsx(b.Z,{message:u}),t.jsx("div",{className:"newGameContainer rounded rounded1",children:(0,t.jsxs)("div",{className:"newGame",children:[t.jsx("div",{className:"headerText bold",children:n("description.nuevaPartida")}),(0,t.jsxs)("div",{className:"newGameRow",children:[t.jsx("span",{className:"",children:n("description.nombre")}),": ",t.jsx("input",{value:c.name,className:"newGameNameInput",type:"text",onChange:G})]}),(0,t.jsxs)("div",{className:"newGameRow",children:[t.jsx("span",{className:"",children:n("description.fecha")}),": ",c.date.toLocaleString()]}),(0,t.jsxs)("div",{className:"newGameRow",children:[t.jsx("span",{className:"",children:n("description.esPublica")}),": ",t.jsx("input",{type:"checkbox",checked:c.isPublic,onChange:R})]}),(0,t.jsxs)("div",{className:"newGameRow",children:[t.jsx("span",{className:"",children:n("description.localizacion")}),":",t.jsx(N,{onLocationResolved:x})]})]})}),t.jsx(o,{selectedGameType:c.gameType,selectedPointsType:c.pointsType,onGameTypeChange:e=>{g(e)}}),l,t.jsx(h,{gameName:c.name,isForJudge:!1,inPlayers:c.players,maxGroups:m,onGameDirectorChange:()=>{},onPlayerNumerChange:e=>{v&&v(e)}}),t.jsx("input",{type:"checkbox",onChange:F}),n("description.ordenRamdomJugadores"),(0,t.jsxs)("p",{children:[t.jsx("button",{className:"importantNote",onClick:()=>{V(m,c)},children:n("description.crearjuego")}),t.jsx("button",{onClick:()=>{window.location.reload()},children:n("description.atras")})]})]})}},7872:(e,a,n)=>{"use strict";n.d(a,{s:()=>t}),n(10326),n(17577),n(22487),n(30999),n(2842);let t=!1},54965:(e,a,n)=>{"use strict";n.d(a,{Z:()=>s}),n(71159);var t=n(71615),i=n(58585);let s=function({children:e}){return t.cookies().get("crawlear_session")?.value||(0,i.redirect)("/"),e}},69226:()=>{},27014:()=>{},62568:()=>{},44501:()=>{},79461:()=>{},17290:()=>{},47710:()=>{},18283:()=>{},2842:()=>{}};